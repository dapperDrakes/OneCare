if (self.CavalryLogger) { CavalryLogger.start_js(["D0EPC"]); }

__d("PagesPrivateReplyConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created",CANNOT_MESSAGE:"cannot_message",MESSAGING_DISABLED:"messaging_disabled"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};},null);
__d("ReactionNuxTypeEnum",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LIKE_CLICK:"like_click",LIKE_CLICK_RENUX:"like_click_renux"};},null);
__d("TranslateAllState",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={INITIAL:"initial",LOADING:"loading",COMPLETE:"complete"};},null);
__d("TranslationRating",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={UNDEFINED:0,VERY_BAD:1,BAD:2,OK:3,GOOD:4,VERY_GOOD:5};},null);
__d("TranslationStatusEnum",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUCCESS:0,NO_PREPROCESSING_SERVER:1,NO_PREPROCESSING_RESPONSE:2,NO_TRANSLATION_SERVER:3,NO_TRANSLATION_RESPONSE:4,NO_POSTPROCESSING_SERVER:5,NO_POSTPROCESSING_RESPONSE:6,NO_CONFIDENCE_SERVER:7,NO_CONFIDENCE_RESPONSE:8,SOURCE_AND_TARGET_LANG_SAME:9,UNSUPPORTED_LANG_PAIR:10,UNSUPPORTED_CONTENT_TYPE:11,NO_PROFANITY_DETECTION_SERVER:12,NO_PROFANITY_DETECTION_RESPONSE:13};},null);
__d("TranslationTrigger",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SEE_TRANSLATION:"see_translation",AUTO_TRANSLATION:"auto_translation",SEE_CONVERSION:"see_conversion",TRANSLATE_ALL:"translate_all",NONE:"none"};},null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this;};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this;};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this;};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this;};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this;};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this;};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this;};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this;};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h;},null);
__d('UFICommentLogger',['UFICommentTypedLogger'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();}delete this.$UFICommentLogger2[i];};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l];}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log();};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h();},null);
__d('UFICommentVPVs',['Map','MarauderLogger','Set'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new (c('Map'))();function i(l,m){c('MarauderLogger').log('comment_vpv',undefined,null,'comment',m);if(!h.has(l))h.set(l,new (c('Set'))());h.get(l).add(m);}function j(l,m){if(h.has(l))return h.get(l).has(m);return false;}var k={logVPV:i,hasLoggedVPV:j};f.exports=k;},null);
__d('UFIDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('ReactDispatcher_DEPRECATED');},null);
__d('UFIAddCommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UFIActionTypes').ADD_COMMENT,i={cancel:function(j){return {type:h.CANCEL,instanceid:j};},retrySubmit:function(j){return {type:h.RETRY_SUBMIT,comment:j};},submitEdit:function(j,k,l){return {type:h.SUBMIT_EDIT,comment:j,commentData:k,target:l};},submitNew:function(j,k,l){return {type:h.SUBMIT_NEW,comment:j,target:k,replyCommentID:l,timestamp:Date.now()};},typingChange:function(j){return {type:h.TYPING_CHANGE,state:j};}};f.exports=i;},null);
__d('PublicConversationsUnicornTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:PublicConversationsUnicornLoggerConfig',this.$PublicConversationsUnicornTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:PublicConversationsUnicornLoggerConfig',this.$PublicConversationsUnicornTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$PublicConversationsUnicornTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$PublicConversationsUnicornTypedLogger1=babelHelpers['extends']({},this.$PublicConversationsUnicornTypedLogger1,j);return this;};h.prototype.setCommentFbid=function(j){this.$PublicConversationsUnicornTypedLogger1.comment_fbid=j;return this;};h.prototype.setVC=function(j){this.$PublicConversationsUnicornTypedLogger1.vc=j;return this;};var i={comment_fbid:true,vc:true};f.exports=h;},null);
__d('UFICommentAction',['UFIActionTypes','PublicConversationsUnicornTypedLogger'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UFIActionTypes').COMMENT,i={changeReaction:function(j,k,l){return {type:h.CHANGE_REACTION,comment:j,reactionType:k,target:l};},edit:function(j){return {type:h.EDIT,comment:j};},remove:function(j,k,l){return {type:h.REMOVE,comment:j,target:k,onConfirm:l};},removePreview:function(j,k){return {type:h.REMOVE_PREVIEW,comment:j,target:k};},toggleLike:function(j,k){return {type:h.TOGGLE_LIKE,comment:j,like:!j.hasviewerliked,target:k};},togglePin:function(j,k){return {type:h.TOGGLE_PIN,comment:j,target:k};},markUnicorn:function(j,k){new (c('PublicConversationsUnicornTypedLogger'))().setCommentFbid(j.fbid).log();},translate:function(j,k,l){return {type:h.TRANSLATE,comment:j,target:k,callback:l};},translateArray:function(j,k){return {type:c('UFIActionTypes').COMMENT.TRANSLATE_ARRAY,commentArray:j,id:k};},markAsSpam:function(j,k){return {type:h.TOGGLE_MARK_AS_SPAM,is_spam:true,comment:j,target:k};},markAsNotSpam:function(j,k){return {type:h.TOGGLE_MARK_AS_SPAM,is_spam:false,comment:j,target:k};},inlineBan:function(j,k,l){return {type:h.TOGGLE_INLINE_BAN,is_banned:true,comment:j,target:k,ownerid:l};},undoInlineBan:function(j,k,l){return {type:h.TOGGLE_INLINE_BAN,is_banned:false,comment:j,target:k,ownerid:l};},embed:function(j){return {type:h.EMBED,comment:j};},showConstituentTitle:function(j){return {type:h.SHOW_CONSTITUENT_TITLE,comment:j};},hideConstituentTitle:function(j){return {type:h.HIDE_CONSTITUENT_TITLE,comment:j};}};f.exports=i;},null);
__d('LtgTranslateAllDispatcher',['ExplicitRegistrationReactDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new (c('ExplicitRegistrationReactDispatcher'))({strict:true});},null);
__d('UFIInstanceState',['UFICentralUpdates'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;c('UFICentralUpdates').didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);},updateStateFields:function(k,l,m){var n=this.getKeyForInstance(k,l)||{};n=babelHelpers['extends']({},n,m);this.updateState(k,l,n);}};f.exports=j;},null);
__d('UFIComments',['invariant','ClientIDs','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIInstanceState','randomInt'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={},j={};function k(ca){return ca in j?j[ca]:ca;}function l(ca,da){ca.forEach(function(ea){var fa=ea.ftentidentifier,ga=c('UFIConstants').UFIPayloadSourceType,ha=ea.clientid,ia=false,ja=babelHelpers['extends']({},ea);if(ha){delete ja.clientid;ia=c('ClientIDs').isExistingClientID(ha);if(ia&&j[ha]){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(ea.id).log();return;}}if(da===ga.LIVE_SEND||da===ga.USER_ACTION||da===ga.ENDPOINT_ADD_COMMENT||da===ga.ENDPOINT_EDIT_COMMENT)ja.isunseen=true;if(da===ga.LIVE_SEND)ja.islive=true;if(da===ga.ENDPOINT_COMMENT_FETCH||da===ga.ENDPOINT_ID_COMMENT_FETCH)ja.fromfetch=true;if(ia&&i[ha]){if(i[ha].ufiinstanceid)c('UFIInstanceState').updateStateField(i[ha].ufiinstanceid,'locallycomposed',ea.id,true);ja.ufiinstanceid=i[ha].ufiinstanceid;j[ha]=ea.id;i[ea.id]=i[ha];delete i[ha];c('UFICentralUpdates').didUpdateComment(ha);}ba.setComment(ea.id,new (c('ImmutableObject'))(ja));c('UFICentralUpdates').didUpdateComment(ea.id);c('UFICentralUpdates').didUpdateFeedback(fa);});}function m(ca,da){for(var ea=0;ea<ca.length;ea++){var fa=ca[ea];switch(fa.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:if(ba.getComment(fa.entidentifier))n(fa.clientid,fa.entidentifier,fa.hasviewerliked,fa.likecount,fa.reactiondata,da);break;case c('UFIConstants').UFIActionType.COMMENT_LIKE:n(fa.clientid,fa.commentid,fa.viewerliked,fa.likecount,fa.reactiondata,da);break;case c('UFIConstants').UFIActionType.COMMENT_REACTION:o(fa);break;case c('UFIConstants').UFIActionType.TOGGLE_PIN:p(fa.newcommenttoken,fa.oldcommenttoken);break;case c('UFIConstants').UFIActionType.DELETE_COMMENT:t(fa);break;case c('UFIConstants').UFIActionType.LIVE_DELETE_COMMENT:u(fa);break;case c('UFIConstants').UFIActionType.REMOVE_PREVIEW:v(fa);break;case c('UFIConstants').UFIActionType.COMMENT_SET_SPAM:w(fa);break;case c('UFIConstants').UFIActionType.CONFIRM_COMMENT_REMOVAL:x(fa);break;case c('UFIConstants').UFIActionType.TRANSLATE_COMMENT:r(fa);break;case c('UFIConstants').UFIActionType.COMMENT_LIKECOUNT_UPDATE:q(fa);break;case c('UFIConstants').UFIActionType.UPDATE_CONSTITUENT_TITLE:z(fa);break;}}}function n(ca,da,ea,fa,ga,ha){var ia=ba.getComment(da);if(ia){var ja={},ka=ca&&c('ClientIDs').isExistingClientID(ca);if(!ka){ja.hasviewerliked=ea;ja.likecount=fa;if(ga){ja.reactioncount=ga.reactioncount;ja.reactioncountmap=ga.reactioncountmap;ja.reactioncountreduced=ga.reactioncountreduced;ja.viewerreaction=ga.viewerreaction;}}if(ha===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(ka).setCommentID(da).log();ja.likeconfirmhash=c('randomInt')(0,1024);aa(da,ja);}}function o(ca){var da=ba.getComment(ca.commentid);if(da){var ea={};if(ca.clientid&&c('ClientIDs').isExistingClientID(ca.clientid)&&ca.viewerreaction!==da.viewerreaction)return;ea.hasviewerliked=ca.hasviewerliked;ea.likecount=ca.likecount;ea.reactioncount=ca.reactioncount;ea.reactioncountmap=ca.reactioncountmap;ea.reactioncountreduced=ca.reactioncountreduced;ea.viewerreaction=ca.viewerreaction;aa(ca.commentid,ea);}}function p(ca,da){aa(ca,{});aa(da,{});}function q(ca){var da=ba.getComment(ca.commentid);if(da&&ca.hasviewerliked===da.hasviewerliked){var ea={likecount:ca.likecount,likeconfirmhash:c('randomInt')(0,1024)};aa(ca.commentid,ea);}}function r(ca){var da=ca.commentid,ea=ba.getComment(da);if(ea){var fa={translationdata:ca.translationdata,translatedbody:ca.translatedbody};aa(da,fa);}}function s(ca){var da={reportLink:ca.reportLink,commenterIsFOF:ca.commenterIsFOF,userIsMinor:ca.userIsMinor,giveFeedbackLink:ca.giveFeedbackLink,reportGroupAdminLink:ca.reportGroupAdminLink};return da;}function t(ca){var da=ba.getComment(ca.commentid);y(da,c('UFIConstants').UFIStatus.DELETED);}function u(ca){var da=ba.getComment(ca.commentid);if(da&&da.status!==c('UFIConstants').UFIStatus.DELETED)y(da,c('UFIConstants').UFIStatus.LIVE_DELETED);}function v(ca){aa(ca.commentid,{attachment:null});}function w(ca){var da=ba.getComment(ca.commentid),ea=ca.shouldHideAsSpam?c('UFIConstants').UFIStatus.SPAM_DISPLAY:null;y(da,ea);}function x(ca){aa(ca.commentid,s(ca));}function y(ca,da){aa(ca.id,{priorstatus:ca.status,status:da});}function z(ca){var da=ba.getComment(ca.commentid);if(da){var ea={constituentTitle:ca.constituentTitle};aa(ca.commentid,ea);}}function aa(ca,da){var ea=ba.getComment(ca)||new (c('ImmutableObject'))({});ba.setComment(ca,c('ImmutableObject').set(ea,da));c('UFICentralUpdates').didUpdateComment(ea.id);c('UFICentralUpdates').didUpdateFeedback(ea.ftentidentifier);}var ba={getComment:function(ca){if(ca===c('UFIConstants').unavailableCommentKey)return null;return i[k(ca)];},setComment:function(ca,da){!(da instanceof c('ImmutableObject'))?h(0):void 0;i[k(ca)]=da;},resetComments:function(ca){for(var da in ca)delete i[k(da)];}};c('UFICentralUpdates').subscribe('update-comments',function(ca,da){if(da.comments&&da.comments.length)l(da.comments,da.payloadsource);});c('UFICentralUpdates').subscribe('update-actions',function(ca,da){if(da.actions&&da.actions.length)m(da.actions,da.payloadsource);});f.exports=ba;},6);
__d('UFIReactionsUtils',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getReactionData:function(i,j,k,l,m){j=parseInt(j,10);var n=!!j,o=i.reactorids?i.reactorids.slice(0):[],p=o.indexOf(k),q=0;if(n){if(p<0){o.unshift(k);q=1;}}else if(p>-1){o.splice(p,1);q=-1;}var r=Math.max(i.reactioncount+q,0),s=i.reactioncountreduced;if(s&&!isNaN(s))if(l){s=l(r,m);}else s=r.toString();var t=i.reactioncountmap||{},u,v=i.viewerreaction;if(v&&t[v]){t[v]['default']=Math.max((t[v]['default']||0)-1,0);u=t[v].reduced;if(u&&!isNaN(u))t[v].reduced=t[v]['default'].toString();}if(n&&t[j]){t[j]['default']=(t[j]['default']||0)+1;u=t[j].reduced;if(u&&!isNaN(u))t[j].reduced=t[j]['default'].toString();}var w=i.userreactions;if(!w||Array.isArray(w))w={};if(n){w[k]=j;}else delete w[k];var x=i.importantreactorids||[],y=x.indexOf(k);if(n&&y===-1){x.unshift(k);}else if(!n&&y!==-1)x.splice(y,1);var z=null;if(i.reactionsentences){var aa=!(v&&j);z={current:i.reactionsentences[aa?'alternate':'current'],alternate:i.reactionsentences[aa?'current':'alternate']};}return {importantreactorids:x,reactioncount:r,reactioncountmap:t,reactioncountreduced:s,reactionsentences:z,reactorids:o,userreactions:w,viewerreaction:j};},getReactionCountMapFromSummary:function(i){var j={};if(!i)return j;for(var k=0;k<i.length;k++){var l=i[k],m=l.feedback_reaction.key;j[m]={'default':l.reactors&&l.reactors.count,reduced:l.reactors&&l.reactors.display_count};}return j;}};f.exports=h;},null);
__d('UFICommentOrdering',['UFIConstants'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={inverted:function(i){switch(i){case c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY:case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:case c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};f.exports=h;},null);
__d('UFIPagedCommentList',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({actorID:true});function i(j){this.count=0;this.deletedComments={};this.deletedCount=0;this.dataSource=new (c('KeyedCallbackManager'))();this.feedbackTargetID=j;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink='';this.commentPermalinks={};c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(k){this.actorID=k.actorforpost;this.basePermalink=k.permalink;}.bind(this));}i.prototype.addOrUpdateComment=function(j){if(j.islocal){this.$UFIPagedCommentList1(j.id);}else this.$UFIPagedCommentList2(j.id,j.clientid,j.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.$UFIPagedCommentList1=function(j){this.dataSource.setResource(this.count,j);this.count++;};i.prototype.$UFIPagedCommentList2=function(j,k,l){var m=k&&c('ClientIDs').isExistingClientID(k),n=this.dataSource.getAllResources(),o={};for(var p in n){var q=n[p];o[q]=p;}if(m&&k in o){o[j]=o[k];var r=o[k];this.dataSource.setResource(r,j);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(k,Date.now());}else if(!o[j]&&k)this.$UFIPagedCommentList1(j);if(l&&j in o)this.commentPermalinks[j]=this.buildCommentPermalink(j,l,o[j]);};i.prototype.addCommentIDs=function(j,k,l){var m={};for(var n=0;n<k;n++)m[j+n]=l[n]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(m);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);return this;};i.prototype.getComments=function(j,k,l,m){var n=new Array(k).fill().map(function(t,u){return u+j;}),o=this.dataSource.getUnavailableResourcesFromRequest(n);if(o.length){var p=Math.min.apply(Math,o),q=Math.max.apply(Math,o),r=p,s=q-p+1;if(r<this.lastRequestedOffset||r+s>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=r;this.lastRequestedLength=s;this.fetchComments(r,s,l);}}else this.dataSource.executeOrEnqueue(n,function(t){return m(this.commentsFromCommentIDs(t,j,k));}.bind(this));};i.prototype.getCommentsOrThrow=function(j){var k=j.getLength(),l=j.getOffset(),m={};new Array(k).fill().forEach(function(n,o){var p=o+l,q=this.dataSource.getResource(p);if(!q)throw new Error('Tried to get nonexistent comment');m[p]=q;}.bind(this));return this.commentsFromCommentIDs(m,l,k);};i.prototype.fetchComments=function(j,k,l){};i.prototype.commentsFromCommentIDs=function(j,k,l){};i.prototype.reset=function(){var j=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return j;};i.prototype.deleteComment=function(j){if(!(j in this.deletedComments)){this.deletedComments[j]=true;this.deletedCount++;}};i.prototype.updateCommentCount=function(j){this.count=j;this.deletedCount=0;return this;};i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getCommentCount=function(){return this.count;};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getDisplayedCommentCount=function(){return this.count-this.deletedCount;};i.prototype.getBasePermalink=function(){return this.basePermalink;};i.prototype.buildCommentPermalink=function(j,k,l){};i.prototype.getPermalinkForComment=function(j){return this.commentPermalinks[j];};i.isValidContextPropertyForReset=function(j){return j in h;};f.exports=i;},null);
__d('UFIReplyCommentList',['ActorURI','getObjectValues','JSLogger','MercuryServerDispatcher','UFICentralUpdates','UFIPagedCommentList','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={},k=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(l,c('UFIPagedCommentList'));i=h&&h.prototype;l.getCommentList=function(n,o,p){if(!j[o])j[o]={};if(!j[o][p]){var q=new l(n,o,p),r=l.getReplyListsForParentCommentID(o);if(r.length)q.updateCommentCount(r[0].getCommentCount());j[o][p]=q;}return j[o][p];};l.getReplyListsForParentCommentID=function(n){return c('getObjectValues')(j[n]||{});};l.resetWithContext=function(n,o,p,q){var r=j[o][q];if(!r)return;r.reset();for(var s in p)if(this.isValidContextPropertyForReset(s))r[s]=p[s];};function l(n,o,p){i.constructor.call(this,n);this.parentCommentID=o;this.containerOrderingMode=p;}l.prototype.fetchComments=function(n,o,p){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:o,is_reply:true});var q={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[n],lengths:[o],feed_context:p?p.feedContext:null,numpagerclicks:p?p.numPagerClicks:null,containerorderingmode:this.containerOrderingMode,translate_all:p?p.translateAll:null};if(!p||!p.viewAs)q[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',q);};l.prototype.commentsFromCommentIDs=function(n,o,p){var q={};for(var r=0;r<p;r++){var s=c('UFIComments').getComment(n[o+r]);if(s)q[o+r]=s;}return q;};l.prototype.reset=function(){var n=i.reset.call(this),o={};for(var p in n){var q=n[p];o[q]=true;}c('UFIComments').resetComments(o);};l.prototype.getParentCommentID=function(){return this.parentCommentID;};l.prototype.buildCommentPermalink=function(n,o,p){if(!this.basePermalink)return null;var q=this.getParentCommentID().split("_"),r=o;if(q.length===2){r=q[1];}else k.error("Bad reply comment ID: "+this.getParentCommentID());return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:r,reply_comment_id:o}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function m(n){var o=c('UFIComments').getComment(n.commentid),p=o.id,q=o.parentcommentid;if(!q)return;if(o.status!==c('UFIConstants').UFIStatus.DELETED&&o.status!==c('UFIConstants').UFIStatus.FAILED_ADD)l.getReplyListsForParentCommentID(q).forEach(function(r){r.deleteComment(p);});}c('UFICentralUpdates').subscribe('update-actions',function(n,o){if(o.actions&&o.actions.length)for(var p=0;p<o.actions.length;p++){var q=o.actions[p];switch(q.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:m(q);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(n,o){var p=o.commentlists;if(p&&p.replies&&Object.keys(p).length)for(var q in p.replies){var r=p.replies[q],s=r.ftentidentifier,t=r.containerorderingmode;l.getCommentList(s,q,t).addCommentIDs(r.range.offset,r.range.length,r.values).updateCommentCount(r.count);}});c('UFICentralUpdates').subscribe('update-comments',function(n,o){if(o.comments&&o.comments.length)o.comments.forEach(function(p){var q=p.parentcommentid;if(!q)return;l.getReplyListsForParentCommentID(q).forEach(function(r){r.addOrUpdateComment(p);});});});f.exports=l;},6);
__d('UFIRange',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){this.offset=i||0;this.length=j||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;return this;};h.prototype.isLoadingNext=function(){var i=this.requestedOffset+this.requestedLength,j=this.offset+this.length;return i>j;};h.prototype.isLoadingPrev=function(){return this.requestedOffset<this.offset;};h.combine=function(i,j){if(!j)return i;var k=Math.min(i.getOffset(),j.getOffset()),l=Math.max(i.getLength(),j.getLength()),m=new h(k,l);if(j.getRequestedLength()>0){var n=Math.min(k,j.getRequestedOffset()),o=Math.max(k+l,j.getRequestedOffset()+j.getRequestedLength());m.updateRequestedRange(n,o-n);}return m;};f.exports=h;},null);
__d('UFIToplevelStreamedCommentList',['invariant','ClientIDs','Map','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIComments','UFIConstants','UFIRange'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j){this.feedbackTargetID=j;this.commentIDs=[];this.deletedCount=0;this.totalCommentCount=0;}i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getClientHasAll=function(){return false;};i.prototype.getActualCommentCount=function(){return this.commentIDs.length;};i.prototype.getCommentCount=function(){return this.totalCommentCount;};i.prototype.getDisplayedCommentCount=function(){return this.getCommentCount()-this.getDeletedCount();};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getPermalinkForComment=function(j){return '';};i.prototype.getComments=function(j,k,l,m){m(this.getCommentsOrThrow(new (c('UFIRange'))(j,k),l));};i.prototype.getCommentsOrThrow=function(j,k){var l=j.getLength(),m=j.getOffset();!(m===0)?h(0):void 0;var n=k.streamingOrderReversed,o={};for(var p=0;p<Math.min(l,this.commentIDs.length);++p){var q=n?this.commentIDs.length-1-p:p,r=c('UFIComments').getComment(this.commentIDs[q]);if(r)o[p]=r;}return o;};i.prototype.$UFIToplevelStreamedCommentList3=function(){var j=this.commentIDs;this.commentIDs=[];return j;};i.prototype.hasComment=function(j){for(var k=0;k<this.commentIDs.length;++k)if(this.commentIDs[k]===j.id)return true;return false;};i.prototype.addOrUpdateComment=function(j,k){var l=j.clientid;if(l&&c('ClientIDs').isExistingClientID(l)){for(var m=0;m<this.commentIDs.length;++m)if(this.commentIDs[m]===l){this.commentIDs[m]=j.id;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(l,Date.now());}}else if(k||j.islocal){if(this.hasComment(j))return;this.commentIDs.push(j.id);this.totalCommentCount+=1;}if(this.commentIDs.length>50)this.commentIDs.shift();c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.deleteComment=function(j){var k=[];for(var l=0;l<this.commentIDs.length;++l){var m=this.commentIDs[l];if(m===j){this.deletedCount+=1;}else k.push(m);}this.commentIDs=k;};i.prototype.updateCommentCount=function(j){this.totalCommentCount=j;};i.getCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l){l=new (c('Map'))();i.$UFIToplevelStreamedCommentList1.set(j,l);}var m=l.get(k);if(!m){m=new i(j);l.set(k,m);}return m;};i.getExistingCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.$UFIToplevelStreamedCommentList1.get(j);if(!l)return null;return l.get(k);};i.getAllExistingCommentLists=function(j){var k=i.$UFIToplevelStreamedCommentList1.get(j);if(!k)return [];return Array.from(k.values());};i.$UFIToplevelStreamedCommentList4=function(j,k){var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){k.forEach(function(n){l[n]=true;});return;}var m={};k.forEach(function(n){m[n]=true;});i.$UFIToplevelStreamedCommentList2.set(j,m);};i.resetCommentList=function(j){var k=arguments.length<=1||arguments[1]===undefined?i.GLOBAL_ID:arguments[1],l=i.getExistingCommentList(j,k);if(!l)return;i.$UFIToplevelStreamedCommentList4(j,l.$UFIToplevelStreamedCommentList3());};i.resetAllCommentLists=function(j){var k=i.getAllExistingCommentLists(j);if(k.length===0)return;k.forEach(function(m){i.$UFIToplevelStreamedCommentList4(j,m.$UFIToplevelStreamedCommentList3());});var l=i.$UFIToplevelStreamedCommentList2.get(j);if(l){i.$UFIToplevelStreamedCommentList2['delete'](j);c('UFIComments').resetComments(l);}};i.GLOBAL_ID='GLOBAL_ID';i.$UFIToplevelStreamedCommentList1=new (c('Map'))();i.$UFIToplevelStreamedCommentList2=new (c('Map'))();c('UFICentralUpdates').subscribe('update-actions',function(j,k){if(!k.actions)return;k.actions.forEach(function(l){if(l.actiontype!==c('UFIConstants').UFIActionType.DELETE_COMMENT)return;var m=c('UFIComments').getComment(l.commentid),n=m.id,o=m.ftentidentifier,p=m.parentcommentid;if(p)return;if(l.islocal||m.status!==c('UFIConstants').UFIStatus.DELETED&&m.status!==c('UFIConstants').UFIStatus.FAILED_ADD)i.getCommentList(o).deleteComment(n);});});c('UFICentralUpdates').subscribe('update-comments',function(j,k){if(!k.comments)return;var l=k.targetufiinstanceid;k.comments.forEach(function(m){if(m.parentcommentid)return;if(l){i.getCommentList(m.ftentidentifier,l).addOrUpdateComment(m,!!k.isstreaming);}else i.getAllExistingCommentLists(m.ftentidentifier).forEach(function(n){n.addOrUpdateComment(m,!!k.isstreaming);});});});f.exports=i;},6);
__d('UFIToplevelPagedCommentList',['ActorURI','MercuryServerDispatcher','UFICentralUpdates','UFIPagedCommentList','UFICommentLogger','UFICommentOrdering','UFIComments','UFIConfig','UFIConstants','UFIReplyCommentList','UFIToplevelStreamedCommentList','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={};h=babelHelpers.inherits(k,c('UFIPagedCommentList'));i=h&&h.prototype;k.getCommentList=function(m,n){if(!j[m])j[m]={};if(!j[m][n]){var o=new k(m,n),p=k.getCommentListsForFeedbackTargetID(m);if(p.length)o.updateCommentCount(p[0].getCommentCount());j[m][n]=o;}return j[m][n];};k.getCommentListsForFeedbackTargetID=function(m){var n=[],o=j[m]||{};for(var p in o)n.push(o[p]);return n;};k.getDisplayedCommentCountForFeedbackTargetID_UNSAFE=function(m){var n=k.getCommentListsForFeedbackTargetID(m),o=n.length?n[0].getDisplayedCommentCount():null,p=c('UFIToplevelStreamedCommentList').getAllExistingCommentLists(m),q=p.length?p[0].getDisplayedCommentCount():null;if(o===null&&q===null)return null;return Math.max(o,q);};k.resetCommentListsForFeedbackTargetID=function(m){if(!j[m])return;var n={};for(var o in j[m]){var p=j[m][o],q=p.reset();for(var r in q){var s=q[r];n[s]=true;}}c('UFIComments').resetComments(n);};k.resetCommentListsWithContext=function(m,n){if(!j[m])return;var o={};for(var p in j[m]){var q=j[m][p];for(var r in n)if(this.isValidContextPropertyForReset(r))q[r]=n[r];var s=q.reset();for(var t in s){var u=s[t];o[u]=true;c('UFIReplyCommentList').resetWithContext(m,u,n,p);}}c('UFIComments').resetComments(o);};function k(m,n){i.constructor.call(this,m);this.orderReversed=false;if(c('UFICommentOrdering').inverted(n))this.orderReversed=true;this.orderingMode=n;this.clientHasAll=false;}k.prototype.fetchComments=function(m,n,o){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:n,is_reply:false});var p={ft_ent_identifier:this.feedbackTargetID,viewas:o&&o.viewAs?o.viewAs+'':null,source:o&&o.feedbackSource,offset:m,length:n,orderingmode:this.orderingMode,feed_context:o?o.feedContext:null,numpagerclicks:o?o.numPagerClicks:null,translate_all:o?o.translateAll:null};switch(this.orderingMode){case c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY:case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:p.clientcommentcount=this.count;}if(!o||!o.viewAs)p[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',p);};k.prototype.commentsFromCommentIDs=function(m,n,o){var p={},q=n,r=n+o-1;for(var s=0;s<o;s++){var t=this.orderReversed?r-s:q+s,u=c('UFIComments').getComment(m[t]);if(u)p[n+s]=u;}return p;};k.prototype.getOrderingMode=function(){return this.orderingMode;};k.prototype.setClientHasAll=function(m){this.clientHasAll=m;return this;};k.prototype.getClientHasAll=function(){return this.clientHasAll;};k.prototype.buildCommentPermalink=function(m,n,o){if(!this.basePermalink)return null;return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:n}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function l(m){var n=c('UFIComments').getComment(m.commentid),o=n.id,p=n.ftentidentifier,q=n.parentcommentid;if(q)return;if(m.islocal||n.status!==c('UFIConstants').UFIStatus.DELETED&&n.status!==c('UFIConstants').UFIStatus.FAILED_ADD)k.getCommentListsForFeedbackTargetID(p).forEach(function(r){r.deleteComment(o);});}c('UFICentralUpdates').subscribe('update-actions',function(m,n){if(n.actions&&n.actions.length)for(var o=0;o<n.actions.length;o++){var p=n.actions[o];switch(p.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:l(p);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(m,n){var o=n.commentlists;if(o&&o.comments&&Object.keys(o).length)for(var p in o.comments)for(var q in o.comments[p]){var r=o.comments[p][q],s=k.getCommentList(p,q).addCommentIDs(r.range.offset,r.range.length,r.values);s.setClientHasAll(!!r.forcenotpageable);}});c('UFICentralUpdates').subscribe('update-comments',function(m,n){if(n.comments&&n.comments.length)n.comments.forEach(function(o){if(o.parentcommentid)return;var p=o.ftentidentifier;k.getCommentListsForFeedbackTargetID(p).forEach(function(q){q.addOrUpdateComment(o);});});});c('UFICentralUpdates').subscribe('update-feedback',function(m,n){if(n.feedbacktargets&&n.feedbacktargets.length)n.feedbacktargets.forEach(function(o){var p=o.entidentifier,q=o.defaultcommentorderingmode,r={};if(q)r[q]=true;if(o.orderingmodes)o.orderingmodes.forEach(function(t){if(t.value===c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING)return;r[t.value]=true;});for(var s in r)k.getCommentList(p,s).updateCommentCount(o.commentcount);});});f.exports=k;},6);
__d("XConstituencyTitleEditVisibilityDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/constituency_title\/edit_comment_visibility\/",{ft_id:{type:"FBID",required:true},action_type:{type:"Enum",required:true,enumType:1},source:{type:"Enum",required:true,enumType:1},comment_id:{type:"String"},__asyncDialog:{type:"Int"}});},null);
__d("XConstituencyTitleEnableController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/constituency_title\/enable\/",{});},null);
__d("XUFIActorChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/actor\/change\/",{});},null);
__d("XUFIAddCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/add\/comment\/",{});},null);
__d("XUFICommentLikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/like\/",{});},null);
__d("XUFICommentReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}});},null);
__d("XUFIDeleteCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});},null);
__d("XUFIEditCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});},null);
__d("XUFIHideCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});},null);
__d("XUFILikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/like\/",{});},null);
__d("XUFIReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},feedback_source:{type:"Int"},feedback_referrer:{type:"String"},basic_origin_uri:{type:"String"},basic_reload:{type:"Exists",defaultValue:false},on_demand_content_time_offset:{type:"Int"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}});},null);
__d("XUFITranslateCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});},null);
__d("XUFITypingIndicatorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},parent_comment_id:{type:"String"},update:{type:"Enum",required:true,enumType:1}});},null);
__d('UFIUserActions',['errorCode','fbt','ActorURI','AsyncRequest','AsyncResponse','requireWeak','ChannelClientID','ClientIDs','ImmutableObject','LtgTranslateAllDispatcher','Nectar','NumberFormat','UFIActionTypes','UFICentralUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFIComments','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionsUtils','UFIVideoPlayerRegistry','MercuryServerDispatcher','XAsyncRequest','XConstituencyTitleEditVisibilityDialogController','XConstituencyTitleEnableController','XUFIActorChangeController','XUFIAddCommentController','XUFICommentLikeController','XUFICommentReactionController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFIReactionController','XUFITranslateCommentController','XUFITypingIndicatorController','XStickerAssetController','collectDataAttributes','emptyFunction','ifRequired','UnicodeBidi'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j;c('requireWeak')('StickerAssetType',function(ma){j=ma;});var k={BAN:'ban',UNDO_BAN:'undo_ban'},l={changeActor:function(ma,na){c('UFIFeedbackTargets').getFeedbackTarget(ma,function(oa){c('UFIToplevelPagedCommentList').resetCommentListsWithContext(ma,{actorID:na});c('UFIToplevelStreamedCommentList').resetAllCommentLists(ma);c('UFICentralUpdates').inform('actor-changed',{actorID:na});var pa={from_actor_id:oa.actorforpost,ft_ent_identifier:ma};pa[c('ActorURI').PARAMETER_ACTOR]=na;var qa=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(qa,pa);});},changeCommentLike:function(ma,na,oa){var pa=c('UFIComments').getComment(ma);if(pa.hasviewerliked!=na){var qa=m(oa.target),ra=na?1:-1,sa={commentid:ma,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:na,likecount:(pa.likecount||0)+ra};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});c('UFIFeedbackTargets').getFeedbackTarget(pa.ftentidentifier,function(ta){var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ta.actorforpost;var va=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,babelHelpers['extends']({comment_id:ma,legacy_id:pa.legacyid,like_action:na,ft_ent_identifier:pa.ftentidentifier,source:oa.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},qa,ua));});}},changeCommentReaction:function(ma,na,oa){var pa=c('UFIComments').getComment(ma);if(pa.viewerreaction!=na)c('UFIFeedbackTargets').getFeedbackTarget(pa.ftentidentifier,function(qa){var ra=m(oa.target),sa=parseInt(na,10)!==0,ta=[la(pa,na,ma,qa.supportedreactions,qa.actorforpost)];if(qa.hasviewerliked!==sa){var ua=sa?1:-1;ta.push({commentid:ma,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:sa,likecount:(pa.likecount||0)+ua});}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:ta});var va={};va[c('ActorURI').PARAMETER_ACTOR]=qa.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:ma,legacy_id:pa.legacyid,reaction_type:na,ft_ent_identifier:pa.ftentidentifier,source:oa.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ra,va));});},_getAttachment:function(ma){if(!c('UFIConfig').optimisticStickers||!ma||!ma.fbid)return ma;var na=void 0;c('ifRequired')('StickerImages',function(qa){return na=qa;},c('emptyFunction'));var oa=na?na.getSticker(ma.fbid):null;if(!oa)return ma;var pa=c('XStickerAssetController').getURIBuilder().setInt('sticker_id',ma.fbid);pa=pa.setEnum('image_type',j&&j.IMAGE).getURI().toString();return {type:'sticker',metadata:{frameCount:oa.frameCount,framesPerCol:oa.framesPerCol,framesPerRow:oa.framesPerRow,height:oa.height,source_uri:pa,sprite_uri:oa.spriteURI,source_uri_2x:pa,sprite_uri_2x:oa.spriteURI2x||oa.spriteURI,width:oa.width}};},_getLocalComment:function(ma,na,oa,pa,qa){var ra=c('ClientIDs').getNewClientID(),sa=c('UnicodeBidi').isDirectionLTR(oa)?'ltr':'rtl',ta=this._getAttachment(qa.attachedsticker);return {ftentidentifier:na,body:{text:oa,dir:sa},author:ma.actorforpost,id:ra,islocal:true,ufiinstanceid:qa.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:qa.replyid,replycommentparentid:qa.replycommentparentid,attachment:ta,photo_comment:qa.attachedphoto,video_comment:qa.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}};},addComment:function(ma,na,oa,pa){c('UFIFeedbackTargets').getFeedbackTarget(ma,function(qa){var ra=this.createComment(ma,na,oa,pa);if(!ra)return;var sa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:qa.actorforpost,hasviewersubscribed:true,entidentifier:qa.entidentifier},ta={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:qa.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ra],actions:[sa,ta]});}.bind(this));},createComment:function(ma,na,oa,pa){var qa=c('UFIFeedbackTargets').getFeedbackTargetIfExists(ma);if(!qa.actorforpost)return null;var ra=this._getLocalComment(qa,ma,na,oa,pa);this._sendCommentToServer(ma,qa.actorforpost,na,oa,pa,ra.id);return ra;},_sendCommentToServer:function(ma,na,oa,pa,qa,ra){var sa=null;if(qa.reply_fbid){sa=qa.reply_fbid;}else if(qa.replyid)sa=c('UFIComments').getComment(qa.replyid).fbid;var ta;if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(ra,qa.timestamp,{has_photo:!!qa.attachedphoto,has_video:!!qa.attachedvideo,has_sticker:!!qa.attachedsticker,is_reply:!!qa.replyid});var ua=null;if(qa.fluentContentToken&&qa.isLiveVOD)ua=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(qa.target,qa.fluentContentToken);var va={};va[c('ActorURI').PARAMETER_ACTOR]=na;var wa=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,babelHelpers['extends']({ft_ent_identifier:ma,comment_text:pa,source:qa.source,client_id:ra,session_id:c('ChannelClientID').getID(),reply_fbid:sa,parent_comment_id:qa.parent_comment_id||qa.replyid,reply_comment_parent_id:qa.replycommentparentid,rootid:qa.rootid,clp:ta,attached_sticker_fbid:qa.attachedsticker?qa.attachedsticker.fbid:0,attached_photo_fbid:qa.attachedphoto?qa.attachedphoto.fbid:0,attached_video_fbid:qa.attachedvideo?qa.attachedvideo.fbid:0,feedback_referrer:qa.feedbackReferrer,feed_context:qa.feedcontext,video_time_offset:ua,is_live_streaming:qa.islivestreaming,is_markdown:qa.isMarkdown},m(qa.target),va,{photo_text_tag_id:qa.photoTextTagID,is_private:qa.isPrivate,is_photo_tag:qa.isPhotoTag,photo_fbid:qa.photoFBID,photo_tag_x:qa.photoTagX,photo_tag_y:qa.photoTagY}));},_hasCommentTextChanged:function(ma,na){return ma.body&&ma.body.text!=na;},_hasCommentPhotoChanged:function(ma,na){return (ma||na)&&!(ma&&na)||ma&&na&&ma.fbid!=na.fbid;},_hasCommentVideoChanged:function(ma,na){return (ma||na)&&!(ma&&na)||ma&&na&&ma.fbid!=na.fbid;},_hasCommentStickerChanged:function(ma,na){return (ma||na)&&!(ma&&na)||ma&&ma.type=="sticker"&&na&&ma.fbid!=na.fbid;},editComment:function(ma,na,oa,pa){var qa=m(pa.target),ra=c('UFIComments').getComment(ma),sa=this._hasCommentTextChanged(ra,na)||this._hasCommentPhotoChanged(ra.photo_comment,pa.attachedPhoto)||this._hasCommentStickerChanged(ra.attachment,pa.attachedSticker)||this._hasCommentVideoChanged(ra.video_comment,pa.attachedVideo);ra=c('ImmutableObject').set(ra,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:na},editnux:null,attachment:pa.attachedSticker,photo_comment:pa.attachedPhoto,video_comment:pa.attachedVideo});if(sa)ra=c('ImmutableObject').set(ra,{originalTimestamp:ra.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ra]});c('UFIFeedbackTargets').getFeedbackTarget(ra.ftentidentifier,function(ta){var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ta.actorforpost;var va=c('XUFIEditCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,babelHelpers['extends']({ft_ent_identifier:ra.ftentidentifier,comment_text:oa,source:pa.source,comment_id:ra.id,parent_comment_id:ra.parentcommentid,attached_sticker_fbid:pa.attachedSticker?pa.attachedSticker.fbid:0,attached_photo_fbid:pa.attachedPhoto?pa.attachedPhoto.fbid:0,attached_video_fbid:pa.attachedVideo?pa.attachedVideo.fbid:0},qa,ua));});},translateComment:function(ma,na,oa){var pa=c('XUFITranslateCommentController').getURIBuilder().getURI();if(oa){new (c('XAsyncRequest'))(pa).setData({ft_ent_identifier:ma.ftentidentifier,comment_ids:[ma.id],source:na.source,translate_all:false}).setHandler(oa).setErrorHandler(oa).send();}else c('MercuryServerDispatcher').trySend(pa,{ft_ent_identifier:ma.ftentidentifier,comment_ids:[ma.id],source:na.source,translate_all:false});},translateCommentArray:function(ma,na){var oa=ma.map(function(ra){return ra.id;}),pa=ma.map(function(ra){return ra.ftentidentifier;}),qa=c('XUFITranslateCommentController').getURIBuilder().getURI();new (c('XAsyncRequest'))(qa).setData({ft_ent_identifier:pa[0],comment_ids:oa,translate_all:true}).setHandler(function(ra){c('LtgTranslateAllDispatcher').dispatch({type:c('UFIActionTypes').TRANSLATION.TRANSLATE_ALL_COMPLETE,response:ra,id:na});}).setErrorHandler(function(ra){c('LtgTranslateAllDispatcher').dispatch({type:c('UFIActionTypes').TRANSLATION.TRANSLATE_ALL_COMPLETE,response:ra,id:na});}).send();},setHideAsSpam:function(ma,na,oa){var pa=m(oa.target),qa=c('UFIComments').getComment(ma),ra={commentid:ma,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:na};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});c('UFIFeedbackTargets').getFeedbackTarget(qa.ftentidentifier,function(sa){var ta={};ta[c('ActorURI').PARAMETER_ACTOR]=sa.actorforpost;var ua=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ua,babelHelpers['extends']({comment_id:ma,spam_action:na,ft_ent_identifier:qa.ftentidentifier,source:oa.source},pa,ta));});},removeComment:function(ma,na){var oa=m(na.target),pa=c('UFIComments').getComment(ma),qa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:ma,islocal:true,oneclick:na.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[qa]});c('UFIFeedbackTargets').getFeedbackTarget(pa.ftentidentifier,function(ra){var sa={};sa[c('ActorURI').PARAMETER_ACTOR]=ra.actorforpost;var ta=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(ta,babelHelpers['extends']({comment_id:pa.id,comment_legacyid:pa.legacyid,ft_ent_identifier:pa.ftentidentifier,one_click:na.oneclick,source:na.source,client_id:c('ClientIDs').getNewClientID()},oa,sa));});},banUser:function(ma,na,oa,pa){var qa=oa?k.BAN:k.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:na,commenter_id:ma.author,action:qa,comment_id:ma.id,client_side:true});},changeReaction:function(ma,na,oa){c('UFIFeedbackTargets').getFeedbackTarget(ma,function(pa){var qa=[ka(pa,na)],ra=parseInt(na,10)!==0;if(pa.hasviewerliked!==ra){var sa=ra?1:-1;qa.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:pa.actorforpost,hasviewerliked:ra,likecount:(pa.likecount||0)+sa,entidentifier:ma,likesentences:{current:pa.likesentences.alternate,alternate:pa.likesentences.current}});}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:qa});var ta=m(oa.target),ua={};ua[c('ActorURI').PARAMETER_ACTOR]=pa.actorforpost;var va=null;if(oa.fluentContentToken&&oa.isLiveVOD)va=c('UFIVideoPlayerRegistry').getAvailableVideoPlayerControllerTimeForElement(oa.target,oa.fluentContentToken);c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:ma,reaction_type:na,root_id:oa.rootid,session_id:c('ChannelClientID').getID(),source:oa.source,feedback_referrer:oa.feedbackReferrer,is_live:oa.islivestreaming,on_demand_content_time_offset:va},ua,ta));});},changeSubscribe:function(ma,na,oa){c('UFIFeedbackTargets').getFeedbackTarget(ma,function(pa){var qa=m(oa.target);if(pa.hasviewersubscribed!==na){var ra={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:pa.actorforpost,hasviewersubscribed:na,entidentifier:ma};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});var sa={};sa[c('ActorURI').PARAMETER_ACTOR]=pa.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:na,ft_ent_identifier:ma,source:oa.source,client_id:c('ClientIDs').getNewClientID(),rootid:oa.rootid,comment_expand_mode:oa.commentexpandmode},qa,sa));}});},fetchSpamComments:function(ma,na,oa,pa){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:ma,viewas:pa,comment_ids:na,parent_comment_id:oa,source:null});},hideConstituentTitle:function(ma){var na=c('XConstituencyTitleEnableController').getURIBuilder().getURI();new (c('AsyncRequest'))(na).setMethod('POST').setData({ft_id:ma.ftentidentifier,enable:false,source:'comment_edit_menu',comment_id:ma.id}).send();},showConstituentTitle:function(ma){var na=c('XConstituencyTitleEditVisibilityDialogController').getURIBuilder().setFBID('ft_id',ma.ftentidentifier).setEnum('action_type','comment_show_constituent_title').setEnum('source','comment_edit_menu').setString('comment_id',ma.id).getURI();new (c('AsyncRequest'))(na).send();},removePreview:function(ma,na){var oa=m(na.target),pa={commentid:ma.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[pa]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:ma.id,ft_ent_identifier:ma.ftentidentifier,source:na.source},oa));},typingChange:function(ma,na){new (c('AsyncRequest'))(c('XUFITypingIndicatorController').getURIBuilder().setString('feedback_id',ma).setEnum('update',na?'start':'stop').getURI()).send();}};function m(ma){if(!ma)return {ft:{}};var na={ft:c('collectDataAttributes')(ma,['ft']).ft};c('Nectar').addModuleData(na,ma);return na;}function n(ma){c('AsyncResponse').defaultErrorHandler(ma);}function o(ma){var na=ma.request.data;c('AsyncResponse').defaultErrorHandler(ma);var oa=na.client_id||na.comment_id,pa=c('UFIComments').getComment(oa),qa=pa.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;pa=c('ImmutableObject').setDeep(pa,{status:qa,allowRetry:p(ma),body:{mentionstext:na.comment_text,mentionsphoto:pa.photo_comment,mentionsvideo:pa.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[pa]});}function p(ma){var na=ma.getError();if(ma.isBlockedAction())return false;if(ma.silentError)return true;if(na===1357012||na===1357006)return false;return true;}function q(ma){var na=ma.request.data,oa=na.comment_id,pa=c('UFIComments').getComment(oa);pa=c('ImmutableObject').set(pa,{status:pa.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[pa]});}function r(ma){var na=ma.request.data,oa=na.comment_id,pa=c('UFIComments').getComment(oa);if(na.like_action===pa.hasviewerliked){var qa=pa.hasviewerliked?-1:1,ra={commentid:oa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!pa.hasviewerliked,likecount:(pa.likecount||0)+qa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}c('AsyncResponse').defaultErrorHandler(ma);}function s(ma){c('AsyncResponse').defaultErrorHandler(ma);}function t(ma){var na=ma.request.data,oa=na.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(oa,function(pa){if(pa.hasviewerliked===na.like_action){var qa=pa.hasviewerliked?-1:1,ra={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:pa.actorforpost,hasviewerliked:!pa.hasviewerliked,likecount:(pa.likecount||0)+qa,entidentifier:oa,likesentences:{current:pa.likesentences.alternate,alternate:pa.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});}});c('AsyncResponse').defaultErrorHandler(ma);}function u(ma){var na=ma.request.data,oa=na.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(oa,function(pa){if(pa.hasviewersubscribed===na.subscribe_action){var qa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:pa.actorforpost,hasviewersubscribed:!pa.hasviewersubscribed,entidentifier:oa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[qa]});}});c('AsyncResponse').defaultErrorHandler(ma);}var v={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:n},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:u,batch_if:ia,batch_function:ja},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},w=c('XUFIAddCommentController').getURIBuilder().getURI();v[w]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var x=c('XUFIDeleteCommentController').getURIBuilder().getURI();v[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var y=c('XUFICommentLikeController').getURIBuilder().getURI();v[y]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:r,batch_if:ga,batch_function:ja};var z=c('XUFICommentReactionController').getURIBuilder().getURI();v[z]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:s,batch_if:ga,batch_function:ja};var aa=c('XUFIHideCommentController').getURIBuilder().getURI();v[aa]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:q};var ba=c('XUFILikeController').getURIBuilder().getURI();v[ba]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:t,batch_if:ha,batch_function:ja};var ca=c('XUFIEditCommentController').getURIBuilder().getURI();v[ca]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o};var da=c('XUFITranslateCommentController').getURIBuilder().getURI();v[da]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ea=c('XUFIActorChangeController').getURIBuilder().getURI();v[ea]={mode:c('MercuryServerDispatcher').IMMEDIATE};var fa=c('XUFIReactionController').getURIBuilder().getURI();v[fa]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(v);function ga(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier&&ma.comment_id==na.comment_id;}function ha(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier;}function ia(ma,na){return ma&&ma.ft_ent_identifier==na.ft_ent_identifier;}function ja(ma,na){return na;}function ka(ma,na){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:ma.actorforpost,entidentifier:ma.entidentifier},c('UFIReactionsUtils').getReactionData(ma,na,ma.actorforpost,c('NumberFormat').formatIntegerWithDelimiter,c('UFIConfig').numberDelimiter));}function la(ma,na,oa,pa,qa){var ra={};for(var sa=0;sa<pa.length;sa++){var ta=pa[sa],ua=ma.reactioncountmap[ta];ra[ta]={'default':ua?ua['default']:0,reduced:ua?ua.reduced:'0'};}var va=c('UFIReactionsUtils').getReactionData({viewerreaction:ma.viewerreaction,reactioncount:ma.reactioncount,reactioncountreduced:ma.reactioncountreduced,reactioncountmap:ra,reactorids:ma.viewerreaction?[qa]:[]},na,qa);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:oa,hasviewerliked:!!na,likecount:va.reactioncountmap[1]['default'],reactioncount:va.reactioncount,reactioncountmap:va.reactioncountmap,reactioncountreduced:va.reactioncountreduced,viewerreaction:na};}f.exports=l;},null);
__d('UFINewCommentNotifier',['Arbiter','UFIFeedbackTargets','UFIUserActions','UFIUIEvents'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={onNewComment:function(i,j,k,l,m,n){c('UFIUserActions').addComment(j.ftentidentifier,k.visibleValue,k.encodedValue,{source:j.source,ufiinstanceid:j.instanceid,target:l,replyid:m,rootid:j.rootid,attachedphoto:k.attachedPhoto,attachedvideo:k.attachedVideo,attachedsticker:k.attachedSticker,feedcontext:j.feedcontext,timestamp:n,feedbackReferrer:j.feedbackReferrer,isMarkdown:k.isMarkdown,fluentContentToken:j.fluentContentToken,isLiveVOD:j.isLiveVOD,islivestreaming:j.islivestreaming,photoTextTagID:j.photoTextTagID,isPrivate:k.isPrivate,isPhotoTag:j.isPhotoTag,photoFBID:j.photoFBID,photoTagX:j.photoTagX,photoTagY:j.photoTagY});c('UFIFeedbackTargets').getFeedbackTarget(j.ftentidentifier,function(o){if(i)c('Arbiter').inform(c('UFIUIEvents').Comment,{ft_id:o.entidentifier,target:l,form:i,isinverted:o.isranked||j.islivestreaming});});}};f.exports=h;},null);
__d('UFIStoryAction',['UFIActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UFIActionTypes').STORY,i={commentsArrived:function(j,k,l){return {type:h.COMMENTS_ARRIVED,newOffset:j,newLength:k,source:l};},pageInComments:function(j,k,l){return {type:h.PAGE_IN_COMMENTS,commentID:j,direction:k,nextRange:l};},showReplies:function(j,k){return {type:h.SHOW_REPLIES,commentID:j,initiatorComment:k};},spamFetched:function(j,k,l,m){return {type:h.SPAM_FETCHED,ftentidentifier:j,viewas:k,commentIDs:l,parentCommentID:m};},changeReaction:function(j,k,l){return {type:h.CHANGE_REACTION,contextArgs:j,reactionType:k,target:l};},toggleReplies:function(j){return {type:h.TOGGLE_REPLIES,commentID:j};},friendTyping:function(j){return {type:h.FRIEND_TYPING,ftentidentifier:j};},someoneTyping:function(j){return {type:h.SOMEONE_TYPING,ftentidentifier:j};},typingStopped:function(j){return {type:h.TYPING_STOPPED,ftentidentifier:j};}};f.exports=i;},null);
__d('CommercialBreakUFIOverlay.react',['cx','fbt','React'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_29y7"},i._("Ad break now in progress")));};function l(){'use strict';j.apply(this,arguments);}f.exports=l;},null);
__d('LtgTranslateAllStore',['FluxReduceStore','LtgTranslateAllDispatcher','Map','TranslateAllState','UFIActionTypes','UFIUserActions'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('LtgTranslateAllDispatcher'));this.$LtgTranslateAllStore1=new (c('Map'))();this.$LtgTranslateAllStore2=new (c('Map'))();}j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIActionTypes').COMMENT.TRANSLATE_ARRAY:this.$LtgTranslateAllStore3(l);return this.getTranslateAllStateForID(l.id);case c('UFIActionTypes').TRANSLATION.TRANSLATE_ALL_COMPLETE:this.$LtgTranslateAllStore4(l);return this.getTranslateAllStateForID(l.id);case c('UFIActionTypes').TRANSLATION.HAS_TRANSLATABLE_CONTENT:this.$LtgTranslateAllStore5(l);return this.getTranslateAllStateForID(l.id);default:break;}return k;};j.prototype.getTranslateAllStateForID=function(k){var l=this.$LtgTranslateAllStore1.get(k);return l?l:{translateAll:c('TranslateAllState').INITIAL};};j.prototype.getTranslateAllEnabledForID=function(k){var l=this.getTranslateAllStateForID(k);return l.translateAll===c('TranslateAllState').LOADING||l.translateAll===c('TranslateAllState').COMPLETE;};j.prototype.getHasTranslatableContent=function(k){return this.$LtgTranslateAllStore2.get(k)!==null;};j.prototype.$LtgTranslateAllStore3=function(k){c('UFIUserActions').translateCommentArray(k.commentArray,k.id);this.$LtgTranslateAllStore1=this.$LtgTranslateAllStore1.set(k.id,{translateAll:c('TranslateAllState').LOADING});};j.prototype.$LtgTranslateAllStore4=function(k){this.$LtgTranslateAllStore1=this.$LtgTranslateAllStore1.set(k.id,{translateAll:c('TranslateAllState').COMPLETE});};j.prototype.$LtgTranslateAllStore5=function(k){this.$LtgTranslateAllStore2=this.$LtgTranslateAllStore2.set(k.id,true);};f.exports=new j(c('LtgTranslateAllDispatcher'));},null);
__d('FbFeedCommentUFIScroller',['DOMScroll','containsNode','ge'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={reveal:function(i){if(i){var j=c('ge')('content');if(j&&c('containsNode')(j,i))c('DOMScroll').ensureVisible(i,null,60,250);}}};f.exports=h;},null);
__d('ClipboardPhotoUploader',['ArbiterMixin','AsyncRequest','mixin'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.uploadURIString=k;this.data=l;}j.prototype.handlePaste=function(event){'use strict';var k=j.getImages(event);for(var l=0;l<k.length;++l){var m=new FormData();m.append('pasted_file',k[l]);var n=new (c('AsyncRequest'))();n.setURI(this.uploadURIString).setData(this.data).setRawData(m).setHandler(function(o){this.inform('upload_success',o);}.bind(this)).setErrorHandler(function(o){this.inform('upload_error',o);}.bind(this)).setAbortHandler(function(o){this.inform('upload_error',o);}.bind(this));this.inform('upload_start');n.send();break;}};j.getImages=function(event){'use strict';if(!event.clipboardData)return [];var k=event.clipboardData.items;if(!k)return [];var l,m=[];for(var n=0;n<k.length;++n){l=k[n];if(l.kind==='string')return [];if(l.kind==='file'&&l.type.indexOf('image/')!==-1)m.push(l.getAsFile());if(l.kind==='blob')m.push(l.blob);}return m;};f.exports=j;},null);
__d("MentionsInputUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={generateDataFromTextWithEntities:function(i){var j=i.text,k=[];(i.ranges||[]).forEach(function(m){var n=m.entity;if(!n.external&&!m.videoTimestamp)k.push({uid:n.id,text:j.substr(m.offset,m.length),offset:m.offset,length:m.length,weakreference:!!n.weakreference});});var l={value:j,mentions:k};return l;}};f.exports=h;},null);
__d('UFIActorIconContainer.react',['cx','Image.react','React','ShortProfiles','UFIBusinessActorIcon.react','XUISpinner.react','joinClasses'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createElement(c('XUISpinner.react'),{size:'large'});i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;'use strict';for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return n=(o=j.constructor).call.apply(o,[this].concat(q)),this.state={actor:null},this.$UFIActorIconContainer1=function(){c('ShortProfiles').get(this.props.actorID,function(s){return this.setState({actor:s});}.bind(this));}.bind(this),n;}m.prototype.componentWillMount=function(){'use strict';this.$UFIActorIconContainer1();};m.prototype.componentDidUpdate=function(n){'use strict';if(this.props.actorID!==n.actorID)this.$UFIActorIconContainer1();};m.prototype.render=function(){'use strict';var n=this.state.actor;if(!n)return l;var o=c('joinClasses')("img UFIActorImage _54ru",this.props.className);return (n.isBusinessPersona?c('React').createElement(c('UFIBusinessActorIcon.react'),{classNames:o,firstName:n.firstName,lastName:n.lastName,textClassNames:"UFIBusinessActorIconText"}):c('React').createElement(c('Image.react'),{alt:n.name,className:o,src:n.thumbSrc}));};m.propTypes={actorID:k.string.isRequired,className:k.string};f.exports=m;},null);
__d('AbstractCommentLiveTypingController',['ex','destroyOnUnload'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={START:'start',STOP:'stop'},i=10*1000;function j(k,l,m){this.$AbstractCommentLiveTypingController5=k;this.$AbstractCommentLiveTypingController6=l;this.$AbstractCommentLiveTypingController7=m;this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;c('destroyOnUnload')(this.destroy.bind(this));}j.prototype.destroy=function(){this.$AbstractCommentLiveTypingController1&&this.$AbstractCommentLiveTypingController1.destroy();this.$AbstractCommentLiveTypingController1=null;this.$AbstractCommentLiveTypingController2=false;this.$AbstractCommentLiveTypingController3=0;this.$AbstractCommentLiveTypingController4=null;};j.prototype.bootloadPublisherModule=function(k){throw new Error(c('ex')('bootloadPublisherModule not implemented, '+'should be overridden by subclass'));};j.prototype.$AbstractCommentLiveTypingController8=function(k){var l=new k(this.$AbstractCommentLiveTypingController5,this.$AbstractCommentLiveTypingController6,this.$AbstractCommentLiveTypingController7),m=Date.now(),n=this.$AbstractCommentLiveTypingController3;if(n&&n+i>=m){var o=this.$AbstractCommentLiveTypingController4;if(o===h.START){l.handleStartEvent();}else if(o===h.STOP)l.handleStopEvent();}this.$AbstractCommentLiveTypingController1=l;};j.prototype.$AbstractCommentLiveTypingController9=function(){if(this.$AbstractCommentLiveTypingController2||!this.$AbstractCommentLiveTypingController5)return;this.$AbstractCommentLiveTypingController2=true;this.bootloadPublisherModule(this.$AbstractCommentLiveTypingController8.bind(this));};j.prototype.attemptPublishStartEvent=function(){this.$AbstractCommentLiveTypingController4=h.START;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStartEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};j.prototype.attemptPublishStopEvent=function(){this.$AbstractCommentLiveTypingController4=h.STOP;this.$AbstractCommentLiveTypingController3=Date.now();if(this.$AbstractCommentLiveTypingController1){this.$AbstractCommentLiveTypingController1.handleStopEvent();}else if(!this.$AbstractCommentLiveTypingController2)this.$AbstractCommentLiveTypingController9();};f.exports=j;},null);
__d('UFIAddCommentLiveTypingController',['AbstractCommentLiveTypingController','Bootloader'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AbstractCommentLiveTypingController'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,l,m);}j.prototype.bootloadPublisherModule=function(k){c('Bootloader').loadModules(["UFIAddCommentLiveTypingPublisher"],k,'UFIAddCommentLiveTypingController');};j.prototype.attemptPublishStartEvent=function(){i.attemptPublishStartEvent.call(this);};j.prototype.attemptPublishStopEvent=function(){i.attemptPublishStopEvent.call(this);};f.exports=j;},null);
__d('UFIMarkdownButton.react',['cx','fbt','Link.react','React'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=i._("Format text with Markdown");return (c('React').createElement(c('Link.react'),{className:"_r1a _45-m",'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':n,'aria-label':n,onClick:this.props.onClick},c('React').createElement('div',{tabIndex:0,className:"_45-n"+(this.props.active?' '+"_45-o":'')})));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={active:l.bool,onClick:l.func.isRequired};f.exports=m;},null);
__d("XUFICommentMarkdownPreviewController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/markdown_preview\/",{comment_body:{type:"String"}});},null);
__d('UFIAddComment.react',['cx','fbt','ActorURI','Arbiter','AsyncRequest','Bootloader','BootloadedComponent.react','ClipboardPhotoUploader','Event','JSResource','Keys','Link.react','LitestandStoryInsertionStatus','MentionsInputUtils','React','ReactDOM','Run','SnowflakePermalinkUtils','TrackingNodes','UFIActorIconContainer.react','UFIAddCommentAction','UFIAddCommentLiveTypingController','UFIAttachMediaSection.react','UFIConfig','UFIImageBlock.react','UFIInstanceState','UFIMarkdownButton.react','UFIStickerButton.react','URI','XFeedNUXSaveSeenStateController','XUFICommentMarkdownPreviewController','getActiveElement','joinClasses','throttle'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=b.URL||b.webkitURL||{},k=c('React').PropTypes,l=i._("Write a comment..."),m=i._("Write a reply..."),n="fcg fss UFICommentTip",o=19,p='/ajax/ufi/upload/',q='/ajax/ufi/sticker_preview/',r=1000;function s(){return !!c('UFIConfig').canPublishLive;}var t={UPLOAD:'uploading',ENCODE:'encoding'},u=false,v=false,w=false,x=c('React').createClass({displayName:'UFIAddComment',propTypes:{contextArgs:k.object.isRequired,viewerActorID:k.string.isRequired,editingComment:k.object.isRequired,className:k.string,allowPhotoAttachments:k.bool,allowVideoAttachments:k.bool,allowStickerAttachments:k.bool,isEditing:k.bool,isFirstComponent:k.bool,isLastComponent:k.bool,isQAndA:k.bool,mentionsDataSource:k.object,replyCommentID:k.string,showSendOnEnterTip:k.bool,subtitle:k.any,targetID:k.string,withoutSeparator:k.bool,markViewerHasInteracted:k.func,allowCommentMarkdown:k.bool,allowCommentPrivate:k.bool},contextTypes:{dispatch:k.func},getInitialState:function(){var y=this.props.editingComment,z=y.attachment||{type:null},aa=z.type==='photo'?z:null;return {attachedPhoto:y.photo_comment||aa,attachedVideo:y.video_comment||null,commentMarkdownPreviewContent:null,commentMarkdownEnabled:false,videoStatus:null,videoFileURL:null,videoProgress:0,attachedSticker:z.type=='sticker'?z:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,stickerNUXVisible:false,isFocused:this.props.isEditing,videosInCommentsNUXVisible:false,markdownNUXVisible:false};},_onKeyDown:function(event){if(this.props.isEditing&&c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)this.context.dispatch(c('UFIAddCommentAction').cancel());if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){c('Run').onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var y=c('getActiveElement')();if(c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)y.blur();},_onContentChange:function(y){if(s()){var z=y.trim().length>0;if(z){this._attemptPublishStartEvent();}else this._attemptPublishStopEvent();}if(this.props.allowCommentMarkdown)this._sendMarkdownUpdate(y);},_sendMarkdownUpdate:function(y){var z=c('XUFICommentMarkdownPreviewController').getURIBuilder().setString('comment_body',y).getURI();new (c('AsyncRequest'))(z).setHandler(this._handleMarkdownUpdate).send();},_handleMarkdownUpdate:function(y){if(!y)return;this.setState({commentMarkdownPreviewContent:y.payload?y.payload.markup:null});},_handleUnsavedChanges:function(){var y=b.PageTransitions;if(y){var z=c('URI').getNextURI(),aa=y.getMostRecentURI();if(z.getQueryData().hasOwnProperty('theater')||aa.getQueryData().hasOwnProperty('theater')||z.getQueryData().hasOwnProperty('sdialog')||c('SnowflakePermalinkUtils').isPermalinkURI(z)||c('SnowflakePermalinkUtils').isPermalinkURI(aa))return;var ba=b.DialogNavigationStack;if(ba&&ba.isActiveURI(z))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return i._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function(){this.setState({markdownNUXVisible:false,stickerNUXVisible:false,videosInCommentsNUXVisible:false});setTimeout(function(){if(this.isMounted())this.setState({isFocused:false});}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var y=new (c('ClipboardPhotoUploader'))(p,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[y.subscribe('upload_start',this._prepareForAttachedPhotoPreview),y.subscribe('upload_error',this._onRemoveAttachedMediaPreviewClicked),y.subscribe('upload_success',function(z,aa){this._onPhotoUploadComplete(aa);}.bind(this))];y.handlePaste(event);},_onEnterSubmit:function(y,event){var z=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedSticker,aa=this.props.isEditing||z;if(this.state.isLoadingPhoto||this._isLoadingVideo()){return false;}else if(!y.encodedValue.trim()&&!aa)return false;y.encodedValue=y.encodedValue.trim();if(this.state.commentMarkdownEnabled){y.isMarkdown=true;this.setState({commentMarkdownEnabled:false,commentMarkdownPreviewContent:null});}if(z){y.attachedPhoto=this.state.attachedPhoto;y.attachedVideo=this.state.attachedVideo;y.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedVideo:null,attachedSticker:null});}else{y.attachedPhoto=null;y.attachedVideo=null;y.attachedSticker=null;}if(this.props.isEditing){this.context.dispatch(c('UFIAddCommentAction').submitEdit(this.props.editingComment,y,event.target));}else this.context.dispatch(c('UFIAddCommentAction').submitNew(y,event.target,this.props.replyCommentID));this._attemptPublishStopEvent();return true;},_isLoadingVideo:function(){return this.state.videoStatus===t.UPLOAD||this.state.videoStatus===t.ENCODE&&this.state.videoProgress!==100;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(y){y.unsubscribe();});},_getFeedbackTarget:function(y){return y.contextArgs.ftentidentifier;},_initTypingEventController:function(){if(!this._typingEventController&&s())this._typingEventController=new (c('UFIAddCommentLiveTypingController'))(this._getFeedbackTarget(this.props),this.props.replyCommentID,this.props.viewerActorID);},_attemptPublishStartEvent:function(){if(!s())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStartEvent();},_attemptPublishStopEvent:function(){if(!s())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStopEvent();},componentWillMount:function(){this._typingEventController=null;this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=c('LitestandStoryInsertionStatus').registerBlocker(function(){return this.state.isCommenting;}.bind(this));},_destroyLiveTypingController:function(){this._typingEventController&&this._typingEventController.destroy();this._typingEventController=null;},componentWillReceiveProps:function(y){var z=this._getFeedbackTarget(this.props),aa=this._getFeedbackTarget(y);if(aa!==z||this.props.replyCommentID!==y.replyCommentID||this.props.viewerActorID!==y.viewerActorID)this._destroyLiveTypingController();},componentWillUnmount:function(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)c('Arbiter').unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)c('Arbiter').unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;this._destroyLiveTypingController();},focus:function(){var y={isCommenting:true,isFocused:true},z=this.props.contextArgs.loggedOutLinkConfig;if(z&&z.showAddComment)c('Bootloader').loadModules(["AsyncDialog"],function(ba){ba.bootstrap(z.addCommentAjaxifyURI,null,'dialog');},'UFIAddComment.react');if(this.props.allowStickerAttachments&&c('UFIConfig').shouldShowStickerNUX)if(!u){u=true;var aa=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(aa).send();y.stickerNUXVisible=true;}if(this.props.allowVideoAttachments&&c('UFIConfig').shouldShowVideosInCommentsNux)if(!v){v=true;aa=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','video_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(aa).send();y.videosInCommentsNUXVisible=true;}if(this.props.allowCommentMarkdown&&c('UFIConfig').shouldShowMarkdownCommentNUX)if(!w){w=true;aa=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','markdown_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(aa).send();y.markdownNUXVisible=true;}this.setState(y);if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();if(this.props.onFocus)this.props.onFocus();},_renderStickerNUX:function(){if(this.state.stickerNUXVisible)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.sticker_button;}.bind(this),shown:this.state.stickerNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideStickerNUX},i._("Now you can comment with a sticker!")));return null;},_renderVideoInCommentsNUX:function(){if(this.state.videosInCommentsNUXVisible)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.media_section;}.bind(this),shown:this.state.videosInCommentsNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hidevideosInCommentsNUX},i._("You can now add videos to comments")));return null;},_renderMarkdownCommentsNUX:function(){if(this.state.markdownNUXVisible)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.markdownButton;}.bind(this),shown:this.state.markdownNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideMarkdownCommentsNUX},i._("[FB-Only] Markdown in Comments! Click to enable.")));return null;},_setFileInput:function(y,z){this.setState({fileInput:y,fileUploader:z});},render:function(){var y=this.props.contextArgs.loggedOutLinkConfig,z=true;if(y&&y.showAddComment)z=false;var aa=(!this.props.contextArgs.collapseaddcomment||this.state.isCommenting)&&z&&!this.props.contextArgs.hideActorPhoto,ba=null;if(this.props.subtitle){ba=c('React').createElement('span',{className:n},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){ba=c('React').createElement('span',{className:n},i._("{cancel}",[i.param('cancel',c('React').createElement(c('Link.react'),{onClick:function(){return (this.context.dispatch(c('UFIAddCommentAction').cancel()));}.bind(this)},i._("Cancel")))]));}else if(this.props.isEditing){ba=c('React').createElement('span',{className:n},i._("Press Esc to {cancel}.",[i.param('cancel',c('React').createElement(c('Link.react'),{onClick:function(){return (this.context.dispatch(c('UFIAddCommentAction').cancel()));}.bind(this)},i._("cancel")))]));}else if(this.props.showSendOnEnterTip)ba=c('React').createElement('span',{className:n},i._("Press Enter to post."));var ca=null,da=null,ea=null,fa=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo,ga=null;if(this.props.allowCommentMarkdown)ea=c('React').createElement(c('UFIMarkdownButton.react'),{active:this.state.commentMarkdownEnabled,ref:'markdownButton',onClick:function(){this.setState({commentMarkdownEnabled:!this.state.commentMarkdownEnabled});}.bind(this)});if(this.props.allowStickerAttachments&&!fa)da=c('React').createElement(c('UFIStickerButton.react'),{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText,onStickerFlyoutShow:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});if(this.props.allowPhotoAttachments||this.props.allowVideoAttachments){ga=this._onPaste;ca=c('React').createElement(c('UFIAttachMediaSection.react'),{ref:'media_section',getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,prepareForAttachedVideoPreview:this._prepareForAttachedVideoPreview,allowVideoAttachments:this.props.allowVideoAttachments,onPhotoUploadComplete:this._onPhotoUploadComplete,onVideoUploadComplete:this._onVideoUploadComplete,onVideoEncodeUpdate:this._onVideoEncodeUpdate,onVideoUploadUpdate:this._onVideoUploadUpdate,setFileInput:this._setFileInput,attachment:fa,targetId:this.props.targetID,onClick:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});}var ha=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.ADD_COMMENT_BOX),ia='addComment_'+this.props.contextArgs.ftentidentifier,ja;if(!!this.props.replyCommentID){ja=m;}else if(this.props.isQAndA){ja=i._("Ask a question...");}else ja=l;var ka=this.props.contextArgs.viewoptionstypeobjects,la=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)ba=null;var ma;if(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===t.UPLOAD||this.state.attachedSticker)ma=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIAttachedMediaPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedSticker:this.state.attachedSticker,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this._onRemoveAttachedMediaPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoProgress:this.state.videoProgress});var na=this.props.contextArgs.mentionsinput,oa=na.inputComponent,pa=na.viewComponent,qa=na.viewProps,ra=this.props.editingComment.body,sa=ra?c('MentionsInputUtils').generateDataFromTextWithEntities(ra):null,ta=c('UFIInstanceState').getKeyForInstance(this.props.contextArgs.instanceid,'inCommercialBreak'),ua=null;if(this.props.allowCommentMarkdown&&this.state.commentMarkdownEnabled)ua=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFICommentMarkdownPreview.react').__setRef('UFIAddComment.react'),bootloadPlaceholder:c('React').createElement('span',null),markup:this.state.commentMarkdownPreviewContent});var va=c('React').createElement('div',{className:'UFICommentContainer'},c('React').createElement('div',{className:'UFIInputContainer'},c('React').createElement(oa,{disableInitTextarea:!z,replyCommentID:this.props.replyCommentID,initialData:sa,placeholder:ja,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:pa,viewProps:qa,viewOptionsTypeObjects:ka,viewOptionsTypeObjectsOrder:la,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:c('UFIConfig').showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onContentChange:this._onContentChange,onPaste:ga,ftEntIdentifier:this.props.contextArgs.ftentidentifier}),c('React').createElement('div',{className:"UFICommentAttachmentButtons"},ea,ca,da)),ua,ma,ba);if(aa)va=c('React').createElement(c('UFIImageBlock.react'),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?' '+"UFIStickersEnabledInput":'')+(this.props.allowCommentMarkdown?' '+"UFIMarkdownEnabledInput":'')},c('React').createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus},c('React').createElement(c('UFIActorIconContainer.react'),{actorID:this.props.viewerActorID})),va);return (c('React').createElement('div',{id:ia,className:c('joinClasses')("UFIRow"+(' '+"_4oep")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(ta?' '+"hidden_elem":''),this.props.className),onKeyDown:this._onKeyDown,'data-ft':ha},va,this._renderStickerNUX(),this._renderVideoInCommentsNUX(),this._renderMarkdownCommentsNUX()));},componentDidUpdate:function(y,z,aa){if(!z.attachedPhoto&&this.state.attachedPhoto||!z.attachedSticker&&this.state.attachedSticker||!z.attachedVideo&&this.state.attachedVideo||!z.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(y.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedMediaPreviewClicked();}},componentDidMount:function(){this._sendMarkdownUpdate=c('throttle')(this._sendMarkdownUpdate,r,this);if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=c('Arbiter').subscribe('focusCommentField'+this.props.contextArgs.ftentidentifier,function(y){this.refs.mentionsinput.focus();}.bind(this));if(this.props.contextArgs.issnowlift)this._remixedImageToken=c('Arbiter').subscribe('newRemixedImage'+this.props.contextArgs.ftentidentifier,function(y,z){var event={clipboardData:{items:[z]}};this._onPaste(event);}.bind(this));}},insertMention:function(y){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(y);},_getPhotoUploadData:function(){var y=this.props.viewerActorID,z={profile_id:y,target_id:this.props.targetID,source:o};z[c('ActorURI').PARAMETER_ACTOR]=y;return z;},_onPhotoUploadComplete:function(y){if(!this.state.isLoadingPhoto)return;var z=y.getPayload();if(z&&z.fbid){this.setState({attachedPhoto:z,isLoadingPhoto:false});}else this._onRemoveAttachedMediaPreviewClicked(null);},_onVideoEncodeUpdate:function(y,z){if(!this.state.attachedVideo||this.state.videoStatus!==t.ENCODE)return;if(z.obj.progress<this.state.videoProgress)return;z.obj.fbid=z.obj.videoID;this.setState({attachedVideo:z.obj,videoProgress:z.obj.progress,videoStatus:t.ENCODE});if(this._isEncodingFinished(z.obj.stage))this._onEncodeComplete();},_onVideoUploadUpdate:function(y){this.setState({videoProgress:y});},_isEncodingFinished:function(y){return y==='finish';},_onEncodeComplete:function(){this.state.fileInput.clear();},_onVideoUploadComplete:function(y){if(this.state.videoStatus!==t.UPLOAD)return;if(y&&y.video_id)this.setState({videoProgress:0,attachedVideo:y,videoStatus:t.ENCODE});},_onRemoveAttachedMediaPreviewClicked:function(event){c('Arbiter').inform('video_upload_cancel',{});if(this.state.fileInput)this.state.fileInput.clear();this.setState({attachedPhoto:null,attachedVideo:null,videoStatus:null,videoFileURL:null,isLoadingPhoto:false,videoProgress:0});},_prepareForAttachedPhotoPreview:function(){this.setState({attachedPhoto:null,isLoadingPhoto:true});},_prepareForAttachedVideoPreview:function(){var y,z=this.state.fileInput.input.files[0];if(z&&j.createObjectURL)y=j.createObjectURL(z);this.setState({attachedVideo:null,videoStatus:t.UPLOAD,videoFileURL:y,videoProgress:0});},_onStickerUploadComplete:function(y){if(!this.state.isLoadingPhoto)return;var z=y.getPayload();if(z&&z.fbid){this.setState({attachedSticker:z,isLoadingPhoto:false});}else{c('Bootloader').loadModules(["Dialog"],function(aa){var ba=i._("Sticker Failed"),ca=i._("There was a problem attaching the sticker.");new aa().setTitle(ba).setBody(ca).setButtons(aa.OK).show();},'UFIAddComment.react');this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(y,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()||c('UFIConfig').alwaysPreviewSticker){this._prepareForAttachedStickerPreview(y);return;}this.sendSticker(y,event);},_prepareForAttachedStickerPreview:function(y){this.setState({attachedSticker:null,isLoadingPhoto:true});new (c('AsyncRequest'))(q).setData({sticker_id:y}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(y,event){var z={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:y}};this.context.dispatch(c('UFIAddCommentAction').submitNew(z,event.target,this.props.replyCommentID));},_insertEmoticonIntoCommentText:function(y){c('Bootloader').loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(z,aa,ba,ca){var da=z.symbols[y];if(!da)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(da);return;}if(!this._selectionPosition)this._selectionPosition=new ca(c('ReactDOM').findDOMNode(this.refs.mentionsinput.refs.textarea));var ea=this.refs.mentionsinput.refs.getTextFieldDOM(),fa=ba.getInstance(ea),ga=fa.getValue(),ha=aa.insertEmoticon(da,ga,this._selectionPosition.getPos());fa.setValue(ha.result);this._selectionPosition.setPos(ha.start,ha.end);}.bind(this),'UFIAddComment.react');},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});},_hidevideosInCommentsNUX:function(){this.setState({videosInCommentsNUXVisible:false});},_hideMarkdownCommentsNUX:function(){this.setState({markdownNUXVisible:false});}});f.exports=x;},null);
__d('UFIAddCommentLink.react',['cx','fbt','React','joinClasses'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=c('joinClasses')("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),o;if(this.props.isQAndA){o=i._("Ask a question...");}else o=i._("Write a comment...");return (c('React').createElement('div',{className:n,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},o)));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={'data-ft':l.string,isFirstCommentComponent:l.bool,isFirstComponent:l.bool,isLastCommentComponent:l.bool,isLastComponent:l.bool,isQAndA:l.bool,onClick:l.func};f.exports=m;},null);
__d('ContentTranslationStrings',['fbt','TranslationRating'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={SEE_TRANSLATION:h._("See Translation"),SEE_TRANSLATION_TIP:h._("Translate this comment"),NO_TRANSLATION_AVAILABLE:h._("No translation available"),AUTOMATICALLY_TRANSLATED:h._("Automatically Translated"),HIDE_ORIGINAL:h._("Hide original"),SEE_ORIGINAL:h._("See original"),UNDO:h._("Undo"),CANCEL:h._("Cancel"),SUBMIT:h._("Submit"),DONE:h._("Done"),CLOSE:h._("Close"),SEARCH:h._("Search"),ENTER_TRANSLATION:h._("Enter your translation"),EDIT_TRANSLATION_THANKS:h._("Thank you! Your feedback helps us improve our translation quality."),EDIT_TRANSLATION_DIALOG_TITLE_NORMAL:h._("Edit Translation"),EDIT_TRANSLATION_DIALOG_TITLE_ERROR:h._("Submission Unsuccessful"),EDIT_TRANSLATION_ERROR:h._("There was a problem with the submission. Please try again later. Thanks for the good work!"),EDIT_TRANSLATION_MENU:h._("I have a better translation"),RATE_TRANSLATION:h._("Rate this translation"),I_DONT_KNOW:h._("I don't know"),NO_MATCHING_LANGUAGES:h._("No matching languages"),LANGUAGE_SETTINGS:h._("Language settings"),CLICK_TO_RATE:h._("Click a star to rate"),TAP_TO_RATE:h._("Tap a star to rate"),ORIGINAL_TEXT:h._("Original text:"),YOUR_TRANSLATION:h._("Your translation:"),SETTINGS_SAVED:h._("Language settings successfully saved."),REPORT_LANGUAGE_THANKS:h._("Thank you for letting us know about this error. Your feedback improves translation for everyone on Facebook."),LANGUAGE_SETTINGS_REMINDER:h._("You can change this at any time in your language settings."),ADD_TRANSLATION:h._("Add Translation"),CROWDSOURCING_TARGET_DIALECT_DIALOG:h._("Settings"),TRANSLATE_ALL_TEXT:h._("Translate all comments"),getTranslatedFromTo:function(j,k){return h._("Translated from {source language} to {target language}",[h.param('source language',j),h.param('target language',k)]);},getTranslatedFrom:function(j){return h._("Translated from {source language}",[h.param('source language',j)]);},getReportLanguageDialogBody:function(j){return h._("Are you sure this post was not in {language}?",[h.param('language',j)]);},getReportLanguage:function(j){return h._("Post was not in {language}",[h.param('language',j)]);},getReportLanguageSelector:function(j){return h._("This post was actually in: {language selector}",[h.param('language selector',j)]);},getNeverTranslate:function(j){return h._("Never translate {language}",[h.param('language',j)]);},getNeverTranslateDialog:function(j){return h._("Are you sure? Posts in {language} won't be translated for you.",[h.param('language',j)]);},getDisableAutoTranslate:function(j){return h._("Disable automatic translation for {dialect}",[h.param('dialect',j)]);},getDisableAutoTranslateDialog:function(j){return h._("Are you sure? Posts in {dialect} won't be automatically translated for you.",[h.param('dialect',j)]);},getUserFeedbackTitleForScore:function(j){switch(j){case c('TranslationRating').VERY_BAD:return h._("Very bad.");case c('TranslationRating').BAD:return h._("Bad.");case c('TranslationRating').OK:return h._("OK.");case c('TranslationRating').GOOD:return h._("Good.");case c('TranslationRating').VERY_GOOD:return h._("Very good.");default:return null;}},getUserFeedbackDescriptionForScore:function(j){switch(j){case c('TranslationRating').VERY_BAD:return h._("I can't understand anything.");case c('TranslationRating').BAD:return h._("I can't understand most of this.");case c('TranslationRating').OK:return h._("I can understand enough of this.");case c('TranslationRating').GOOD:return h._("I can understand most of this.");case c('TranslationRating').VERY_GOOD:return h._("I can understand everything.");default:return null;}},getCrowdsourcingTargetDialectSelector:function(j){return h._("Translation Language: {target_dialect}",[h.param('target_dialect',j)]);}};f.exports=i;},null);
__d('LtgAutoTranslationsTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:LtgAutoTranslationsLoggerConfig',this.$LtgAutoTranslationsTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:LtgAutoTranslationsLoggerConfig',this.$LtgAutoTranslationsTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$LtgAutoTranslationsTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$LtgAutoTranslationsTypedLogger1=babelHelpers['extends']({},this.$LtgAutoTranslationsTypedLogger1,j);return this;};h.prototype.setAdID=function(j){this.$LtgAutoTranslationsTypedLogger1.ad_id=j;return this;};h.prototype.setAuthorType=function(j){this.$LtgAutoTranslationsTypedLogger1.author_type=j;return this;};h.prototype.setContentLocale=function(j){this.$LtgAutoTranslationsTypedLogger1.content_locale=j;return this;};h.prototype.setEntTranslationCreationTime=function(j){this.$LtgAutoTranslationsTypedLogger1.ent_translation_creation_time=j;return this;};h.prototype.setEntTranslationID=function(j){this.$LtgAutoTranslationsTypedLogger1.ent_translation_id=j;return this;};h.prototype.setFbid=function(j){this.$LtgAutoTranslationsTypedLogger1.fbid=j;return this;};h.prototype.setTargetLocale=function(j){this.$LtgAutoTranslationsTypedLogger1.target_locale=j;return this;};h.prototype.setTranslationApp=function(j){this.$LtgAutoTranslationsTypedLogger1.translation_app=j;return this;};h.prototype.setTranslationConfidence=function(j){this.$LtgAutoTranslationsTypedLogger1.translation_confidence=j;return this;};h.prototype.setTranslationID=function(j){this.$LtgAutoTranslationsTypedLogger1.translation_id=j;return this;};h.prototype.setViewerID=function(j){this.$LtgAutoTranslationsTypedLogger1.viewer_id=j;return this;};var i={ad_id:true,author_type:true,content_locale:true,ent_translation_creation_time:true,ent_translation_id:true,fbid:true,target_locale:true,translation_app:true,translation_confidence:true,translation_id:true,viewer_id:true};f.exports=h;},null);
__d('LtgSeeTranslationStates',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={SHOW_SEE_TRANSLATION_LINK:'show_see_translation_link',HIDE_SEE_TRANSLATION_LINK:'hide_see_translation_link',LOADING_SEE_TRANSLATION:'loading_see_translation',SEE_TRANSLATION_ERROR:'see_translation_error',TRANSLATE_ALL:'translate_all'};},null);
__d('LtgTranslationAttribution.react',['cx','ActionList.react','ContentTranslationStrings','Link.react','React','XUIText.react'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.state={isShowingOriginal:this.props.isShowingOriginal};}k.prototype.$LtgTranslationAttribution1=function(){if(this.props.onToggleOriginal)this.props.onToggleOriginal();this.setState({isShowingOriginal:!this.state.isShowingOriginal});};k.prototype.render=function(){var l=(this.props.isGray?"_1u4h":'')+(' '+"_h90");return (c('React').createElement('span',{className:"_5pio"},c('React').createElement(c('ActionList.react'),null,c('React').createElement(c('XUIText.react'),{key:'attributionText',className:l},c('ContentTranslationStrings').AUTOMATICALLY_TRANSLATED),c('React').createElement(c('Link.react'),{key:'seeOriginal',className:l,onClick:function(){return this.$LtgTranslationAttribution1();}.bind(this)},this.state.isShowingOriginal?c('ContentTranslationStrings').HIDE_ORIGINAL:c('ContentTranslationStrings').SEE_ORIGINAL))));};k.defaultProps={isShowingOriginal:false,isGray:false,onToggleOriginal:null};f.exports=k;},null);
__d('TimeOffset',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={timeToTimestamp:function(i){if(i<=0)return '0:00';var j=Math.floor(i/3600),k=j?j+':':'';k+=((j?'0':'')+Math.floor(i%3600/60)).slice(-2)+':';return k+('0'+i%60).slice(-2);}};f.exports=h;},null);
__d('ProfileBrowserLink',['URI'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='/ajax/browser/dialog/',i='/browse/',j=function(l,m,n){return new (c('URI'))(l+m).setQueryData(n);},k={constructPageURI:function(l,m){return j(i,l,m);},constructDialogURI:function(l,m){return j(h,l,m);}};f.exports=k;},null);
__d('ProfileBrowserTypes',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={LIKES:'likes',FRIEND_CHECKINS:'friendcheckins',FRIENDED_FANS_OF:'friended_fans_of',GROUP_MEMBERS:'group_members',GROUP_MESSAGE_VIEWERS:'group_message_viewers',MUTUAL_FRIENDS:'mutual_friends',TODO_LIST_ASSIGNEES:'todo_list_assignees'};f.exports=h;},null);
__d('UFICommentLikeCount.react',['cx','fbt','ActorURI','NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','UFIConfig','URI'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=function(o,p,q){var r=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:o.fbid,comment_from:o.author,comment_likecount:o.likecount||0,comment_id:o.id,cache_buster:o.likeconfirmhash||0});if(p)r.addQueryData({viewas:p});return c('ActorURI').create(r,q);};j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.render=function(){var o=this.props.comment,p=o.likecount||0,q=c('NumberFormat').formatIntegerWithDelimiter(p,c('UFIConfig').numberDelimiter),r=i._({"*":"{number} Likes","268435456":"1  Like "},[i.plural(p,'number')]),s=c('ProfileBrowserTypes').LIKES,t={id:o.fbid},u=m(this.props.comment,this.props.contextArgs.viewas,this.props.actorForPost),v=c('React').createElement('i',{className:"UFICommentLikeIcon"}),w=c('React').createElement('span',null,q),x="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),y=c('ProfileBrowserLink').constructDialogURI(s,t).toString(),z=c('ProfileBrowserLink').constructPageURI(s,t).toString(),aa='dialog',ba=this.props.contextArgs.loggedOutLinkConfig;if(ba&&ba.showLikeLink){y=ba.likeAjaxifyURI;z='#';}return (c('React').createElement('a',{ajaxify:y,'aria-label':r,className:x,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':u.toString(),href:z,rel:aa,role:'button'},v,w));};function n(){j.apply(this,arguments);}n.propTypes={actorForPost:l.string,comment:l.object.isRequired,contextArgs:l.object.isRequired};f.exports=n;},null);
__d('addFocusEvents',['Deferred','Event','React','SubscriptionList'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').Component,i=void 0,j=function(k){return function(){var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.componentDidMount=function(){'use strict';if(!i){var o,p;i=new (c('SubscriptionList'))(function(){o=c('Event').listen(window,'blur',function(){i&&i.fireCallbacks(true);p&&p.remove();p=c('Event').listen(document.documentElement,'focusin',function(){i&&i.fireCallbacks(false);p&&p.remove();p=null;});});},function(){o&&o.remove();p&&p.remove();o=null;p=null;i=null;});}this.subscription=i.add(function(q){this.locked=q;}.bind(this));};n.prototype.componentWillUnmount=function(){'use strict';this.subscription&&this.subscription.remove();};n.prototype.onClick=function(event){'use strict';this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus);};n.prototype.onFocus=function(event){'use strict';if(this.deferred)this.deferred.reject();if(this.locked)return;this.deferred=new (c('Deferred'))();this.deferred.done(function(o){o&&o(event);this.deferred=null;}.bind(this),function(){this.deferred=null;}.bind(this));};n.prototype.onKeyUp=function(event){'use strict';this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus);};n.prototype.render=function(){'use strict';var o=this.props,p=o.onKeyboardFocus,q=o.onMouseFocus,r=babelHelpers.objectWithoutProperties(o,['onKeyboardFocus','onMouseFocus']);return (c('React').createElement(k,babelHelpers['extends']({},r,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)})));};function n(){'use strict';l.apply(this,arguments);}return n;}();}.bind(this);f.exports=j;},null);
__d('UFIReactionsLinkImpl.react',['cx','fbt','BanzaiLogger','BootloadedComponent.react','Bootloader','Deferred','Event','JSResource','React','ReactDOM','ReactionNuxTypeEnum','SubscriptionsHandler','UFIConfig','UFILikeWebDriverIDs','UFIReactionIconImpl.react','UFIReactionTypes','UFICommentAction','UFIStoryAction','addFocusEvents','shallowCompare'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=c('UFIConfig').reactionsFunnelLogger,n=false,o=false,p=null,q=c('React').createElement('div',null),r=150,s=c('UFIReactionTypes').reactions,t=Object.keys(s),u=20,v=525,w=750,x=500,y='ontouchstart' in window,z=i._("Show more reactions"),aa=new (c('Deferred'))(),ba=function(){if(!p){var fa=function(ga){p=ga;if(aa){aa.done(ca,ca);aa.resolve();}};if(c('UFIConfig').reactionsHasAnimatedIconsOnHover){c('Bootloader').loadModules(["UFIReactionsMenuWithAnimatedVectorIcons.react"],fa,'UFIReactionsLinkImpl.react');}else if(c('UFIConfig').reactionsHasStaticVectorDock){c('Bootloader').loadModules(["UFIReactionsMenuWithStaticVectorIcons.react"],fa,'UFIReactionsLinkImpl.react');}else c('Bootloader').loadModules(["UFIReactionsMenuImpl.react"],fa,'UFIReactionsLinkImpl.react');}},ca=function(){aa=null;},da=c('addFocusEvents')('a');j=babelHelpers.inherits(ea,c('React').Component);k=j&&j.prototype;function ea(fa,ga){'use strict';k.constructor.call(this,fa,ga);this.hideDialog=this.hideDialog.bind(this);this.maybeShowNUX=this.maybeShowNUX.bind(this);this.onClick=this.onClick.bind(this);this.onClickCapture=this.onClickCapture.bind(this);this.onContextMenu=this.onContextMenu.bind(this);this.onDragStart=this.onDragStart.bind(this);this.onKeyboardFocus=this.onKeyboardFocus.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.onMouseEnter=this.onMouseEnter.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);this.onReactionChange=this.onReactionChange.bind(this);this.onReactionMenuMouseEnter=this.onReactionMenuMouseEnter.bind(this);this.onReactionMouseEnter=this.onReactionMouseEnter.bind(this);this.onReactionMouseLeave=this.onReactionMouseLeave.bind(this);this.onScreenReaderTrigger=this.onScreenReaderTrigger.bind(this);this.showDialog=this.showDialog.bind(this);this.dragStartX=null;this.dragStartY=null;this.hasSuggestedReaction=c('UFIConfig').reactionsHasSuggestedReaction;this.subscriptionsHandler=new (c('SubscriptionsHandler'))();if(y){this.onTouchEnd=this.onTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.onTouchStart=this.onTouchStart.bind(this);}if(aa)aa.done(function(){this.forceUpdate();}.bind(this),function(){aa=null;});this.state={dialogShown:false,isLongPressing:false,isMouseOver:false,isScrubbing:false,isTouchDown:false,NUXShown:false};}ea.prototype.shouldComponentUpdate=function(fa,ga){'use strict';return c('shallowCompare')(this,fa,ga);};ea.prototype.componentWillUpdate=function(fa,ga){'use strict';if(this.state.dialogShown&&!ga.dialogShown)this.$UFIReactionsLink1(this.props.reaction);};ea.prototype.componentDidUpdate=function(fa,ga){'use strict';if(!ga.dialogShown&&this.state.dialogShown){if(y){var ha;this.subscriptionsHandler.addSubscriptions(c('Event').listen(document.documentElement,'touchstart',function(event){ha=event.touches[0];}),c('Event').listen(document.documentElement,'touchmove',function(event){ha=event.touches[0];}),c('Event').listen(document.documentElement,'touchend',function(event){if(ha&&!this.refs.root.contains(document.elementFromPoint(ha.clientX,ha.clientY)))this.setState({dialogShown:false,isScrubbing:false});}.bind(this)));}}else if(ga.dialogShown&&!this.state.dialogShown){this.subscriptionsHandler.release();this.subscriptionsHandler=new (c('SubscriptionsHandler'))();}};ea.prototype.componentDidMount=function(){'use strict';this.$UFIReactionsLink2();};ea.prototype.componentWillUnmount=function(){'use strict';this.subscriptionsHandler.release();aa&&aa.reject();};ea.prototype.maybeShowNUX=function(){'use strict';if(!n){n=true;this.setState({NUXShown:true,dialogShown:false});c('BanzaiLogger').log('WebReactionsNuxLoggerConfig',{feedback_id:this.props.id,'interface':'www'});}};ea.prototype.hideDialog=function(){'use strict';this.setState({dialogShown:false,isScrubbing:false});};ea.prototype.showDialog=function(){'use strict';if(this.dialogShownTime===0)this.dialogShownTime=Date.now();if(!this.state.dialogShown&&m)m.menuShow();n=true;this.setState({dialogShown:true,NUXShown:false});};ea.prototype.onClick=function(event){'use strict';var fa=this.props,ga=fa.reaction,ha=fa.suggestedReaction;if(!ga||ga===c('UFIReactionTypes').LIKE||!s[ga]){if(!ga&&this.props.nuxConfig){var ia=this.props.nuxConfig.nuxType;if(ia===c('ReactionNuxTypeEnum').LIKE_CLICK||ia===c('ReactionNuxTypeEnum').LIKE_CLICK_RENUX)this.maybeShowNUX();}var ja=ha&&this.hasSuggestedReaction?ha:c('UFIReactionTypes').LIKE;ga=ga?c('UFIReactionTypes').NONE:ja;this.onReactionChange(ga,event);this.$UFIReactionsLink1(ga,true);}else this.onReactionChange(0,event);this.setState({dialogShown:false,isMouseOver:false,isScrubbing:false});};ea.prototype.onClickCapture=function(event){'use strict';event.stopPropagation();this.setState({isLongPressing:false});};ea.prototype.onContextMenu=function(event){'use strict';if(this.state.isTouchDown)event.preventDefault();};ea.prototype.onDragStart=function(event){'use strict';event.preventDefault();};ea.prototype.onMouseDown=function(event){'use strict';clearTimeout(this.hoverTimeout);};ea.prototype.onMouseEnter=function(event){'use strict';clearTimeout(this.hoverTimeout);if(!this.state.dialogShown)this.hoverTimeout=setTimeout(this.showDialog,v);this.setState({isMouseOver:true});ba();if(!this.state.dialogShown&&m)this.logFunnelTimeout=setTimeout(function(){return m.likeButtonEnter(this.props.reaction);}.bind(this),r);};ea.prototype.onMouseLeave=function(event){'use strict';clearTimeout(this.hoverTimeout);clearTimeout(this.logFunnelTimeout);if(this.state.dialogShown)this.hoverTimeout=setTimeout(this.hideDialog,w);this.setState({isMouseOver:false});};ea.prototype.onReactionMenuMouseEnter=function(event){'use strict';clearTimeout(this.hoverTimeout);};ea.prototype.onTouchStart=function(event){'use strict';if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout(function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true});}.bind(this),x);ba();}this.setState({isTouchDown:true,isLongPressing:false});};ea.prototype.onTouchEnd=function(event){'use strict';if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);this.setState({isTouchDown:false});};ea.prototype.onTouchMove=function(event){'use strict';if(this.state.isScrubbing)return;var fa=event.touches[0],ga=fa.clientX,ha=fa.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=ga;this.dragStartY=ha;return;}if(typeof this.dragStartX==='number'&&typeof this.dragStartY==='number'&&(this.dragStartX>ga+u||this.dragStartX<ga-u||this.dragStartY>ha+u||this.dragStartY<ha-u))this.setState({isScrubbing:true});};ea.prototype.onReactionChange=function(fa,event){'use strict';this.$UFIReactionsLink1(fa);var ga=c('ReactDOM').findDOMNode(this.refs.trigger);if(m)event.target===ga?m.likeButtonClick(fa):m.reactionSelection(fa);var ha=void 0;if(this.props.comment){ha=c('UFICommentAction').changeReaction(this.props.comment,fa,ga);}else ha=c('UFIStoryAction').changeReaction({ftentidentifier:this.props.id,rootid:this.props.rootid,source:this.props.source,feedbackReferrer:this.props.feedbackReferrer,isLiveVOD:this.props.isLiveVOD,fluentContentToken:this.props.fluentContentToken,islivestreaming:this.props.isLiveStreaming},fa,ga);this.context.dispatch(ha);this.setState({dialogShown:false,isScrubbing:false});};ea.prototype.onReactionMouseEnter=function(fa,event){'use strict';if(this.reactionsHoverStartTimeMap[fa]===0)this.reactionsHoverStartTimeMap[fa]=Date.now();};ea.prototype.onReactionMouseLeave=function(fa,event){'use strict';if(this.reactionsHoverStartTimeMap[fa]){this.reactionsHoverTotalTimeMap[fa]+=Date.now()-this.reactionsHoverStartTimeMap[fa];this.reactionsHoverStartTimeMap[fa]=0;}};ea.prototype.onKeyboardFocus=function(){'use strict';this.allowKeyboardFocus=true;this.showDialog();};ea.prototype.onScreenReaderTrigger=function(){'use strict';o=true;this.allowKeyboardFocus=true;this.showDialog();};ea.prototype.renderMenu=function(){'use strict';if(this.state.dialogShown)ba();if(!p)return null;var fa=this.allowKeyboardFocus;this.allowKeyboardFocus=false;return (c('React').createElement(p,{allowKeyboardFocus:fa,initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:o,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,suggestedReaction:this.props.suggestedReaction,supportedReactions:this.props.supportedReactions}));};ea.prototype.renderTrigger=function(){'use strict';var fa=this.props,ga=fa.reaction,ha=fa.suggestedReaction;if(ga&&!s[ga])ga=null;var ia=ga?c('UFILikeWebDriverIDs').UNLIKE_LINK:c('UFILikeWebDriverIDs').LIKE_LINK,ja=void 0,ka=void 0,la=void 0,ma=void 0;if(this.props.comment){if(!ga){ja=s[c('UFIReactionTypes').LIKE].display_name;}else ja=s[ga].display_name;la="UFILikeLink"+(' '+"UFIReactionLink")+(ga?' '+"UFILinkBright":'');ma=ga?s[ga].color:null;}else{if(!ga){ja=ha&&this.hasSuggestedReaction?s[ha].display_name:s[c('UFIReactionTypes').LIKE].display_name;}else ja=s[ga].display_name;if(ga&&ga!=c('UFIReactionTypes').LIKE||!ga&&ha&&this.hasSuggestedReaction&&ha!=c('UFIReactionTypes').LIKE)ka=c('React').createElement(c('UFIReactionIconImpl.react'),{className:"_1ktw",grayscale:!ga&&!!ha,reaction:ga||ha,size:'13'});la="UFILikeLink"+(' '+"_4x9-")+(' '+"_4x9_")+(!ka?' '+"_48-k":'')+(ga?' '+"UFILinkBright":'');ma=ga?s[ga].color:null;}return (c('React').createElement(da,{'aria-pressed':!!ga,className:la,'data-testid':ia,href:'#',onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:p?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onTouchEnd:y?this.onTouchEnd:null,onTouchMove:y?this.onTouchMove:null,onTouchStart:y?this.onTouchStart:null,ref:'trigger',role:'button',style:{color:ma},tabIndex:p?-1:0},ka,ja));};ea.prototype.renderNUX=function(){'use strict';var fa=c('ReactDOM').findDOMNode(this.refs.root);if(!this.state.NUXShown||!fa)return null;return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:q,bootloadLoader:c('JSResource')('UFIReactionsNUX.react').__setRef('UFIReactionsLinkImpl.react'),context:fa,titleOverride:this.props.nuxConfig&&this.props.nuxConfig.titleOverride,textOverride:this.props.nuxConfig&&this.props.nuxConfig.textOverride,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey}));};ea.prototype.renderScreenReaderTrigger=function(){'use strict';if(p)return null;return (c('React').createElement('span',{role:'button',className:'accessible_elem',onClick:this.onScreenReaderTrigger,tabIndex:-1},z));};ea.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_khz"+(this.state.isScrubbing?' '+"_4bdq":''),ref:'root'},this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX()));};ea.prototype.$UFIReactionsLink2=function(){'use strict';this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};t.forEach(function(fa){this.reactionsHoverStartTimeMap[fa]=0;this.reactionsHoverTotalTimeMap[fa]=0;}.bind(this));};ea.prototype.$UFIReactionsLink1=function(fa,ga){'use strict';if(this.dialogShownTime!==0){var ha={feedback_id:this.props.id,final_reaction:fa,initial_reaction:this.props.reaction,'interface':'www',long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:ga,time_spent:Date.now()-this.dialogShownTime};for(var ia in this.reactionsHoverTotalTimeMap){var ja='time_spent_'+s[ia].name.toLowerCase();ha[ja]=this.reactionsHoverTotalTimeMap[ia];}c('BanzaiLogger').log('UserReactionsLoggerConfig',ha);this.$UFIReactionsLink2();}};ea.contextTypes={dispatch:l.func};ea.propTypes={id:l.string.isRequired,nuxConfig:l.object,reaction:l.number.isRequired,rootid:l.string,source:l.number,comment:l.object,supportedReactions:l.arrayOf(l.number).isRequired,isLiveVOD:l.bool,fluentContentToken:l.string,isLiveStreaming:l.bool};f.exports=ea;},null);
__d('UFICommentLikeLink.react',['fbt','React','ReactionNuxTypeEnum','TrackingNodes','UFICommentAction','UFIConfig','UFIReactionsLinkImpl.react'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l='ufi_comment_like_link',m='ufi_reply_like_link';i=babelHelpers.inherits(n,c('React').Component);j=i&&i.prototype;function n(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return o=(p=j.constructor).call.apply(p,[this].concat(r)),this.$UFICommentLikeLink1=function(t,u){var v=null;if(c('UFIConfig').reactionsHasCommentsNux)v={nuxKey:'reactions_comments',titleOverride:h._("New! React to a Comment"),textOverride:h._("Hover over the Like link to see all reactions."),nuxType:c('ReactionNuxTypeEnum').LIKE_CLICK};return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{id:t.id,comment:t,nuxConfig:v,reaction:t.viewerreaction,supportedReactions:u.supportedreactions}));},this.$UFICommentLikeLink2=function(t,u,v){var w=v.loggedOutLinkConfig,x=c('TrackingNodes').getTrackingInfo(t.hasviewerliked?c('TrackingNodes').types.UNLIKE_LINK:c('TrackingNodes').types.LIKE_LINK),y=t.hasviewerliked?h._("Unlike this comment"):h._("Like this comment"),z=t.parentcommentid?m:l,aa=!t.hasviewerliked||w?h._("Like"):h._("Unlike"),ba=null,ca=null;if(w&&w.showLikeLink){ba='dialog';ca=w.likeAjaxifyURI;}return (c('React').createElement('a',{className:'UFILikeLink','data-ft':x,'data-testid':z,href:'#',rel:ba,ajaxify:ca,onClick:function(event){return this.context.dispatch(c('UFICommentAction').toggleLike(t,event.target));}.bind(this),role:'button',title:y},aa));}.bind(this),o;}n.getCanRender=function(o){return !!(o&&(o.canviewerreact||o.viewercanlike));};n.prototype.render=function(){var o=this.props.comment,p=this.props.feedback,q=this.props.contextArgs;if(!this.constructor.getCanRender(o))return null;if(o.canviewerreact){return this.$UFICommentLikeLink1(o,p);}else if(o.viewercanlike)return this.$UFICommentLikeLink2(o,p,q);return null;};n.propTypes={comment:k.object.isRequired,contextArgs:k.object.isRequired,feedback:k.object.isRequired};n.contextTypes={dispatch:k.func};f.exports=n;},null);
__d("XUFIReactionProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});},null);
__d("XUFIReactionProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/dialog\/",{reaction_type:{type:"Enum",enumType:0},ft_ent_identifier:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null);
__d('UFIReactionsProfileBrowserUtils',['ActorURI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getDialogURI:function(i,j){return c('ActorURI').create(c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',i.entidentifier).setEnum('reaction_type',j).getURI(),i.actorforpost);},getPageURI:function(i){return c('ActorURI').create(c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',i.entidentifier).getURI(),i.actorforpost);}};f.exports=h;},null);
__d('sortReactionTypes',['UFIReactionTypes'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};c('UFIReactionTypes').ordering.forEach(function(j,k){h[j]=k;});function i(j,k){return Object.keys(j).map(function(l){return Number(l);}).sort(function(l,m){if(k&&l===c('UFIReactionTypes').LIKE)return -1;if(j[l]['default']===j[m]['default'])return h[l]-h[m];return j[m]['default']-j[l]['default'];});}f.exports=i;},null);
__d('UFIReactionsBlingTokens.react',['cx','fbt','Bootloader','BanzaiLogger','Event','JSResource','RTLKeys','React','ReactDOM','UFICommentAction','UFIConfig','UFIReactionIconImpl.react','UFIReactionTypes','UFIReactionsProfileBrowserUtils','UFIStoryAction','joinClasses','sortReactionTypes'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=null,n=300;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(p,q){'use strict';k.constructor.call(this);this.onFocus=this.onFocus.bind(this);this.onFocusIn=this.onFocusIn.bind(this);this.onKeyDown=this.onKeyDown.bind(this);this.state={active:null,pressed:null,selectedIndex:-1,reactionTypes:this.getReactionTypes(p.feedback.reactioncountmap,p.max)};}o.prototype.componentDidUpdate=function(){'use strict';if(this.state.selectedIndex>-1)c('ReactDOM').findDOMNode(this.refs[this.state.selectedIndex]).focus();};o.prototype.componentWillReceiveProps=function(p){'use strict';if(p.feedback.reactioncount!==this.props.feedback.reactioncount)this.setState({active:null});this.setState({reactionTypes:this.getReactionTypes(p.feedback.reactioncountmap,p.max)});};o.prototype.getReactionTypes=function(p,q){'use strict';var r=c('sortReactionTypes')(p,false).filter(function(s){return (c('UFIReactionTypes').reactions[s]&&p[s]['default']);});if(q)r=r.slice(0,q);return r;};o.prototype.onFocusIn=function(event){'use strict';if(!this.refs.tokens.contains(event.target)){this.setState({selectedIndex:-1});if(this.focusInListener){this.focusInListener.remove();this.focusInListener=null;}}};o.prototype.onFocus=function(event){'use strict';if(event.target===this.refs.tokens){this.setState({selectedIndex:0});if(!this.focusInListener)this.focusInListener=c('Event').listen(document.documentElement,'focusin',this.onFocusIn.bind(this));}};o.prototype.onMouseEnter=function(p){'use strict';if(!m)c('Bootloader').loadModules(["UFIReactionsTooltipImpl.react"],function(q){m=q;this.forceUpdate();}.bind(this),'UFIReactionsBlingTokens.react');this.setState({active:p});};o.prototype.onKeyDown=function(event){'use strict';switch(event.keyCode){case c('RTLKeys').RETURN:if(this.focusInListener){this.focusInListener.remove();this.focusInListener=null;}break;case c('RTLKeys').TAB:this.setState({selectedIndex:0});break;case c('RTLKeys').getLeft():case c('RTLKeys').getRight():event.preventDefault();this.setState({selectedIndex:Math.max(0,Math.min(this.state.selectedIndex+(event.keyCode===c('RTLKeys').getLeft()?-1:1),this.state.reactionTypes.length-1))});break;}};o.prototype.onTokenClick=function(p,q,event){var r,s=this,t;'use strict';var u=this.props.feedback,v=event.currentTarget,w=c('UFIReactionTypes').reactions[p]&&c('UFIReactionTypes').reactions[p].name;if(q){(function(){s.setState({pressed:p});var x=s.props.feedback.viewerreaction;if(x===p)p=c('UFIReactionTypes').NONE;var y=void 0;if(s.props.comment){y=c('UFICommentAction').changeReaction(s.props.comment,p,event.target);}else y=c('UFIStoryAction').changeReaction(s.props.contextArgs,p,event.target);setTimeout(function(){this.context.dispatch(y);this.setState({pressed:null});}.bind(s),n);})();}else (function(){var x=c('UFIReactionsProfileBrowserUtils').getDialogURI(u,p);c('Bootloader').loadModules(["AsyncDialog"],function(y){y.bootstrap(x.toString(),v,'dialog');},'UFIReactionsBlingTokens.react');event.preventDefault();})();c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'token',target_subtype:w});};o.prototype.renderToken=function(p,q){'use strict';var r=this.props.feedback,s=i._("{reduced_count} {reaction_type}",[i.param('reduced_count',r.reactioncountmap[p].reduced),i.param('reaction_type',c('UFIReactionTypes').reactions[p].display_name)]),t=!this.props.comment&&c('UFIConfig').reactionsHasDirectReactTokens,u=r.supportedreactions&&r.supportedreactions.indexOf(p)>=0,v={'aria-label':s,className:"_27jf"+(' '+"_3emk")+(this.props.size==='13'?' '+"_26lk":'')+(t&&u?' '+"_1d4l":'')+(this.state.pressed===p?' '+"_1h_u":''),href:t?null:c('UFIReactionsProfileBrowserUtils').getPageURI(r),key:'reactionType-'+p,onClick:u?this.onTokenClick.bind(this,p,t):null,rel:'ignore',ref:q,role:'button',tabIndex:this.state.selectedIndex===q?0:-1},w=c('React').createElement(c('UFIReactionIconImpl.react'),{size:this.props.size,className:"_4-op",reaction:p}),x=c('React').createElement('span',{className:"_3chu"},r.reactioncountmap[p].reduced);if(t)return (c('React').createElement('a',babelHelpers['extends']({'data-hover':'tooltip','data-tooltip-content':c('UFIReactionTypes').reactions[p].display_name+' ('+r.reactioncountmap[p].reduced+')'},v),w,x));if(m)return (c('React').createElement(m,babelHelpers['extends']({active:this.state.active===p,feedback:r,reaction:p},v),w,x));return (c('React').createElement('a',babelHelpers['extends']({onMouseEnter:this.onMouseEnter.bind(this,p)},v),w,x));};o.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:c('joinClasses')("_3t53",this.props.className)},c('React').createElement('span',{'aria-label':i._("See who reacted to this"),className:"_3t54",onFocus:this.onFocus,onKeyDown:this.onKeyDown,ref:'tokens',role:'toolbar',tabIndex:this.state.selectedIndex>-1?-1:0},this.state.reactionTypes.map(this.renderToken,this)),this.props.children));};o.contextTypes={dispatch:l.func};o.propTypes={className:l.string,comment:l.object,contextArgs:l.object,hoistLike:l.bool,max:l.number,size:c('UFIReactionIconImpl.react').propTypes.size};o.defaultProps={className:null,hoistLike:false,size:'16'};f.exports=o;},null);
__d("XUFIReactionTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]},reaction_type:{type:"Enum",enumType:0},user_count:{type:"Int"}});},null);
__d("XUFIReactionsSocialSentenceTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/sentence\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},user_count:{type:"Int"}});},null);
__d('UFICommentReactionCount.react',['cx','fbt','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsProfileBrowserUtils','ActorURI','XUFIReactionTooltipController','XUFIReactionsSocialSentenceTooltipController'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=this.props.comment,o={entidentifier:n.id,reactioncount:n.reactioncount,reactioncountmap:n.reactioncountmap,actorforpost:this.props.actorForPost,supportedreactions:this.props.supportedReactions},p="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),q=c('UFIReactionsProfileBrowserUtils').getDialogURI(o),r=c('UFIReactionsProfileBrowserUtils').getPageURI(o),s=c('ActorURI').create(c('XUFIReactionTooltipController').getURIBuilder().setString('ft_ent_identifier',n.id).setInt('user_count',n.reactioncount).getURI(),this.props.actorForPost),t=this.props.contextArgs.loggedOutLinkConfig;if(t&&t.showLikeLink){q=t.likeAjaxifyURI;r='#';}var u=n.reactioncountreduced;if(!c('UFIConfig').reactionsHasCommentsBling){s=c('ActorURI').create(c('XUFIReactionsSocialSentenceTooltipController').getURIBuilder().setString('ft_ent_identifier',n.id).setInt('user_count',n.reactioncount).getURI(),this.props.actorForPost);if(n.likecount===n.reactioncount){u=n.reactioncount===1?i._("1 Like"):i._("{Like count} Likes",[i.param('Like count',n.reactioncountreduced)]);}else u=n.reactioncount===1?i._("1 Reaction"):i._("{Reaction count} Reactions",[i.param('Reaction count',n.reactioncountreduced)]);}var v=c('React').createElement('a',{ajaxify:q,className:p,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':s.toString(),href:r,rel:'dialog',role:'button'},u);if(c('UFIConfig').reactionsHasCommentsBling)return (c('React').createElement(c('UFIReactionsBlingTokens.react'),{className:"UFICommentReactionsBling _4ar- _ipn",feedback:o,contextArgs:this.props.contextArgs,comment:this.props.comment,max:3,size:'13'},v));return v;};function m(){j.apply(this,arguments);}m.propTypes={actorForPost:l.string,comment:l.object.isRequired,contextArgs:l.object.isRequired,supportedReactions:l.array};f.exports=m;},null);
__d('UFIPrivateReplyIndicator.react',['fbt','PagesPrivateReplyConstants','React'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('PagesPrivateReplyConstants').Status;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.willRender=function(m){return m===k.ALREADY_REPLIED;};l.prototype.render=function(){if(this.props.replyStatus===k.ALREADY_REPLIED)return (c('React').createElement('span',null,h._("Page responded privately")));return null;};function l(){i.apply(this,arguments);}f.exports=l;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true},hide_attachments:{type:"Bool",defaultValue:false}});},null);
__d('UFIPrivateReplyLink.react',['cx','fbt','ActorURI','Link.react','PagesPrivateReplyConstants','React','XUIGrayText.react','XPagesMessagingPrivateReplyDialogController'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('PagesPrivateReplyConstants').Status,m=c('PagesPrivateReplyConstants').Type,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return p=(q=k.constructor).call.apply(q,[this].concat(s)),this.$UFIPrivateReplyLink1=function(){var u=c('ActorURI').create(c('XPagesMessagingPrivateReplyDialogController').getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (c('React').createElement(c('Link.react'),{className:"_50u0",href:u,rel:'dialog'},this.$UFIPrivateReplyLink4()));}.bind(this),this.$UFIPrivateReplyLink3=function(){var u=void 0;switch(this.props.context.status){case l.EXPIRED:u=i._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[i['enum'](this.$UFIPrivateReplyLink5(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case l.NOT_USER_CREATED:u=i._("Pages can't send private messages to other Pages.");break;case l.CANNOT_MESSAGE:u=i._("This person can't receive a message reply from your Page.");break;}return (c('React').createElement('span',{className:"_50u0 _50u4",'data-hover':u?'tooltip':null,'data-tooltip-content':u},this.$UFIPrivateReplyLink4()));}.bind(this),this.$UFIPrivateReplyLink2=function(){return (c('React').createElement(c('Link.react'),{className:"_50u0",href:this.props.context.permalink||'#'},this.props.seeResponseLabel?i._("See Response"):this.$UFIPrivateReplyLink4()));}.bind(this),this.$UFIPrivateReplyLink4=function(){return i._("Message");},this.$UFIPrivateReplyLink5=function(){switch(this.props.context.activityType){case m.COMMENT_PAGE_POST:case m.COMMENT_WALL_POST:case m.COMMENT_REVIEW:return 'comments';case m.REVIEW:return 'reviews';default:return 'posts';}}.bind(this),p;}o.willRender=function(p,q){if(!p)return false;if(p.hasReplyPermission&&q===p.pageID)return true;return false;};o.prototype.render=function(){var p=this.props.context;if(p.hasReplyPermission&&this.props.actorID===p.pageID){if(p.status===l.REPLYABLE){return this.$UFIPrivateReplyLink1();}else if(p.status===l.ALREADY_REPLIED)return this.$UFIPrivateReplyLink2();return this.$UFIPrivateReplyLink3();}return null;};o.propTypes={actorID:n.string.isRequired,activityID:n.string.isRequired,context:n.shape({activityType:n.string.isRequired,status:n.string.isRequired,hasReplyPermission:n.bool.isRequired,pageID:n.string.isRequired,permalink:n.string}).isRequired,seeResponseLabel:n.bool.isRequired};f.exports=o;},null);
__d('UFISpamCount',['UFISpamCountImpl'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('UFISpamCountImpl').module||{enabled:false};},null);
__d('UFICommentActions.react',['cx','fbt','Middot.react','React','ReactFragment','TimeOffset','UFIAddCommentAction','UFICentralUpdates','UFICommentAction','UFICommentLikeCount.react','UFICommentLikeLink.react','UFICommentMetadata.react','UFICommentReactionCount.react','UFIConfig','UFIConstants','UFIPrivateReplyIndicator.react','UFIPrivateReplyLink.react','UFISpamCount','UFIStoryAction','UFIVideoPlayerRegistry','VideoTimestampsClicksWWWTypedLogger'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=c('UFIConstants').UFIStatus,n="fsm fwn fcg UFICommentActions",o="UFIDeletedMessageIcon",p="UFIDeletedMessage";j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;function q(){var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return r=(s=k.constructor).call.apply(s,[this].concat(u)),this.renderCommentReply=function(w){return (c('React').createElement('a',{className:"UFIReplyLink",href:'#',onClick:function(){var x=this.props.feedback;if(x.isthreaded&&w.cancomment){this.context.dispatch(c('UFIStoryAction').showReplies(w.id,w));}else if(w.parentcommentid)this.context.dispatch(c('UFIStoryAction').showReplies(w.parentcommentid,w));}.bind(this),role:'button'},i._("Reply")));}.bind(this),this.renderMessageReply=function(w,x){if(w.messagereply){if(c('UFIPrivateReplyLink.react').willRender(w.messagereply,x.actorforpost)){return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:x.actorforpost,activityID:w.id,context:w.messagereply,seeResponseLabel:true}));}else if(c('UFIPrivateReplyIndicator.react').willRender(w.messagereply.status))return (c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:w.messagereply.status}));}else if(w.chattobuy)return (c('React').createElement('a',{href:w.chattobuy,role:'button',rel:'async-dialog'},i._("Message")));return null;},r;}q.prototype.render=function(){var r=this.props,s=r.comment,t=r.permalink,u=r.feedback,v=r.parentCanComment,w=r.markedAsSpamHere,x=s.status===m.SPAM_DISPLAY,y=r.showReplyLink,z=r.hideAsSpamForPageAdmin,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0,ha=void 0,ia=void 0,ja=void 0,ka=!s.islocal&&s.status!==m.LIVE_DELETED;if(ka){if(x&&!w){if(r.viewerCanMarkNotSpam)aa=c('React').createElement('a',{onClick:function(event){return this.context.dispatch(c('UFICommentAction').markAsNotSpam(s,event));}.bind(this),className:"UFICommentNotSpamLink",href:'#',role:'button'},i._("Unhide"));if(z&&u.isthreaded&&s.cancomment&&y)ga=this.renderCommentReply(s);}else{ba=c('UFICommentLikeLink.react').getCanRender(s)?c('React').createElement(c('UFICommentLikeLink.react'),{comment:s,contextArgs:this.props.contextArgs,feedback:u}):null;if(u.isthreaded&&s.cancomment&&y||!!s.parentcommentid&&u.cancomment&&v)ga=this.renderCommentReply(s);if(s.canviewerreact){ea=s.reactioncount>0?c('React').createElement(c('UFICommentReactionCount.react'),{comment:s,actorForPost:u.actorforpost,supportedReactions:u.supportedreactions,contextArgs:r.contextArgs}):null;}else ea=s.likecount>0?c('React').createElement(c('UFICommentLikeCount.react'),{comment:s,actorForPost:u.actorforpost,contextArgs:r.contextArgs}):null;if(s.spamcount&&c('UFISpamCount').enabled)fa=c('React').createElement(c('UFISpamCount'),{count:s.spamcount});ha=this.renderMessageReply(s,u);}if(s.attachment&&s.attachment.type==='share'&&!s.attachment.disableRemove&&s.canremove)ia=c('React').createElement('a',{href:'#',onClick:function(event){return this.context.dispatch(c('UFICommentAction').removePreview(s,event.target));}.bind(this),role:'button'},i._("Remove Preview"));if(this.props.contextArgs.shareablecomments)ca=c('React').createElement('a',{className:'share_action_link',href:r.comment.commentshareuri,role:'button',rel:'dialog',title:i._("Share this comment")},i._("Share"));if(u.canviewerpin&&!s.parentcommentid){var la=s.id===u.pinnedcommenttoken,ma=la?i._("Unpin this comment"):i._("Pin this comment"),na=la?i._("Unpin Comment"):i._("Pin Comment");da=c('React').createElement('a',{className:'share_action_link',href:'#',role:'button',title:ma,onClick:function(event){return this.context.dispatch(c('UFICommentAction').togglePin(s,event.target));}.bind(this)},na);}}if(c('UFIConfig').publicConversationsUnicornWhitelist)ja=c('React').createElement('a',{className:'share_action_link',href:'#',role:'button',title:'[FB Only] Mark this comment as a great comment for futher review.',onClick:function(event){return c('UFICommentAction').markUnicorn(s,event.target);}},'Unicorn');var oa=c('React').createElement(c('UFICommentMetadata.react'),{comment:s,onRetrySubmit:function(){return this.context.dispatch(c('UFIAddCommentAction').retrySubmit(s));}.bind(this),permalink:t,shortenTimestamp:r.contextArgs.shortenTimestamp,showPermalink:r.showPermalink}),pa=void 0;if(r.contextArgs.isLiveVOD&&typeof s.videoTimeOffset==='number'){pa=c('React').createElement('a',{className:"uiLinkSubtle",onClick:function(event){new (c('VideoTimestampsClicksWWWTypedLogger'))().setVideoTimestamp(s.videoTimeOffset).setCommentID(s.fbid).setIsContentTimestamp(true).log();c('UFIVideoPlayerRegistry').seekAvailableVideoPlayerController(r.contextArgs.instanceid,s.videoTimeOffset);}},c('TimeOffset').timeToTimestamp(s.videoTimeOffset));}else pa=null;var qa={};if(u.customcommentactionlinks)for(var ra in u.customcommentactionlinks){var sa=u.customcommentactionlinks[ra];if(sa.showInMenu)continue;var ta=function(event){return c('UFICentralUpdates').inform(sa.type,{comment:s,feedback:u});};qa[sa.type]=c('React').createElement('a',{href:'#',onClick:ta,role:'button'},sa.title);}var ua=void 0;if(this.props.orderingMode===c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING){ua={likeToggle:ba,unicornButton:ja,spamToggle:aa,likeCount:ea,spamCount:fa,vodTimestampLink:pa};ua=Object.assign(ua,qa);}else if(u.isqanda){ua={likeCount:ea,spamCount:fa,likeToggle:ba,unicornButton:ja,pinToggle:da,commentReply:ga,shareComment:ca,messageReply:ha,spamToggle:aa};ua=Object.assign(ua,qa);ua=Object.assign(ua,{vodTimestampLink:pa,metadata:oa,removePreview:ia});}else if(r.contextArgs.entstream){ua={vodTimestampLink:pa,metadata:oa,likeToggle:ba,unicornButton:ja,likeCount:ea,pinToggle:da,commentReply:ga,messageReply:ha,shareComment:ca,spamCount:fa,spamToggle:aa,removePreview:ia};ua=Object.assign(ua,qa);}else if(u.isthreaded){ua={likeToggle:ba,unicornButton:ja,pinToggle:da,commentReply:ga,messageReply:ha,spamToggle:aa,removePreview:ia,shareComment:ca,likeCount:ea,spamCount:fa};ua=Object.assign(ua,qa);ua=Object.assign(ua,{vodTimestampLink:pa,metadata:oa});}else{ua={vodTimestampLink:pa,metadata:oa,likeToggle:ba,unicornButton:ja,pinToggle:da,shareComment:ca,likeCount:ea,spamCount:fa,commentReply:ga,messageReply:ha,spamToggle:aa,removePreview:ia};ua=Object.assign(ua,qa);}if(s.status===m.LIVE_DELETED){var va=i._("Comment deleted"),wa=c('React').createElement('span',{className:p},c('React').createElement('i',{'aria-label':va,className:o,'data-hover':'tooltip','data-tooltip-content':va,role:'img'}));ua.deletionWarning=wa;}var xa=true,ya={};for(var za in ua){var ta=ua[za];if(ta){var ab=c('React').createElement(c('Middot.react'),{key:'middot-'+za});ya[za]=xa?ta:c('ReactFragment').create({middot:ab,action:ta});xa=false;}}return c('React').createElement('div',{className:n},c('ReactFragment').create(ya));};q.propTypes={comment:l.object.isRequired,contextArgs:l.object.isRequired,feedback:l.object.isRequired,hideAsSpamForPageAdmin:l.bool,markedAsSpamHere:l.bool,permalink:l.string,shareLink:l.string,showPermalink:l.bool,isStreaming:l.bool,showReplyLink:l.bool,viewerCanMarkNotSpam:l.bool,orderingMode:l.string};q.contextTypes={dispatch:l.func};f.exports=q;},null);
__d('UFISocialContext.react',['fbt','HovercardLink','ProfileBrowserLink','ProfileBrowserTypes','React','URI'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=27;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return n=(o=j.constructor).call.apply(o,[this].concat(q)),this.getOthersLink=function(s,t,u){var v=c('ProfileBrowserTypes').MUTUAL_FRIENDS,w={uid:t.id},x=new (c('URI'))('/ajax/mutual_friends/tooltip.php').setQueryData({friend_id:t.id});if(u)x.addQueryData({exclude_id:u.id});var y=c('ProfileBrowserLink').constructDialogURI(v,w).toString();return (c('React').createElement('a',{ajaxify:y,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':x.toString(),href:c('ProfileBrowserLink').constructPageURI(v,w).toString(),key:'others',rel:'dialog'},s));},n;}m.prototype.render=function(){var n=this.props.topMutualFriend,o=this.props.otherMutualCount,p=this.props.commentAuthor,q=c('HovercardLink').constructEndpoint(n).toString(),r=c('React').createElement('a',{href:n.uri,'data-hovercard':q,key:'top'},n.name),s=p.name.length+n.name.length,t=void 0;if(o===0){t=h._("Friends with {name}",[h.param('name',r)]);}else if(s<l){var u=void 0;if(o==1){u=h._("1 other");}else u=h._({"*":"{count} others"},[h.param('count',o,[0])]);t=h._("Friends with {name} and {others}",[h.param('name',r),h.param('others',this.getOthersLink(u,p,n))]);}else{var v=h._({"*":"{count} mutual friends"},[h.param('count',o+1,[0])]);t=this.getOthersLink(v,p);}return c('React').createElement('span',{className:'UFICommentSocialContext'},t);};m.propTypes={commentAuthor:k.object.isRequired,otherMutualCount:k.number.isRequired,topMutualFriend:k.object.isRequired};f.exports=m;},null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','UFIActor.react','UFISocialContext.react'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return l=(m=i.constructor).call.apply(m,[this].concat(o)),this.getConstituentTitle=function(q){var r=this.props.constituentTitle;if(r&&r.titleModule){var s=r.titleModule;return (c('React').createElement(s,{representativeName:r.representativeName,representativeId:r.representativeId,authorId:q.id,ftId:r.ftId,commentId:r.commentId,showHovercard:true,isOwner:r.isOwner,key:'constituentTitle'}));}else return null;}.bind(this),l;}k.prototype.render=function(){var l=this.props,m=l.author,n=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_NAME);return c('React').createElement(c('UFIActor.react'),{author:m,disableAuthorLink:l.disableAuthorLink,showHovercard:l.showHovercard,isAdminViewer:l.isAdminViewer,key:'author',focusOnMount:l.focusOnMount,'data-ft':n,isAuthorWeakReference:l.isAuthorWeakReference,isAuthorNonCoworker:l.isAuthorNonCoworker,groupOrEventID:l.groupOrEventID,useFirstName:l.useFirstName,isPublic:this.props.isPublic},l.isFeatured?c('React').createElement(c('Badge.react'),{key:'badge',size:'xsmall',type:'verified'}):null,this.getConstituentTitle(m),l.socialContext?c('React').createElement(c('UFISocialContext.react'),{topMutualFriend:l.authorProfiles[l.socialContext.topmutualid],otherMutualCount:l.socialContext.othermutualcount,commentAuthor:m}):null);};k.propTypes={author:j.object.isRequired,authorProfiles:j.object.isRequired,disableAuthorLink:j.bool,showHovercard:j.bool,isAdminViewer:j.bool,isAuthorWeakReference:j.bool,isAuthorNonCoworker:j.bool,focusOnMount:j.bool,groupOrEventID:j.string,isFeatured:j.bool,socialContext:j.object,useFirstName:j.bool,isPublic:j.bool,constituentTitle:j.object};f.exports=k;},null);
__d('IntlLang',['UnicodeBidi'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},i=new RegExp('['+h.HE+']');function j(l){var m=c('UnicodeBidi').firstStrongChar(l);if(m===null)return null;if(i.exec(m))return 'he';return null;}var k={getLang:j};f.exports=k;},null);
__d('UFICommentBody.react',['cx','Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','IntlLang','UFICommentUtils','UFIConfig','UFIConstants'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.commentText,o=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),p=c('UnicodeBidi').isDirectionLTR(n),q=!p,r=p&&c('Locale').isRTL()?'ltr':q&&!c('Locale').isRTL()?'rtl':null,s=c('IntlLang').getLang(n),t=c('UFICommentUtils').getCommentBodyInterpolator(m.groupOrEventID,m.ufiInstanceID,m.commentFBID,m.isLiveStreaming),u=c('React').createElement(c('TruncatedTextWithEntities.react'),{key:'comment-body',className:"UFICommentBody",interpolator:t,ranges:m.commentRanges,text:n,truncationPercent:c('UFIConstants').commentTruncationPercent,maxLength:m.maxLength,maxLines:m.maxLines,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji,'data-ft':o,dir:r,lang:s,markViewerHasInteracted:this.props.markViewerHasInteracted,allowSeeMoreLinebreakOnLongWords:c('UFIConfig').allowSeeMoreLinebreakInLongWordComments,shouldExpand:this.props.shouldExpand});if(m.socialContext){u=c('React').createElement('div',{key:'body'},u);}else{var v=(p&&c('Locale').isRTL()?"_5wjy":'')+(p&&c('Locale').isRTL()?' '+"_5wjz":'')+(q&&!c('Locale').isRTL()?' '+"_5wj-":'')+(q&&!c('Locale').isRTL()?' '+"_5wj_":'');u=v?c('React').createElement('div',{key:'body',className:v},u):[' ',u];}return c('React').createElement('span',null,u);};function l(){i.apply(this,arguments);}l.propTypes={commentText:k.string.isRequired,commentRanges:k.array,groupOrEventID:k.string,maxLength:k.number,maxLines:k.number,socialContext:k.object,markViewerHasInteracted:k.func,ufiInstanceID:k.string,commentFBID:k.string,isLiveStreaming:k.bool};f.exports=l;},null);
__d('UFICommentMenu.react',['ix','Bootloader','Image.react','React','XUICloseButton.react','XUIEditButton.react','keyMirror','fbglyph'],function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes,n=void 0,o=void 0,p=void 0,q=void 0,r=c('keyMirror')({EDIT:true,CLOSE:true,CHEVRON:true});i=babelHelpers.inherits(s,c('React').Component);j=i&&i.prototype;function s(){var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return u=(v=j.constructor).call.apply(v,[this].concat(x)),this.state={bootloading:false,bootloaded:false,needsExpand:false},this.onClickGuard=function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});c('Bootloader').loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],function(z,aa,ba){n=z,o=aa;p=ba;q=ba.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}.bind(this),'UFICommentMenu.react');}else if(this.props.onClick)this.props.onClick(event);}.bind(this),u;}s.prototype.shouldComponentUpdate=function(u,v,w){if(this.state.needsExpand&&!v.needsExpand)return false;return true;};s.prototype.render=function(){var u=null;if(this.props.menuType===r.EDIT){u=c('XUIEditButton.react');}else if(this.props.menuType===r.CLOSE){u=c('XUICloseButton.react');}else u=t;if(this.props.menuData&&this.state.bootloaded){var v=this.props.menuData.map(function(x){return (c('React').createElement(q,{'data-testid':x.testid,key:x.value,value:x.value},x.label));}),w=c('React').createElement(p,{onItemClick:this.props.onAction},v);return (c('React').createElement(o,babelHelpers['extends']({},this.props,{alignh:'right',layerBehaviors:[n],menu:w,ref:'menu'}),c('React').createElement(u,babelHelpers['extends']({},this.props,{href:'#',onClick:this.onClickGuard}))));}return c('React').createElement(u,babelHelpers['extends']({},this.props,{href:'#',onClick:this.onClickGuard}));};s.prototype.componentDidUpdate=function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}};s.propTypes={menuData:m.array,menuType:m.oneOf(Object.keys(r)).isRequired,onAction:m.func,onClick:m.func};k=babelHelpers.inherits(t,c('React').Component);l=k&&k.prototype;t.prototype.render=function(){return (c('React').createElement('a',this.props,c('React').createElement(c('Image.react'),{'data-hover':'tooltip','data-tooltip-content':this.props.tooltip,'aria-label':this.props.tooltip,src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-down_16_fig-light-20.png")})));};function t(){k.apply(this,arguments);}s.MenuType=r;f.exports=s;},null);
__d('UFICommentVPVTracker.react',['OnVisible.react','React','UFICommentVPVs','UFIConfig','clearTimeout','setTimeout'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return l=(m=i.constructor).call.apply(m,[this].concat(o)),this.state={timer:null},this.maybeScheduleVPVLogging=function(){if(this.state.timer!==null)return;var q=this.props.comment.id,r=this.props.contextArgs.instanceid;if(c('UFICommentVPVs').hasLoggedVPV(r,q))return;this.setState({timer:c('setTimeout')(function(){c('UFICommentVPVs').logVPV(r,q);this.setState({timer:null});}.bind(this),c('UFIConfig').vpvLoggingTimeout)});}.bind(this),this.cancelScheduledVPVLogging=function(){if(this.state.timer===null)return;c('clearTimeout')(this.state.timer);this.setState({timer:null});}.bind(this),l;}k.prototype.render=function(){var l=this.props.comment.id,m=this.props.contextArgs.instanceid,n=this.props.children;if(!c('UFICommentVPVs').hasLoggedVPV(m,l))n=c('React').createElement(c('OnVisible.react'),{onVisible:this.maybeScheduleVPVLogging,onHidden:this.cancelScheduledVPVLogging},n);return n;};k.prototype.shouldComponentUpdate=function(l,m){return m.timer===this.state.timer;};k.prototype.componentWillReceiveProps=function(){this.cancelScheduledVPVLogging();};k.prototype.componentWillUnmount=function(){this.cancelScheduledVPVLogging();};k.propTypes={comment:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k;},null);
__d('UFIComment.react',['ix','cx','fbt','invariant','AsyncRequest','Bootloader','BootloadedComponent.react','BootloadOnRender.react','ContentTranslationStrings','DOMContainer.react','HovercardLink','Image.react','JSResource','LazyComponent.react','LiveWWWFeedbackTypedLogger','LoadingIndicator.react','LtgAutoTranslationsTypedLogger','LtgSeeTranslationStates','LtgTranslationAttribution.react','React','ReactDOM','TextWithEntities.react','Tooltip.react','TrackingNodes','TranslationStatusEnum','TranslationTrigger','UFIActorIconContainer.react','UFICentralUpdates','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentMenu.react','UFICommentUtils','UFICommentVPVTracker.react','UFIConfig','UFIConstants','UFIImageBlock.react','UserHovercardLocation','XUICloseButton.react','XFeedNUXSaveSeenStateController','emptyFunction','fbglyph','joinClasses','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';var l,m;if(c.__markCompiled)c.__markCompiled();var n=c('React').PropTypes,o=c('UFIConstants').UFIStatus,p=c('keyMirror')({edit:true,hide:true,remove:true,embed:true,showConstituentTitle:true,hideConstituentTitle:true}),q='ufi_comment_close_button',r='ufi_highlighted_comment',s='ufi_comment_menu_delete',t='ufi_comment_menu_edit',u='ufi_comment_menu_hide',v='ufi_comment_menu_embed',w='ufi_comment_menu_show_district',x='ufi_comment_menu_hide_district',y={testid:s,value:p.remove,label:j._("Delete Comment...")},z={testid:u,value:p.hide,label:j._("Hide Comment")},aa={testid:v,value:p.embed,label:j._("Embed")},ba={testid:s,value:p.remove,label:j._("Delete...")},ca={testid:w,value:p.showConstituentTitle,label:j._("Show District")},da={testid:x,value:p.hideConstituentTitle,label:j._("Hide District")},ea=false,fa=null,ga=function(ka){var la=ka.status;return la===o.FAILED_ADD||la===o.FAILED_EDIT;};function ha(ka){return ka.commenterIsFOF!==undefined&&ka.userIsMinor!==undefined&&ka.reportLink!==undefined;}l=babelHelpers.inherits(ia,c('React').Component);m=l&&l.prototype;function ia(ka){m.constructor.call(this,ka);ja.call(this);var la=ka.comment,ma=la.translationdata;this.state={isHighlighting:la.highlightcomment,wasHighlighted:la.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false,loggedLiveUpdate:false,loggedAutoTranslationImpression:false,hideConstituentTitleNUXVisible:true,seeTranslationState:la.istranslatable&&!ma?c('LtgSeeTranslationStates').SHOW_SEE_TRANSLATION_LINK:c('LtgSeeTranslationStates').HIDE_SEE_TRANSLATION_LINK,showBody:!ma||ma.trigger===c('TranslationTrigger').SEE_TRANSLATION};}ia.prototype.componentWillReceiveProps=function(ka){var la=ka.comment;if(la.translationdata){var ma=la.translationdata.trigger,na=la.translationdata.status===c('TranslationStatusEnum').NO_TRANSLATION_RESPONSE?c('LtgSeeTranslationStates').SEE_TRANSLATION_ERROR:c('LtgSeeTranslationStates').HIDE_SEE_TRANSLATION_LINK;this.setState({showBody:ma===c('TranslationTrigger').SEE_TRANSLATION,seeTranslationState:na});}};ia.prototype.componentDidMount=function(){var ka,la=this;if(this.state.isHighlighting)(function(){var ma=c('ReactDOM').findDOMNode(la),na=parseInt(la.props.comment.scrolltopoffset||0,10);c('Bootloader').loadModules(["UFIScrollHighlight"],function(oa){setTimeout(oa.actOn.bind(null,ma,na),0);},'UFIComment.react');la.setState({isHighlighting:false});})();};ia.prototype.shouldComponentUpdate=function(ka,la){var ma=this.props,na=this.state;return (ka.comment!==ma.comment||ka.showReplyLink!==ma.showReplyLink||ka.isFirst!==ma.isFirst||ka.isLast!==ma.isLast||ka.isFirstCommentComponent!==ma.isFirstCommentComponent||ka.isLastCommentComponent!==ma.isLastCommentComponent||ka.isFirstComponent!==ma.isFirstComponent||ka.isLastComponent!==ma.isLastComponent||ka.isFeatured!==ma.isFeatured||ka.hasPartialBorder!==ma.hasPartialBorder||la.wasHighlighted!==na.wasHighlighted||la.isHighlighting!==na.isHighlighting||la.markedAsSpamHere!==na.markedAsSpamHere||la.isInlinePageDeleted!==na.isInlinePageDeleted||la.isInlineBanned!==na.isInlineBanned||la.hideConstituentTitleNUXVisible!==na.hideConstituentTitleNUXVisible||la.seeTranslationState!==na.seeTranslationState||la.showBody!==na.showBody);};ia.prototype.render=function(){var ka=this.props.comment,la=this.props.feedback,ma=ka.status===o.DELETED,na=ka.status===o.LIVE_DELETED,oa=ka.status===o.SPAM_DISPLAY;if(ma)return null;var pa=this.state.markedAsSpamHere,qa=this.state.isInlinePageDeleted,ra=this.props.hideAsSpamForPageAdmin,sa=this.state.isInlineBanned;if(ka.islive&&!this.state.loggedLiveUpdate){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setCommentID(ka.id).log();this.setState({loggedLiveUpdate:true});}var ta=ha(ka),ua=!ka.status&&(ka.isunseen||ka.islocal);if(!ka.status&&la.lastseentime){var va=ka.originalTimestamp||ka.timestamp.time;ua=ua||va>la.lastseentime;}var wa=this.props.contextArgs.markedcomments;if(wa&&wa[ka.legacyid])ua=true;if(this.props.orderingMode===c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING)ua=false;var xa="UFIRow"+(this.props.isFirst?' '+"_48ph":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),ya=j._("Comment"),za=j._("Comment reply"),ab=ka.parentcommentid?za:ya;if(ta)if(fa){var bb=null,cb=null,db=null,eb=null;if(ra){db=sa?this.$UFIComment6:this.$UFIComment5;if(qa){bb=j._("You've deleted this comment so no one can see it.");}else if(pa){bb=j._("Now this is only visible to the person who wrote it and their friends.");eb=this.$UFIComment3;cb=this.$UFIComment2;}}else if(pa){bb=j._("This comment has been hidden.");eb=this.$UFIComment3;cb=this.$UFIComment2;}if(bb)return (c('React').createElement('div',{className:xa,role:'article','aria-label':ab},c('React').createElement(fa,{notice:bb,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:cb,onBanAction:db,onDeleteAction:eb,isInlineBanned:sa,isInlinePageDeleted:qa,hideAsSpamForPageAdmin:ra,pageID:this.props.feedback.ownerid})));}else c('Bootloader').loadModules(["UFICommentRemovalControls.react"],function(hb){fa=hb;setTimeout(function(){this.forceUpdate();}.bind(this));}.bind(this),'UFIComment.react');var fb=c('joinClasses')(xa,"UFIComment"+(ga(ka)?' '+"UFICommentFailed":'')+(na||oa?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(' '+"_4oep")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')+(ua?' '+"UFIUnseenItem":'')),gb=this.renderComment();if(this.props.shouldLogVPVs&&!ka.islocal)gb=c('React').createElement(c('UFICommentVPVTracker.react'),{comment:ka,contextArgs:this.props.contextArgs},gb);return (c('React').createElement('div',{className:fb,role:'article','aria-label':ab,'data-testid':this.state.wasHighlighted?r:null,'data-ft':this.props['data-ft']},gb));};ia.propTypes={authorProfiles:n.object.isRequired,comment:n.object.isRequired,contextArgs:n.object.isRequired,feedback:n.object.isRequired,'data-ft':n.string,featuredCommentIDs:n.array,focusOnMount:n.bool,hasPartialBorder:n.bool,hideAsSpamForPageAdmin:n.bool,isFeatured:n.bool,isFirst:n.bool,isFirstCommentComponent:n.bool,isFirstComponent:n.bool,isLast:n.bool,isLastCommentComponent:n.bool,isLastComponent:n.bool,isLocallyComposed:n.bool,parentCanComment:n.bool,permalink:n.string,showPermalink:n.bool,showRemoveReportMenu:n.bool,showReplyLink:n.bool,viewerIsAuthor:n.bool,orderingMode:n.string,markViewerHasInteracted:n.func,seeTranslationState:n.oneOf(c('LtgSeeTranslationStates'))};ia.contextTypes={dispatch:n.func};var ja=function(){this.$UFIComment1=function(event){this.context.dispatch(c('UFICommentAction').markAsSpam(this.props.comment,event));this.setState({markedAsSpamHere:true});}.bind(this);this.$UFIComment2=function(event){this.context.dispatch(c('UFICommentAction').markAsNotSpam(this.props.comment,event));this.setState({markedAsSpamHere:false});}.bind(this);this.$UFIComment3=function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.comment,event.target,function(){return this.setState({isInlinePageDeleted:true});}.bind(this)));}.bind(this);this.$UFIComment4=function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.comment,event.target,c('emptyFunction')));}.bind(this);this.$UFIComment5=function(event){this.context.dispatch(c('UFICommentAction').inlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});}.bind(this);this.$UFIComment6=function(event){this.context.dispatch(c('UFICommentAction').undoInlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});}.bind(this);this.$UFIComment7=function(event,ka){var la=ka.item,ma=la.getValue();setTimeout(function(){if(ma===p.remove){this.$UFIComment4(event);}else if(ma===p.edit){this.context.dispatch(c('UFICommentAction').edit(this.props.comment));}else if(ma===p.hide){this.$UFIComment1(event);}else if(ma===p.embed){this.context.dispatch(c('UFICommentAction').embed(this.props.comment));}else if(ma===p.showConstituentTitle){this.context.dispatch(c('UFICommentAction').showConstituentTitle(this.props.comment));}else if(ma===p.hideConstituentTitle){this.context.dispatch(c('UFICommentAction').hideConstituentTitle(this.props.comment));}else c('UFICentralUpdates').inform(ma,{comment:this.props.comment,feedback:this.props.feedback});}.bind(this),0);}.bind(this);this.$UFIComment8=function(){return [y,z];};this.$UFIComment9=function(){return [{testid:t,value:p.edit,label:j._("Edit...")},ba];};this.$UFIComment10=function(ka){this.setState({seeTranslationState:c('LtgSeeTranslationStates').LOADING_SEE_TRANSLATION});this.context.dispatch(c('UFICommentAction').translate(ka,null,this.$UFIComment11));}.bind(this);this.$UFIComment11=function(ka){this.setState({seeTranslationState:ka.error?c('LtgSeeTranslationStates').SEE_TRANSLATION_ERROR:c('LtgSeeTranslationStates').HIDE_SEE_TRANSLATION_LINK,showBody:true});}.bind(this);this.$UFIComment12=function(){var ka=this.props.comment,la=null,ma=null,na=null,oa=c('UFICommentMenu.react').MenuType.CLOSE,pa=ka.canembed&&c('UFIConfig').showCommentEmbedOption,qa=ka.canEditConstituentTitle,ra=ka.constituentTitle;if(ka.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&ka.canedit){na=pa?j._("Edit, delete or embed this"):j._("Edit or delete this");oa=c('UFICommentMenu.react').MenuType.EDIT;if(qa){if(ra){ma=[da];}else ma=[ca];ma=ma.concat(this.$UFIComment9());}else ma=this.$UFIComment9();}else if(this.props.showRemoveReportMenu){na=pa?j._("Remove, report or embed this"):j._("Remove or report this");ma=this.$UFIComment8();}else if(this.props.feedback.customcommentactionlinks){na=pa?j._("Remove this"):j._("Remove or embed this");ma=[y];oa=c('UFICommentMenu.react').MenuType.EDIT;}else{na=pa?j._("Remove or embed this"):j._("Remove this");if(!pa){la=this.$UFIComment4;}else ma=[ba];}}else if(this.props.feedback.customcommentactionlinks){na=pa?j._("Hide or embed this"):j._("Hide this");ma=[z];oa=c('UFICommentMenu.react').MenuType.EDIT;}else if(ka.canreport){na=pa?j._("Hide or embed this"):j._("Hide this");if(!pa){la=this.$UFIComment1;}else ma=[z];}if(pa){!(ma.length>0)?k(0):void 0;ma.push(aa);oa=c('UFICommentMenu.react').MenuType.CHEVRON;}if(this.props.feedback.customcommentactionlinks)for(var sa in this.props.feedback.customcommentactionlinks){var ta=this.props.feedback.customcommentactionlinks[sa];if(!ta.showInMenu)continue;ma.push({testid:ta.type,value:ta.type,label:ta.title});}var ua=null;if(qa&&!ra&&c('UFIConfig').shouldShowHideConstituentTitleNUX)if(!ea){ua=this.$UFIComment13();c('UFIConfig').shouldShowHideConstituentTitleNUX=false;}var va="UFICommentCloseButton"+(la===null&&ma===null?' '+"hdn":'')+(ua!==null?' '+"UFICommentCloseButtonNux":''),wa=null,xa=null;if(this.props.contextArgs.viewas){wa='/ajax/profile/link_disabled_in_viewas.php';xa='dialog';la=null;}return c('React').createElement('span',null,c('React').createElement(c('UFICommentMenu.react'),{ajaxify:wa,'aria-label':na,className:va,'data-testid':q,onClick:la,rel:xa,tooltip:na,menuData:ma,menuType:oa,onAction:this.$UFIComment7,ref:'comment_menu'}),ua);}.bind(this);this.$UFIComment14=function(){return c('React').createElement(c('XUICloseButton.react'),{className:'UFICommentCloseButtonFake',tabIndex:'-1'});};this.$UFIComment15=function(){ea=true;this.setState({hideConstituentTitleNUXVisible:false});var ka=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','hide_constituent_title_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(ka).send();}.bind(this);this.$UFIComment13=function(){return c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('XUIAmbientNUX.react').__setRef('UFIComment.react'),bootloadPlaceholder:c('React').createElement('div',null),contextRef:function(){return this.refs.comment_menu;}.bind(this),shown:this.state.hideConstituentTitleNUXVisible,position:'above',alignment:'right',onCloseButtonClick:this.$UFIComment15},j._("Your district is hidden on all comments. Edit any comment to your representatives to show it again."));}.bind(this);this.onToggleOriginal=function(){this.setState({showBody:!this.state.showBody});}.bind(this);this.renderComment=function(){var ka=this.props,la=ka.comment,ma=ka.permalink,na=ka.feedback,oa=la.translationdata,pa=la.translatedbody;if(oa&&oa.trigger===c('TranslationTrigger').AUTO_TRANSLATION&&!this.state.loggedAutoTranslationImpression){new (c('LtgAutoTranslationsTypedLogger'))().setTranslationID(oa.requestID).setFbid(la.fbid).setContentLocale(oa.sourceDialect).setTargetLocale(oa.targetDialect).log();this.setState({loggedAutoTranslationImpression:true});}var qa=la.body?la.body.text:'',ra=c('UFICommentUtils').shallowCopyRanges(la.body&&la.body.ranges),sa=ka.authorProfiles[la.author],ta=la.status===o.SPAM_DISPLAY,ua=la.status===o.LIVE_DELETED,va=!(ta||ua),wa=na.canremoveall||la.hiddenbyviewer;qa=c('UFICommentUtils').getCommentTextWithTruncatedURIs(ra,qa);var xa=null,ya=null;if(!ka.isLocallyComposed&&!this.state.wasHighlighted){ya=c('UFIConstants').commentTruncationLength;xa=c('UFIConstants').commentTruncationMaxLines;}var za=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.SMALL_ACTOR_PHOTO),ab=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),bb=null,cb=null,db=null,eb=null;if(this.state.seeTranslationState===c('LtgSeeTranslationStates').SHOW_SEE_TRANSLATION_LINK)bb=c('React').createElement('a',{href:'#',role:'button',title:c('ContentTranslationStrings').SEE_TRANSLATION_TIP,className:"UFITranslateLink",onClick:function(){return this.$UFIComment10(la);}.bind(this)},c('ContentTranslationStrings').SEE_TRANSLATION);if(this.state.seeTranslationState!==c('LtgSeeTranslationStates').SEE_TRANSLATION_ERROR){if(oa)eb=c('UFIConfig').hasCommentTranslationPrefs?c('React').createElement('span',{className:"UFITranslateAttribution"},c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('LtgTranslationPreferences.react').__setRef('UFIComment.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{isShowingOriginal:this.state.showBody,shouldShowSeeOriginalInDropdown:true,shouldShowTranslatedFromLanguage:true,isGray:true,translationData:oa,onToggleOriginal:this.onToggleOriginal})})):c('React').createElement('span',{className:"UFITranslateAttribution"},c('React').createElement(c('LtgTranslationAttribution.react'),{isShowingOriginal:this.state.showBody,isGray:true,onToggleOriginal:this.onToggleOriginal}));if(pa){var fb=c('UFICommentUtils').shallowCopyRanges(pa.ranges),gb=pa.text,hb=pa.dir,ib=c('React').createElement('span',{key:'comment-body','data-ft':ab,dir:hb},c('React').createElement(c('TextWithEntities.react'),{className:"UFICommentBody",interpolator:c('UFICommentUtils').getCommentBodyInterpolator(ka.feedback.grouporeventid,ka.contextArgs.ufiInstanceID,la.fbid,ka.contextArgs.islivestreaming),ranges:fb,text:gb,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji}));cb=ib;}if(!eb&&cb)eb=c('React').createElement('span',{className:"UFITranslateAttribution"},c('React').createElement(c('LtgTranslationAttribution.react'),{isShowingOriginal:this.state.showBody,isGray:true}));}else db=c('React').createElement('span',{className:"UFITranslationErrorText"},c('ContentTranslationStrings').NO_TRANSLATION_AVAILABLE);var jb=false;if(this.props.featuredCommentIDs&&this.props.featuredCommentIDs.indexOf(this.props.comment.fbid)>-1)jb=true;var kb=null;if(la.body&&la.body.markdown_enabled&&la.body.markup){kb=c('React').createElement(c('DOMContainer.react'),null,la.body.markup);}else kb=c('React').createElement(c('UFICommentBody.react'),{socialContext:la.socialcontext,commentText:qa,commentRanges:ra,groupOrEventID:na.grouporeventid,maxLength:ya,maxLines:xa,markViewerHasInteracted:this.props.markViewerHasInteracted,shouldExpand:jb,ufiInstanceID:this.props.contextArgs.instanceid,commentFBID:la.fbid,isLiveStreaming:ka.contextArgs.islivestreaming});var lb=ka.contextArgs.viewas?null:c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(sa,na.grouporeventid,c('UserHovercardLocation').UFI,la.isauthorweakreference,{on_public_ufi:na.ispublic}).toString(),mb=ka.contextArgs.disableCommentAuthorLink,nb=c('React').createElement(c('UFICommentAuthorName.react'),{author:sa,authorProfiles:ka.authorProfiles,disableAuthorLink:mb,showHovercard:!!lb,isAuthorWeakReference:la.isauthorweakreference,isAuthorNonCoworker:la.isauthornoncoworker,isAdminViewer:ka.feedback.isadminviewer,focusOnMount:ka.focusOnMount,groupOrEventID:na.grouporeventid,isFeatured:ka.isFeatured,socialContext:la.socialcontext,isPublic:na.ispublic,constituentTitle:la.constituentTitle}),ob=null;if(la.photo_comment_status)ob=c('React').createElement('div',{className:"_50f8"},la.photo_comment_status);var pb=null;if(la.sticker_attachment_status)pb=c('React').createElement('div',{className:"_50f8"},la.sticker_attachment_status);var qb=c('React').createElement(c('UFICommentAttachment.react'),{comment:ka.comment}),rb=c('React').createElement(c('UFIActorIconContainer.react'),{actorID:la.author});if(sa.uri||sa.isBusinessPersona)rb=c('React').createElement('a',{'data-ft':za,'data-hovercard':lb,href:c('UFICommentUtils').annotateProfileURIIfPublic(na.ispublic,sa.uri)},rb);var sb=this.state.seeTranslationState===c('LtgSeeTranslationStates').LOADING_SEE_TRANSLATION?c('React').createElement('div',null,c('React').createElement(c('LoadingIndicator.react'),{size:'small',color:'white'})):null,tb=false;switch(ka.orderingMode){case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:tb=true;}var ub=null,vb=ka.contextArgs.ownerName;if(tb&&this.props.comment.id===na.pinnedcommenttoken){var wb=vb?j._("{post owner name} pinned this comment to the top",[j.param('post owner name',vb)]):j._("The person who posted pinned this comment to the top");ub=c('React').createElement(c('Tooltip.react'),{position:'above',tooltip:wb},c('React').createElement(c('Image.react'),{className:'UFIPinnedCommentGlyph',src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/pushpin_16_bluegray-10.png")}));}var xb=oa&&oa.trigger===c('TranslationTrigger').AUTO_TRANSLATION?c('React').createElement('span',null,this.state.showBody?kb:null,c('React').createElement('div',{className:"UFITranslatedText"},cb,eb),db):c('React').createElement('span',null,this.state.showBody?kb:null,bb,sb,c('React').createElement('div',{className:"UFITranslatedText"},cb,eb),db);return (c('React').createElement(c('UFIImageBlock.react'),{spacing:'medium'},rb,c('React').createElement('div',{className:'UFICommentContentBlock'},c('React').createElement('div',{className:'UFICommentContent'},nb,ub,xb,qb),ob,pb,c('React').createElement(c('UFICommentActions.react'),{comment:la,feedback:na,parentCanComment:ka.parentCanComment,permalink:ma,viewerCanMarkNotSpam:wa,showPermalink:ka.showPermalink,showReplyLink:ka.showReplyLink,contextArgs:ka.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:ka.hideAsSpamForPageAdmin,orderingMode:ka.orderingMode}),va?this.$UFIComment12():null),va?this.$UFIComment14():null));}.bind(this);};f.exports=ia;},null);
__d('linkifyEntityRange',['Link.react','React'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=(j.entity||{}).url;if(!k)return c('React').createElement('span',null,i);return (c('React').createElement(c('Link.react'),{href:k,target:'_blank'},i));}f.exports=h;},null);
__d('UFICommentDisabledNotice.react',['cx','React','TextWithEntities.react','linkifyEntityRange'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';var m=this.props.feedback,n=m.commentdisablednotice,o=c('React').createElement('div',{className:'UFINotice'},c('React').createElement(c('TextWithEntities.react'),{interpolator:c('linkifyEntityRange'),ranges:n.ranges,aggregatedranges:n.aggregated_ranges,text:n.text}));return (c('React').createElement('div',{className:"UFIRow _4204 _2o9m _4oep"},o));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={feedback:k.object.isRequired};f.exports=l;},null);
__d('UFICommentFilters',['UFIConstants'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getAuthors:function(i){return i.reduce(function(j,k){if(k.author)j=j.concat(k.author);if(k.socialcontext)j=j.concat(k.socialcontext.topmutualid);if(k.replyauthors&&k.replyauthors.length)j=j.concat(k.replyauthors);return j;},[]);},isDeleted:function(i){return i.status===c('UFIConstants').UFIStatus.DELETED;},isSpam:function(i){return i.status===c('UFIConstants').UFIStatus.SPAM;},collectSpamBuckets:function(i,j){var k=i.reduce(function(l,m){if(h.isSpam(m)){if(l.spamBucket){l.spamBucket.spamCommentIDs.push(m.id);l.collected.push(null);}else{l.spamBucket={status:c('UFIConstants').UFIStatus.SPAM,id:m.id,spamCommentIDs:[m.id]};l.collected.push(l.spamBucket);}}else if(j[m.author]){l.spamBucket=null;l.collected.push(m);}return l;},{spamBucket:null,collected:[]});return k.collected;}};f.exports=h;},null);
__d('UFICommentHeader.react',['cx','fbt','React'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){return (c('React').createElement('h6',babelHelpers['extends']({},this.props,{className:"accessible_elem"}),i._("Comments")));};function l(){j.apply(this,arguments);}f.exports=l;},null);
__d('UFICommentScrollableArea.react',['React','ScrollableArea.react'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').Children,k=c('React').PropTypes;h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;l.prototype.render=function(){var m=this.props,n=m.children,o=m.scrollcomments,p=m.scrollwidth;if(o&&p)return (c('React').createElement(c('ScrollableArea.react'),{width:p},j.only(n)));return j.only(n);};function l(){h.apply(this,arguments);}l.propTypes={scrollcomments:k.bool.isRequired,scrollwidth:k.number.isRequired};f.exports=l;},null);
__d('CommentsTimeSpentTracker.react',['invariant','Banzai','BanzaiLogger','Event','OnVisible.react','React','SubscriptionsHandler','UserActivity','pageID'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'CommentsTimeSpentTracker',firstVisibleTime:0,listeners:new (c('SubscriptionsHandler'))(),propTypes:{orderingMode:i.string.isRequired,targetFBID:i.string.isRequired,viewerHasInteracted:i.bool.isRequired,timeToConsiderViewerInactiveMillis:i.number,pollViewerActivityIntervalMillis:i.number},getDefaultProps:function(){return {timeToConsiderViewerInactiveMillis:30000,pollViewerActivityIntervalMillis:1000};},render:function(){return (c('React').createElement(c('OnVisible.react'),{ref:'onVisibleElement',onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children));},startInterval:function(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer();}},finishInterval:function(){if(this.firstVisibleTime&&this.isMounted()){var k=this._getTimeInSeconds();if(k>this.firstVisibleTime)c('BanzaiLogger').log('CommentsTimeSpentLoggerConfig',{viewer_has_interacted:this.props.viewerHasInteracted,ordering_mode:this.props.orderingMode,post_fbid:this.props.targetFBID,start_time:this.firstVisibleTime,end_time:k,time_spent_id:c('pageID')});this.firstVisibleTime=0;}},componentWillReceiveProps:function(){this.finishInterval();},componentDidMount:function(){this.listeners.addSubscriptions(c('Banzai').subscribe(c('Banzai').SHUTDOWN,this.finishInterval),c('Event').listen(window,'blur',this.finishInterval),c('Event').listen(window,'focus',this._checkVisibility));},componentWillUnmount:function(){this.finishInterval();this.listeners.release();},componentDidUpdate:function(){this._checkVisibility();},_getTimeInSeconds:function(){return Math.floor(Date.now()/1000);},_checkVisibility:function(){if(this.isMounted()){!(this.refs.onVisibleElement!==null)?h(0):void 0;this.refs.onVisibleElement.reset();}},_checkForIdleViewer:function(){if(this.firstVisibleTime===0)return;if(c('UserActivity').isActive(this.props.timeToConsiderViewerInactiveMillis)){setTimeout(function(){this._checkForIdleViewer();}.bind(this),this.props.pollViewerActivityIntervalMillis);}else{this.finishInterval();c('UserActivity').subscribeOnce(function(){if(this.isMounted())this._checkVisibility();}.bind(this));}}});f.exports=j;},null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','setTimeout'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();function j(l){var m=false;return function(){if(!m){l();m=true;}};}h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={seen:false};this.$UFISeenTracker1=j(this.logSeen.bind(this));}k.prototype.render=function(){if(this.state.seen)return this.props.children;return (c('React').createElement(c('OnVisible.react'),{onVisible:this.$UFISeenTracker1},this.props.children));};k.prototype.logSeen=function(){c('setTimeout')(function(){return this.setState({seen:true});}.bind(this),100);c('BanzaiODS').bumpEntityKey('unsampled_feedback','rendered_ufi_client');};f.exports=k;},null);
__d('UFIComponentLogger.react',['CommentsTimeSpentTracker.react','React','UFISeenTracker.react','UFIConfig'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.children,n=l.feedback,o=l.hasComments,p=l.isPermalink,q=l.orderingMode,r=l.viewerHasInteractedWithComments;if(!m)return null;var s=c('React').createElement('div',null,m);if(o&&c('UFIConfig').logCommentsTimespent){var t=r||p;s=c('React').createElement(c('CommentsTimeSpentTracker.react'),{orderingMode:q,viewerHasInteracted:t,targetFBID:n.commentstargetfbid},s);}if(c('UFIConfig').logWhetherUFISeen)s=c('React').createElement(c('UFISeenTracker.react'),null,s);return s;};function k(){h.apply(this,arguments);}k.propTypes={feedback:j.object.isRequired,hasComments:j.bool.isRequired,isPermalink:j.bool.isRequired,orderingMode:j.string.isRequired,viewerHasInteractedWithComments:j.bool.isRequired};f.exports=k;},null);
__d('UFIComponents',['React','UFICommentFilters'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=function(k){if(!k)return false;if(k.props.comment&&c('UFICommentFilters').isDeleted(k.props.comment))return false;return true;},i=function(k,l,m){var n=void 0,o=m?k.length-1:0,p=m?-1:k.length,q=m?-1:1;for(n=o;n!=p;n+=q)if(h(k[n])){l(k,n);return k;}return k;},j={applyToUFIComponents:function(k,l,m){k=i(k,function(n,o){n[o]=c('React').cloneElement(n[o],l);},false);k=i(k,function(n,o){n[o]=c('React').cloneElement(n[o],m);},true);return k;}};f.exports=j;},null);
__d('UFIContainer.react',['cx','React'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:(!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')},this.props.children));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={isParentLiveDeleted:k.bool,isReplyList:k.bool};f.exports=l;},null);
__d("XUFICommentTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null);
__d('UFICommentCount.react',['cx','fbt','ActorURI','NumberFormat','React','UFIConfig','XUFICommentTooltipController'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.$UFICommentCount1=function(){var n=this.props.commentCount,o=n==1;if(typeof n==='number'){var p=c('UFIConfig').numberDelimiter;n=c('NumberFormat').formatIntegerWithDelimiter(n,p);}return i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',n),i['enum'](o?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);};m.prototype.render=function(){var n=this.props.feedback,o=n.entidentifier,p=n.actorforpost,q=this.$UFICommentCount1(),r="fcg",s=null;if(o&&p)s=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',o).getURI(),p);if(s){return (c('React').createElement('span',{'aria-live':'polite',className:r,'data-hover':'tooltip','data-tooltip-uri':s},q));}else return c('React').createElement('span',{className:r},q);};function m(){j.apply(this,arguments);}m.propTypes={commentCount:l.oneOfType([l.number,l.string]).isRequired,feedback:l.object.isRequired};f.exports=m;},null);
__d('UFILikeSentenceText.react',['ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;function k(m,n,o,p){if(p.count!=null){var q=c('ProfileBrowserTypes').LIKES,r={id:m.targetfbid,actorid:m.actorid},s=[],t;for(var u=0;u<n.length;u++)if(!n[u].count){t=n[u];var v=t.entity;s.push(v.id);}var w=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:m.targetfbid,comment_from:m.actorforpost,seen_user_fbids:s.length?s:true});w=c('ActorURI').create(w,m.actorforpost);var x,y;if(m.displayreactions){x=c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',m.entidentifier).getURI();x=c('ActorURI').create(x,m.actorforpost);y=c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',m.entidentifier).getURI();y=c('ActorURI').create(y,m.actorforpost);}else{x=c('ProfileBrowserLink').constructDialogURI(q,r).toString();y=c('ProfileBrowserLink').constructPageURI(q,r).toString();}return (c('React').createElement('a',{'data-testid':'n_other_people_link',className:'UFINoWrap',rel:'dialog',ajaxify:x,href:y,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':w.toString(),role:'button'},o));}else{var z={source_feedback_owner_id:m.ownerid,source_feedback_identifier:m.entidentifier};return c('HovercardLinkInterpolator')(o,p,null,null,'ufi',z);}}h=babelHelpers.inherits(l,c('React').Component);i=h&&h.prototype;l.prototype.render=function(){'use strict';var m=this.props.feedback,n=this.props.likeSentenceData,o,p=n.aggregatedranges||n.aggregated_ranges;o=k;o=o.bind(null,m,n.ranges);return (c('React').createElement(c('TextWithEntities.react'),{interpolator:o,ranges:n.ranges,aggregatedRanges:p,text:n.text}));};function l(){'use strict';h.apply(this,arguments);}l.propTypes={contextArgs:j.object.isRequired,feedback:j.object.isRequired,likeSentenceData:j.object.isRequired};f.exports=l;},null);
__d('UFIReactionsSocialSentence.react',['cx','ActorURI','Bootloader','BanzaiLogger','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsProfileBrowserUtils','XUFIReactionTooltipController','XUFIReactionsSocialSentenceTooltipController'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l,m){'use strict';j.constructor.call(this,l,m);this.onSentenceClick=this.onSentenceClick.bind(this);}k.prototype.$UFIReactionsSocialSentence1=function(l){'use strict';var m=l.actorforpost,n=l.entidentifier,o=c('UFIConfig').reactionsHasTooltipBreakdown?c('XUFIReactionsSocialSentenceTooltipController'):c('XUFIReactionTooltipController');return {'data-hover':'tooltip','data-tooltip-uri':c('ActorURI').create(o.getURIBuilder().setString('ft_ent_identifier',n).getURI(),m)};};k.prototype.onSentenceClick=function(event){'use strict';var l=this.props.feedback,m=event.currentTarget;c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'social_sentence'});var n=c('UFIReactionsProfileBrowserUtils').getDialogURI(l).toString();c('Bootloader').loadModules(["AsyncDialog"],function(o){o.bootstrap(n,m,'dialog');},'UFIReactionsSocialSentence.react');event.preventDefault();};k.prototype.render=function(){'use strict';var l=c('UFIConfig').reactionsMultilineSocialSentence,m=this.props.feedback,n=m.likesentences,o=m.reactioncount,p=m.reactioncountreduced,q=m.reactionsentences,r=m.viewerreaction,s=r?o>3:o>2;if(c('UFIConfig').reactionsHasTooltipBreakdown)s=o>1;var t=null;if(s)t=this.$UFIReactionsSocialSentence1(m);var u=null;if(q&&q.current){u=q.current.text;}else if(n&&n.current){u=n.current.text;}else u=p;var v=void 0;if(u)v=c('React').createElement('span',{className:"_4arz"},c('React').createElement('span',t,u));var w=void 0;if((!l||!v)&&m.reactioncount)w=c('React').createElement('span',{'aria-hidden':v,className:"_1g5v"},c('React').createElement('span',t,m.reactioncountreduced));return (c('React').createElement('div',{className:"_ipp"+(l?' '+"_4m1f":'')},c('React').createElement(c('UFIReactionsBlingTokens.react'),{className:"_4ar- _ipn",contextArgs:this.props.contextArgs,feedback:m,max:3},c('React').createElement('a',{className:"_2x4v",href:c('UFIReactionsProfileBrowserUtils').getPageURI(m),onClick:this.onSentenceClick,rel:'ignore'},w,v))));};f.exports=k;},null);
__d("XUFIGroupSeenByProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/browser\/",{id:{type:"Int",required:true}});},null);
__d("XUFIGroupSeenByProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/dialog\/",{id:{type:"Int",required:true},__asyncDialog:{type:"Int"}});},null);
__d('UFILikeSentence.react',['cx','invariant','fbt','ActorURI','Bootloader','LeftRight.react','React','UFICommentCount.react','UFILikeSentenceText.react','UFIReactionsSocialSentence.react','URI','XUFIGroupSeenByProfileBrowserController','XUFIGroupSeenByProfileDialogController','isEmpty','joinClasses'],function a(b,c,d,e,f,g,h,i,j){var k,l;if(c.__markCompiled)c.__markCompiled();var m=c('React').PropTypes,n=null;k=babelHelpers.inherits(o,c('React').Component);l=k&&k.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return p=(q=l.constructor).call.apply(q,[this].concat(s)),this.state={bootloadedSelectorModule:false,hasSelectorModule:!!n},this.$UFILikeSentence1=function(u){if(u.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){!!u.contextArgs.entstream?i(0):void 0;c('Bootloader').loadModules(["UFIOrderingModeSelectorContainer.react"],function(v){n=v;this.setState({hasSelectorModule:true});}.bind(this),'UFILikeSentence.react');this.setState({bootloadedSelectorModule:true});}}.bind(this),this.$UFILikeSentence2=function(){var u=this.props.feedback,v=u.likesentences,w=v||{},x=w.current;return x||{};}.bind(this),this.$UFILikeSentence3=function(){var u=this.props,v=u.feedback,w=u.contextArgs;if(!this.constructor.rendersSocialSentence(u))return null;if(w.hasReactions)return (c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:v,contextArgs:w}));var x=this.$UFILikeSentence2();if(x&&x.text)return (c('React').createElement('div',{className:"UFILikeSentenceText"},c('React').createElement(c('UFILikeSentenceText.react'),{contextArgs:w,feedback:v,likeSentenceData:x})));return null;}.bind(this),this.$UFILikeSentence4=function(){var u=this.props.displayCommentCount;if(u&&u!=='0')return (c('React').createElement(c('UFICommentCount.react'),{commentCount:u,feedback:this.props.feedback}));return null;}.bind(this),p;}o.rendersSocialSentence=function(p){'use strict';var q=p.feedback,r=q.likesentences,s=q.reactionsentences;return r&&!c('isEmpty')(r.current)||s&&s.current&&s.current.text;};o.prototype.componentWillMount=function(){'use strict';this.$UFILikeSentence1(this.props);};o.prototype.componentWillReceiveProps=function(p){'use strict';this.$UFILikeSentence1(p);};o.prototype.render=function(){'use strict';var p=this.props.feedback,q=this.props.contextArgs.entstream,r=c('joinClasses')("UFIRow"+(p.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.contextArgs.hasReactions?' '+"_4_dr":'')),s=this.$UFILikeSentence3(this.props),t=null;if(p.seencount>0&&!q){var u;if(p.seenbyall){u=j._("Seen by everyone");}else u=p.seencount==1?j._("Seen by 1"):j._("Seen by {count}",[j.param('count',p.seencount)]);var v=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:p.entidentifier}),w=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',p.entidentifier).getURI();w=c('ActorURI').create(w,p.actorforpost);var x=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',p.entidentifier).getURI();x=c('ActorURI').create(x,p.actorforpost);t=c('React').createElement('a',{rel:'dialog',ajaxify:w,href:x,'data-hovercard':v.toString(),className:"UFISeenCount"+(' '+"UFISeenCountRight")},c('React').createElement('span',{className:'UFISeenCountIcon'}),u);if(!s)s=c('React').createElement('div',null);}else if(this.props.showOrderingModeSelector&&this.state.hasSelectorModule&&n){t=c('React').createElement(n,{feedback:p,ufiInstanceID:this.props.contextArgs.instanceid});if(!s)s=c('React').createElement('div',null);}else{var y=this.$UFILikeSentence4();if(y)t=y;}var z=null;if(s){z=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},s,t);}else z=t;return (c('React').createElement('div',{className:r},z));};o.propTypes={contextArgs:m.object.isRequired,feedback:m.object.isRequired,isFirstComponent:m.bool,isLastComponent:m.bool,onOrderingModeChange:m.func,showOrderingModeSelector:m.bool};o.contextTypes={dispatch:m.func};f.exports=o;},null);
__d('UFILiveTypingStore',['FluxReduceStore','UFIActionTypes','UFISharedDispatcher'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.getNewFeedbackState=function(k){switch(k){case c('UFIActionTypes').STORY.FRIEND_TYPING:return 'friend';case c('UFIActionTypes').STORY.SOMEONE_TYPING:return 'someone';case c('UFIActionTypes').STORY.TYPING_STOPPED:return false;default:return null;}};j.prototype.getInitialState=function(){return {};};j.prototype.reduce=function(k,l){var m=j.getNewFeedbackState(l.type);if(m!==null){var n;k=babelHelpers['extends']({},k,(n={},n[l.ftentidentifier]=m,n));}return k;};j.prototype.isFriendTyping=function(k){return this.getState()[k]==='friend';};function j(){h.apply(this,arguments);}f.exports=new j(c('UFISharedDispatcher'));},null);
__d('UFILiveTypingIndicatorContainer.react',['BootloadOnRender.react','FluxContainer','JSResource','LazyComponent.react','React','UFIConfig','UFILiveTypingStore'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').Component;h=babelHelpers.inherits(k,j);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.state={everHadTyping:false,hasTyping:false,friendTyping:false};}k.getStores=function(){return [c('UFILiveTypingStore')];};k.calculateState=function(){var l=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],m=arguments[1];if(!c('UFIConfig').typingIndicator.showInline)return {everHadTyping:false,hasTyping:false,friendTyping:false};var n=!!c('UFILiveTypingStore').getState()[m.feedbackTargetID];return {everHadTyping:l.everHadTyping||n,hasTyping:n,friendTyping:c('UFILiveTypingStore').isFriendTyping(m.feedbackTargetID)};};k.prototype.shouldComponentUpdate=function(l,m){return l.feedbackTargetID!=this.props.feedbackTargetID||m.everHadTyping!=this.state.everHadTyping||m.hasTyping!=this.state.hasTyping;};k.prototype.render=function(){if(this.state.everHadTyping)return (c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFILiveTypingIndicator.react').__setRef('UFILiveTypingIndicatorContainer.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),babelHelpers['extends']({},this.props,this.state))}));return null;};f.exports=c('FluxContainer').create(k,{pure:true,withProps:true});},null);
__d('UFIPager.react',['cx','LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','joinClasses'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=j.constructor).call.apply(n,[this].concat(p)),this.onPagerClick=function(r){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();r.nativeEvent.prevent();}.bind(this),m;}l.prototype.render=function(){'use strict';var m=this.onPagerClick,n=c('joinClasses')("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"_4oep")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),o=null;if(this.props.isLoading)o=c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'});var p=c('React').createElement('a',{className:'UFIPagerLink',onClick:m,href:'#',role:'button'},this.props.pagerLabel,o),q="fcg"+(' '+"UFIPagerCount"),r=c('React').createElement('span',{className:q},this.props.countSentence),s;if(this.props.contextArgs.entstream||!this.props.isReply){s=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},p,r);}else s=c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('a',{className:'UFIPagerIcon',onClick:m,href:'#',role:'button'}),p,r);return (c('React').createElement('div',{className:n,'data-ft':this.props['data-ft']},s));};l.propTypes={contextArgs:k.object.isRequired,pagerLabel:k.string.isRequired,'data-ft':k.string,countSentence:k.string,isFirstCommentComponent:k.bool,isFirstComponent:k.bool,isLastCommentComponent:k.bool,isLastComponent:k.bool,isLoading:k.bool,isReply:k.bool,isUnseen:k.bool,onPagerClick:k.func};f.exports=l;},null);
__d('UFIPagerLabel',['fbt','intlList','NumberFormat'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',VIEW_PREVIOUS_EXPLICIT:'view_previous_explicit',_getReplyLabel:function(j,k){var l;switch(j){case i.VIEW_ONE:return h._("View 1 reply");case i.VIEW_ONE_MORE:return h._("View 1 more reply");case i.VIEW_ALL:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View all {count} replies"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":{"*":"View {count} more replies","268435456":"View {count} more reply"}},[h.param('count',l,[0,k.count]),h.plural(k.count,'number')]);case i.VIEW_MORE:return h._("View more replies");case i.VIEW_PREVIOUS:return h._("View previous replies");case i.VIEW_PREVIOUS_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":{"*":"View {count} previous replies","268435456":"View {count} previous reply"}},[h.param('count',l,[0,k.count]),h.plural(k.count,'number')]);default:return null;}},_getCommentLabel:function(j,k){if(k.commenters)return this._getCommentLabelWithCommentSentence(j,k);var l;switch(j){case i.VIEW_ONE:return h._("View 1 comment");case i.VIEW_ONE_MORE:return h._("View 1 more comment");case i.VIEW_ALL:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View all {count} comments"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":{"*":"View {count} more comments","268435456":"View {count} more comment"}},[h.param('count',l,[0,k.count]),h.plural(k.count,'number')]);case i.VIEW_MORE:return h._("View more comments");case i.VIEW_PREVIOUS_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":{"*":"View {count} previous comments","268435456":"View {count} previous comment"}},[h.param('count',l,[0,k.count]),h.plural(k.count,'number')]);case i.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function(j,k){var l=c('intlList')(k.commenters),m=k.othersCount,n=c('NumberFormat').formatIntegerWithDelimiter(m,k.delimiter),o=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);switch(j){case i.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',l)]);case i.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',l)]);case i.VIEW_ALL:switch(m){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',o,[0,k.count]),h.param('names',l)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',o,[0,k.count]),h.param('names',l)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',o,[0,k.count]),h.param('names',l),h.param('othersCount',n,[0,m])]);}case i.VIEW_MORE_EXPLICIT:case i.VIEW_MORE:switch(m){case 0:return h._("View more comments from {names}",[h.param('names',l)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',l)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',l),h.param('othersCount',n,[0,m])]);}case i.VIEW_PREVIOUS:case i.VIEW_PREVIOUS_EXPLICIT:switch(m){case 0:return h._("View previous comments from {names}",[h.param('names',l)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',l)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',l),h.param('othersCount',n,[0,m])]);}default:return null;}},_getQuestionLabel:function(j,k){var l;switch(j){case i.VIEW_ONE:return h._("View 1 question");case i.VIEW_ONE_MORE:return h._("View 1 more question");case i.VIEW_ALL:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View all {count} questions"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":{"*":"View {count} more questions","268435456":"View {count} more question"}},[h.param('count',l,[0,k.count]),h.plural(k.count,'number')]);case i.VIEW_MORE:return h._("View more questions");case i.VIEW_PREVIOUS:return h._("View previous questions");case i.VIEW_PREVIOUS_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":{"*":"View {count} previous questions","268435456":"View {count} previous question"}},[h.param('count',l,[0,k.count]),h.plural(k.count,'number')]);default:return null;}},getLabel:function(j,k,l,m){if(k){return i._getReplyLabel(j,m);}else if(l){return i._getQuestionLabel(j,m);}else return i._getCommentLabel(j,m);}};f.exports=i;},null);
__d('UFIPagerGenerator',['fbt','invariant','NumberFormat','React','TrackingNodes','UFICommentOrdering','UFIConfig','UFIConstants','UFIPager.react','UFIPagerLabel'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('UFIConstants').UFIPaging,k={isBottomPager:function(l,m){return c('UFICommentOrdering').inverted(m)&&!l;},needsStartOfRangePager:function(l){return l>0;},renderPagers:function(l,m,n,o,p,q){var r,s,t,u=l.deletedCounts[m],v=l.commentCounts[m],w=v-u,x=o-u,y=c('UFIConfig').numberDelimiter,z=m!==l.contextArgs.ftentidentifier,aa=this.isBottomPager(z,l.orderingMode),ba=q||{},ca=ba.forceExplicitPagers,da={topPager:null,bottomPager:null};!!isNaN(w)?i(0):void 0;!!isNaN(x)?i(0):void 0;var ea=l.ranges[m],fa=ea.isLoadingPrev(),ga=ea.isLoadingNext(),ha={delimiter:y,count:0},ia=l.feedback.commentsentenceinfo;if(ia){ha.commenters=ia.explicit_commenter_names;ha.othersCount=ia.other_commenter_count;}var ja=n+o==v;if(v<l.contextArgs.pagesize&&ja||x===0){var ka,r=function(){var na=Math.min(v,l.contextArgs.pagesize);ka=function(){return p(aa?j.BOTTOM:j.TOP,{offset:v-na,length:na});};var oa=void 0;if(x===0){if(w==1){oa=c('UFIPagerLabel').VIEW_ONE;}else{ha.count=w;oa=c('UFIPagerLabel').VIEW_ALL;}}else if(w-x==1){oa=c('UFIPagerLabel').VIEW_ONE_MORE;}else{oa=c('UFIPagerLabel').VIEW_MORE_EXPLICIT;ha.count=w-x;}var pa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.VIEW_ALL_COMMENTS),qa=c('UFIPagerLabel').getLabel(oa,z,l.feedback.isqanda,ha),ra=c('React').createElement(c('UFIPager.react'),{key:'allPager'+m,ref:aa?'topLevelBottomPager':null,contextArgs:l.contextArgs,isUnseen:l.feedback.hasunseencollapsed,isLoading:aa?ga:fa,isReply:z,pagerLabel:qa,onPagerClick:ka,'data-ft':pa});if(aa){da.bottomPager=ra;}else da.topPager=ra;return {v:da};}();if(typeof r==="object")return r.v;}var la=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_MORE,z,l.feedback.isqanda,ha),ma=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_PREVIOUS,z,l.feedback.isqanda,ha);if(this.needsStartOfRangePager(n))(function(){var na=Math.max(n-l.contextArgs.pagesize,0),oa=n+o-na,pa=null,qa=n;if(ca&&qa>0){var ra=aa?c('UFIPagerLabel').VIEW_MORE_EXPLICIT:c('UFIPagerLabel').VIEW_PREVIOUS_EXPLICIT;pa=c('UFIPagerLabel').getLabel(ra,z,l.feedback.isqanda,babelHelpers['extends']({},ha,{count:qa}));}var sa=void 0;if(!pa&&(!z||x>1)){var ta=c('NumberFormat').formatIntegerWithDelimiter(x,y),ua=c('NumberFormat').formatIntegerWithDelimiter(w,y);sa=h._("{countshown} of {totalcount}",[h.param('countshown',ta),h.param('totalcount',ua)]);}var va=function(){return p(aa?j.BOTTOM:j.TOP,{offset:na,length:oa});};if(aa){da.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager'+m,ref:!z?'topLevelBottomPager':null,contextArgs:l.contextArgs,isLoading:fa,isReply:z,pagerLabel:pa||la,onPagerClick:va,countSentence:sa});}else da.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+m,contextArgs:l.contextArgs,isLoading:fa,isReply:z,pagerLabel:pa||ma,onPagerClick:va,countSentence:sa});})();if(n+o<v)(function(){var na=Math.min(o+l.contextArgs.pagesize,v-n),oa=function(){return p(aa?j.TOP:j.BOTTOM,{offset:n,length:na});},pa=null,qa=w-(x+n);if(ca&&qa>0){var ra=aa?c('UFIPagerLabel').VIEW_PREVIOUS_EXPLICIT:c('UFIPagerLabel').VIEW_MORE_EXPLICIT;pa=c('UFIPagerLabel').getLabel(ra,z,l.feedback.isqanda,babelHelpers['extends']({},ha,{count:qa}));}if(aa){da.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+m,contextArgs:l.contextArgs,isLoading:ga,isReply:z,pagerLabel:pa||ma,onPagerClick:oa});}else da.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager',ref:!z?'topLevelBottomPager':null,contextArgs:l.contextArgs,isLoading:ga,isReply:z,pagerLabel:pa||la,onPagerClick:oa});})();return da;}};f.exports=k;},null);
__d('UFIReplySocialSentence.react',['cx','fbt','Badge.react','Image.react','LiveTimer','React','Timestamp.react','UFIConstants','UFIImageBlock.react','Middot.react','joinClasses'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=43200;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;n.prototype.render=function(){'use strict';var o=this.props.isLoading?"UFIReplySocialSentenceLoading":'',p=c('joinClasses')("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),q,r;if(this.props.isExpanded){q=this.props.replies>1?i._({"*":"Hide {count} Replies"},[i.param('count',this.props.replies,[0])]):i._("Hide 1 Reply");}else{q=this.props.replies>1?i._({"*":"{count} Replies"},[i.param('count',this.props.replies,[0])]):i._("1 Reply");if(this.props.timestamp){var s=c('LiveTimer').getApproximateServerTime()/1000-this.props.timestamp.time;if(s<m||this.props.orderingMode==c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY)r=c('React').createElement('span',{className:"fcg"},c('React').createElement(c('Middot.react'),{key:'middot-timestamp'}),c('React').createElement(c('Timestamp.react'),{shorten:this.props.contextArgs.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var t=this.props.author,u=t&&!this.props.isExpanded,v=null,w;if(u){v=c('React').createElement(c('Image.react'),{alt:'',src:t.thumbSrc,className:"img UFIActorImage _54ru"});var x=null;if(this.props.showVerified)x=c('React').createElement(c('Badge.react'),{size:'xsmall',type:'verified'});if(t.i18nGender){w=[i._({"*":"{author}{verified_badge} replied"},[i.param('author',t.name,[1,t.i18nGender]),i.param('verified_badge',x)])];}else w=[i._("{author}{verified_badge} replied",[i.param('author',t.name),i.param('verified_badge',x)])];w.push(c('React').createElement(c('Middot.react'),{key:'middot-author'}),q);}else w=q;return (c('React').createElement('div',{className:p,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('div',{className:(u?"UFIReplyActorPhotoWrapper":'')+(u?' '+"UFIReplyActor":'')},c('React').createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(u?' '+"UFIIconWithActor":'')}),v),c('React').createElement('span',{className:o},c('React').createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},w),r)))));};function n(){'use strict';j.apply(this,arguments);}n.propTypes={author:l.object,contextArgs:l.object.isRequired,'data-ft':l.string,isExpanded:l.bool,isFirstComponent:l.bool,isLastComponent:l.bool,isLoading:l.bool,onClick:l.func,orderingMode:l.string,replies:l.number,showVerified:l.bool,timestamp:l.object};f.exports=n;},null);
__d("XUFIShareTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/share\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null);
__d('UFIShareRow.react',['cx','fbt','ActorURI','Layout.react','NumberFormat','React','UFICommentCount.react','UFIConfig','UFIImageBlock.react','XUFIShareTooltipController','URI','joinClasses'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('Layout.react').Column,m=c('Layout.react').FillColumn,n=c('React').PropTypes;j=babelHelpers.inherits(o,c('React').Component);k=j&&j.prototype;function o(){var p,q;'use strict';for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return p=(q=k.constructor).call.apply(q,[this].concat(s)),this.$UFIShareRow1=function(){var u=this.props,v=u.feedback,w=u.shownCommentCount;if(w&&w!=0)return (c('React').createElement(c('UFICommentCount.react'),{feedback:v,commentCount:w}));return null;}.bind(this),p;}o.prototype.render=function(){'use strict';var p=this.props.feedback.sharefbid||this.props.feedback.targetfbid,q=new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:p}),r=new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:p}),s=this.props.contextArgs.loggedOutLinkConfig;if(s&&s.showShareLink)q=s.shareAjaxifyURI;var t;if(this.props.feedback.sharecount>1){var u=c('NumberFormat').formatIntegerWithDelimiter(this.props.feedback.sharecount,c('UFIConfig').numberDelimiter);t=i._({"*":"{count} shares"},[i.param('count',u,[0,this.props.feedback.sharecount])]);}else t=i._("1 share");var v=c('joinClasses')("UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),w=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost),x=c('React').createElement('a',{className:'UFIShareLink',rel:'dialog','data-hover':'tooltip','data-tooltip-uri':w,ajaxify:q.toString(),href:r.toString()},t),y=this.$UFIShareRow1();if(y)x=c('React').createElement(c('Layout.react'),null,c('React').createElement(m,null,x),c('React').createElement(l,null,y));return (c('React').createElement('div',{className:v},x));};o.propTypes={contextArgs:n.object.isRequired,feedback:n.object.isRequired,isFirstComponent:n.bool,isLastComponent:n.bool,shownCommentCount:n.oneOfType([n.number,n.string])};f.exports=o;},null);
__d('UFISpamPlaceholder.react',['fbt','React','XUISpinner.react'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){'use strict';if(this.props.isLoading)return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('span',{className:'UFISpamCommentWrapper'},c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'}))));return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':h._("Show comments marked as spam")},c('React').createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':h._({"*":"{count} hidden"},[h.param('count',this.props.numHidden,[0])]),className:'UFISpamCommentWrapper'},c('React').createElement('i',{className:'placeholderIcon'})))));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={numHidden:k.number.isRequired,isLoading:k.bool,onClick:k.func};f.exports=l;},null);
__d('UFISpamStore',['FluxReduceStore','UFIActionTypes','UFISharedDispatcher','UFIUserActions'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length;};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIActionTypes').STORY.SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return (k[m]=true);});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFISharedDispatcher'));},null);
__d('UFISpamPlaceholderContainer.react',['FluxContainer','React','UFISharedDispatcher','UFISpamPlaceholder.react','UFISpamStore','UFIStoryAction'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('UFISpamStore')];};j.calculateState=function(k,l){var m=l.ftentidentifier,n=l.viewas,o=l.comment,p=l.parentCommentID;return {isLoading:!!c('UFISpamStore').getState()[o.id],numHidden:o.spamCommentIDs.length,onClick:function(){return c('UFISharedDispatcher').dispatch(c('UFIStoryAction').spamFetched(m,n,o.spamCommentIDs,p));}};};j.prototype.shouldComponentUpdate=function(k,l){return k.ftentidentifier!=this.props.ftentidentifier||k.viewas!=this.props.viewas||k.parentCommentID!=this.props.parentCommentID||l.isLoading!=this.state.isLoading||l.numHidden!=this.state.numHidden;};j.prototype.render=function(){return c('React').createElement(c('UFISpamPlaceholder.react'),this.state);};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{pure:true,withProps:true});},null);
__d('StaticUFI.react',['csx','cx','Arbiter','BlueBar','BootloadOnRender.react','CommentPrelude','DOM','Event','FbFeedCommentUFIScroller','FBFeedLocations','JSResource','LazyComponent.react','LogHistory','Parent','React','ReactDOM','SearchableEntry','TrackingNodes','UFIAddComment.react','UFIAddCommentLink.react','UFIComment.react','UFICommentFilters','UFICommentHeader.react','UFICommentOrdering','UFICommentDisabledNotice.react','UFICommentScrollableArea.react','UFIComponentLogger.react','UFIComponents','UFIConfig','UFIConstants','UFIContainer.react','UFIInstanceState','UFILikeSentence.react','UFILiveTypingIndicatorContainer.react','UFIPagerGenerator','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholderContainer.react','UFIStoryAction','URI','XUISpinner.react','emptyFunction','getElementPosition','getElementRect','getUnboundedScrollPosition','shallowEqual','throttle'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('UFIConstants').UFIFeedbackSourceType,k=c('UFIConstants').UFIStatus,l=c('React').PropTypes,m=c('React').createElement('div',{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},c('React').createElement(c('XUISpinner.react'),{size:'large'})),n=c('React').createElement('div',{className:"_xtv",role:'presentation'},c('React').createElement('i',null)),o=c('React').createClass({displayName:'StaticUFI',contextTypes:{dispatch:l.func},getInitialState:function(){var p=this.props.focusReply;return {focusReply:p,viewerHasClickedCommentComposer:false,viewerHasClickedSeeMore:false};},getDefaultProps:function(){return {commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,viewerHasInteractedWithComments:false,loadingSpamIDs:{}};},componentDidMount:function(){c('Arbiter').inform('UFI/displayDone-'+this.props.contextArgs.instanceid);if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var p=c('throttle')(this.loadMoreComments,20);this._scrollEventListener=c('Event').listen(window,'scroll',p);this._resizeEventListener=c('Event').listen(window,'resize',p);}if(c('BlueBar').hasFixedBlueBar())this.setState({oldBoundingClientRect:c('getElementRect')(c('ReactDOM').findDOMNode(this))});this._resolveFocus();},componentWillReceiveProps:function(p){if(this.props.focusReply!==p.focusReply)this.setState({focusReply:p.focusReply});if(c('BlueBar').hasFixedBlueBar())this.setState({oldBoundingClientRect:c('getElementRect')(c('ReactDOM').findDOMNode(this))});},componentWillUnmount:function(){if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},shouldComponentUpdate:function(p,q){var r=this.props,s=this.state;return (!c('shallowEqual')(s,q)||!c('shallowEqual')(s.loadingSpamIDs,q.loadingSpamIDs)||!c('shallowEqual')(r,p)||!c('shallowEqual')(r.feedback,p.feedback)||!c('shallowEqual')(r.repliesMap,p.repliesMap)||!c('shallowEqual')(r.commentCounts,p.commentCounts)||!c('shallowEqual')(r.deletedCounts,p.deletedCounts)||!c('shallowEqual')(r.availableComments,p.availableComments)||!c('shallowEqual')(r.ranges,p.ranges)||!c('shallowEqual')(r.authorProfiles,p.authorProfiles)||!c('shallowEqual')(r.commentPermalinks,p.commentPermalinks)||!c('shallowEqual')(r.canAddCommentMap,p.canAddCommentMap)||!c('shallowEqual')(r.canReplyMap,p.canReplyMap)||!c('shallowEqual')(r.isActiveLoading,p.isActiveLoading)||!c('shallowEqual')(r.repliesExpandedMap,p.repliesExpandedMap));},componentDidUpdate:function(p,q){var r=p.source===j.NEWS_FEED,s=r&&c('BlueBar').hasFixedBlueBar()?this._getOffsetOfRender(this.state.oldBoundingClientRect):null;this._resolveFocus(p);c('Arbiter').inform('ufi/didUpdate',{offsetY:s});},_getOffsetOfRender:function(p){if(!p)return null;var q=c('getElementPosition')(c('BlueBar').getMaybeFixedRoot()).height;if(p.bottom<q){var r=p.bottom-p.top;return c('ReactDOM').findDOMNode(this).offsetHeight-r;}return null;},_getCommentCountForSentence:function(){var p=this.props,q=p.contextArgs,r=p.commentCounts,s=p.deletedCounts,t=p.feedback,u=t.commentcountreduced,v=q.ftentidentifier,w=null;if(this._hasComments())if(u&&isNaN(u)){w=u;}else w=r[v]-s[v];return w;},_resolveFocus:function(p){if(this.props.loadingComments)return;if(this.props.commentsToggling){c('CommentPrelude').expand(c('ReactDOM').findDOMNode(this),false,'ufi.react');this.onComment();c('UFIInstanceState').updateState(this.props.contextArgs.instanceid,'commentsToggling',false);}if(this.state.focusReply){var q=this.state.focusReply,r=q.replyID,s=q.initiatorComment;if(!(r in this.refs))return;var t=this.refs[r]&&this.refs[r].refs&&this.refs[r].refs.mentionsinput;if(!t)return;t.focus();this.setState({focusReply:null});if(!s)return;var u=t.hasEnteredText(),v=s.author===this.props.feedback.actorforpost,w=!!s.parentcommentid;if(!u&&!v&&w)t.insertMention(this._createMentionEntry(s.author));}},_createMentionEntry:function(p){var q=this.props.authorProfiles[p],r=q.type;return new (c('SearchableEntry'))({uniqueID:q.id,title:q.name,type:r==='friend'?'user':r});},_isAds:function(){return this.props.source===j.ADS;},_isLiveVideo:function(){return this.props.source===j.LIVE_VIDEO;},_isSnowlift:function(){var p=this.props.contextArgs,q=p.feedcontext&&JSON.parse(p.feedcontext);return !!(q&&q.is_snowlift);},_showsLikeSentenceOrderingModeSelector:function(){var p=this.props,q=p.hideOrderingModeSelector,r=p.feedback,s=p.commentCounts,t=p.contextArgs;return (!q&&r.orderingmodes&&s[t.ftentidentifier]>=c('UFIConstants').minCommentsForOrderingModeSelector);},_showsLikeSentenceCommentCount:function(){if(!c('UFIConfig').allowCommentCountInSocialSentenceRow)return false;if(!this._hasComments()||this._isBlacklistedFromHavingLikeSentenceRow()||this._showsLikeSentenceOrderingModeSelector()||this._showsLikeSentenceSeenBy()||this._isSnowlift())return false;var p=this._getCommentCountForSentence();if(!p||p==='0')return false;if(this._hasValidSocialSentenceText()){return true;}else if(this._hasShareRow()){return false;}else return (this.props.hasPagedToplevel||!this._isShowingAllTopLevelComments());},_isShowingAllTopLevelComments:function(){var p=this.props,q=p.contextArgs,r=p.ranges,s=q.ftentidentifier,t=r[s].getLength();return this._isShowingAllComments(s,t);},_isShowingAllComments:function(p,q){var r=this.props.commentCounts;return r[p]==q;},_showsLikeSentenceSeenBy:function(){var p=this.props,q=p.contextArgs,r=p.feedback;return r.seencount>0&&!q.entstream;},_hasValidSocialSentenceText:function(){return c('UFILikeSentence.react').rendersSocialSentence(this.props);},_isBlacklistedFromHavingLikeSentenceRow:function(){var p=this.props,q=p.contextArgs,r=p.feedback;return (this._isAds()||this._isLiveVideo()||q.search||this.hasReactions(r,q));},_hasLikeSentenceRow:function(){if(this._isBlacklistedFromHavingLikeSentenceRow())return false;return (this._hasValidSocialSentenceText()||this._showsLikeSentenceSeenBy()||this._showsLikeSentenceOrderingModeSelector()||this._showsLikeSentenceCommentCount());},_hasShares:function(){var p=this.props,q=p.contextArgs,r=p.feedback;if(this._isAds())return false;return (q.showshares&&r.sharecount&&!this.hasReactions(r,q));},_hasShareRow:function(){return (this._hasShares()&&!this.props.contextArgs.entstream);},_hasComments:function(){if(this._isAds())return false;var p=this.props.availableComments;return !!(p&&p.length);},_hasAddCommentView:function(){var p=this.props,q=p.canAddCommentMap,r=p.contextArgs,s=p.feedback;return (s.cancomment&&r.showaddcomment&&s.actorforpost&&q[r.ftentidentifier]);},_hasAddCommentLink:function(){return (this._hasAddCommentView()&&this._hasCommentOrderInverted()&&this.props.hasPagedToplevel);},_hasAddCommentDisabledNotice:function(){var p=this.props.feedback;return p.arecommentsdisabled===true&&p.cancomment===false;},_isStreamingRenderMode:function(){return this.props.orderingMode===c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING;},_showsShareRowCommentCount:function(){if(!this._hasShareRow())return false;var p=this.props.contextArgs.isPermalink,q=null;if(!this._showsLikeSentenceCommentCount()&&(p||c('UFIConfig').allowCommentCountInSocialSentenceRow))q=this._getCommentCountForSentence();return q&&q!='0';},_renderShareRow:function(){if(!this._hasShareRow())return null;var p=this.props,q=p.contextArgs,r=p.feedback,s=this._showsShareRowCommentCount()?this._getCommentCountForSentence():null;return (c('React').createElement(c('UFIShareRow.react'),{contextArgs:q,feedback:r,shownCommentCount:s}));},_renderLikeSentence:function(){var p=this.props,q=p.feedback,r=p.contextArgs,s=this._showsLikeSentenceCommentCount()?this._getCommentCountForSentence():null,t=this._hasLikeSentenceRow();if(t)return (c('React').createElement(c('UFILikeSentence.react'),{contextArgs:r,feedback:q,showOrderingModeSelector:this._showsLikeSentenceOrderingModeSelector(),key:'ufi_like_sentence',displayCommentCount:s}));return null;},render:function(){var p=this.props,q=p.feedback,r=p.contextArgs,s=this._hasAddCommentDisabledNotice(),t=this._hasShares(),u=this._renderLikeSentence(),v=!!u,w=s?c('React').createElement(c('UFICommentDisabledNotice.react'),{feedback:p.feedback}):null,x=this._renderShareRow();if(p.loadingComments)return (c('React').createElement(c('UFIContainer.react'),null,u,x,m));var y=this._hasComments(),z=p.ranges[r.ftentidentifier],aa=p.loggingOffset-z.getOffset(),ba=y?this.renderCommentArray(p.availableComments,aa,false,null):null,ca=null,da=null,ea=q.cancomment,fa=v||t||y||ea,ga=fa?c('React').createElement(c('UFICommentHeader.react'),null):null;if(this._hasAddCommentView()||r.loggedOutLinkConfig&&r.loggedOutLinkConfig.showAddComment){var ha=this._shouldShowCommentInput(r,y);r.orderingmodes=q.orderingmodes;if(ha){ca=c('React').createElement(c('UFILiveTypingIndicatorContainer.react'),{contextArgs:r,feedbackTargetID:q.targetfbid});da=c('React').createElement(c('UFIAddComment.react'),{viewerActorID:q.actorforpost,replyCommentID:null,targetID:q.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:q.mentionsdatasource,showSendOnEnterTip:q.showsendonentertip,allowVideoAttachments:q.allowvideoattachments&&!this._isStreamingRenderMode(),allowPhotoAttachments:q.allowphotoattachments&&!this._isStreamingRenderMode(),allowStickerAttachments:q.allowstickerattachments&&!this._isStreamingRenderMode(),contextArgs:r,subtitle:q.subtitle,isQAndA:q.isqanda,markViewerHasInteracted:this.state.viewerHasClickedCommentComposer?c('emptyFunction'):function(){return this.setState({viewerHasClickedCommentComposer:true});}.bind(this),allowCommentMarkdown:q.iscommentmarkdowneligible});}}var ia=this.renderPagers(r.ftentidentifier,false,p.ranges[r.ftentidentifier].getOffset(),p.ranges[r.ftentidentifier].getLength()),ja=ia.topPager,ka=ia.bottomPager,la=this._hasCommentOrderInverted()?ca:null,ma=this._hasCommentOrderInverted()?null:ca,na=c('UFIComponents').applyToUFIComponents([la,ja].concat(ba,[ka,ma]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),oa=na.slice(0,2);la=oa[0];ja=oa[1];var pa=na.slice(-2);ka=pa[0];ma=pa[1];ba=na.slice(2,-2);var qa=this._hasCommentOrderInverted()?da:null,ra=this._hasCommentOrderInverted()?null:da,sa=this._hasAddCommentLink()?c('React').createElement(c('UFIAddCommentLink.react'),{onClick:this.onComment,isQAndA:q.isqanda}):null,ta=true,ua=null;if(r.showCommentNuxForGroupMallAds)ua=c('React').createElement(c('BootloadOnRender.react'),{loader:c('JSResource')('UFICommentNuxForGroupMallAds.react').__setRef('StaticUFI.react'),placeholder:c('React').createElement('div',null),component:c('React').createElement(c('LazyComponent.react'),{commentNuxContent:r.groupMallAdsCommentNuxContent})});na=c('UFIComponents').applyToUFIComponents([u,x,qa,ja].concat(ba,[ka,ra,sa]),{isFirstComponent:ta},{isLastComponent:true});var va=na.slice(0,4);u=va[0];x=va[1];qa=va[2];ja=va[3];var wa=na.slice(-3);ka=wa[0];ra=wa[1];sa=wa[2];ba=na.slice(4,-3);return (c('React').createElement(c('UFIContainer.react'),null,r.shownub&&fa?n:null,u,x,ga,ua,qa,c('React').createElement(c('UFICommentScrollableArea.react'),{scrollcomments:!!r.scrollcomments,scrollwidth:r.scrollwidth||0},c('React').createElement(c('UFIComponentLogger.react'),{feedback:q,hasComments:y,isPermalink:r.isPermalink,orderingMode:p.orderingMode,viewerHasInteractedWithComments:this.props.viewerHasInteractedWithComments||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},la,ja,ba,ka,ma)),ra,sa,w));},_shouldShowCommentInput:function(p){var q=c('UFIInstanceState').getKeyForInstance(p.instanceid,'isediting');if(q)return false;if(this._hasComments())return true;var r=c('UFIInstanceState').getKeyForInstance(p.instanceid,'addCommentInput'),s=r&&r.expanded;if(s)return true;if(p.feedcontext)var t=JSON.parse(p.feedcontext).location_type;return t!==c('FBFeedLocations').REVIEWS_FEED;},renderCommentArray:function(p,q,r,s){var t=this.props,u=t.contextArgs,v=this.props.feedback;if(!p.length)return [];var w=c('UFIInstanceState').getKeyForInstance(u.instanceid,'editcommentid'),x=c('UFICommentFilters').collectSpamBuckets(p,t.authorProfiles);return x.reduce(function(y,z,aa){if(!z)return y;if(c('UFICommentFilters').isSpam(z)){y.push(c('React').createElement(c('UFISpamPlaceholderContainer.react'),{key:'spam'+z.id,ftentidentifier:u.ftentidentifier,viewas:u.viewas,comment:z,parentCommentID:s}));}else{if(z.id==w){y.push(this.renderEditCommentBox(z));}else{var ba=Math.max(q-aa,0),ca=aa===0,da=aa===x.length,ea=!r&&!v.arecommentsdisabled,fa=r&&!ca;y.push(this.renderComment(z,ba,ca,da,ea,fa));}if(!r&&!c('UFICommentFilters').isDeleted(z)&&!this._isStreamingRenderMode()){var ga=this.renderReplyContainer(z);if(ga)y.push(ga);}}return y;}.bind(this),[]);},renderReplyContainer:function(p){var q=this.props,r=q.commentCounts[p.id],s=q.repliesExpandedMap[p.id],t=!s&&p.interestingReplyId,u=q.ranges[p.id],v=void 0,w=void 0;if(s||p.interestingReplyId){v=q.repliesMap[p.id];w=u.getOffset();if(t){var x=v.filter(function(sa){return sa.id===p.interestingReplyId;});if(x.length!==1){c('LogHistory').getInstance('ufi').error('comment '+p.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');v=null;}else{v=x;w=p.interestingReplyOffset;}}}var y=void 0;if(v){var z=u.getOffset(),aa=u.getLength();if(t){z=w;aa=1;}var ba=this.renderPagers(p.id,true,z,aa),ca=ba.topPager,da=ba.bottomPager,ea=q.loggingOffset-w;y=this.renderCommentArray(v,ea,true,p.id);}var fa=Math.max(r-p.spamreplycount,0),ga=void 0;if(!this._isStreamingRenderMode()&&fa&&(s&&v&&v.length>q.replySocialSentenceMaxReplies||!s&&!v)){var ha=u.isLoadingPrev()||u.isLoadingNext(),ia=s&&!ca&&ha,ja=null;if(p.replyauthors&&p.replyauthors.length)ja=q.authorProfiles[p.replyauthors[0]];ga=c('React').createElement(c('UFIReplySocialSentence.react'),{contextArgs:q.contextArgs,author:ja,replies:s?v.length:fa,timestamp:p.recentreplytimestamp,onClick:function(){return this.context.dispatch(c('UFIStoryAction').toggleReplies(p.id));}.bind(this),isLoading:ia,isExpanded:s,showVerified:q.feedback.showfeaturedreplies,orderingMode:q.orderingMode});}var ka=void 0;if(s)if(p.cancomment&&q.canAddCommentMap[p.id]){var la=false;if(y)for(var ma=y.length-1;ma>=0;ma--)if(y[ma]){la=y[ma].props.isAuthorReply;break;}ka=this.renderReplyComposer(p,!la);}var na=void 0;if(ga||ca||y||da||ka){var oa=c('UFIComponents').applyToUFIComponents([ga,ca].concat(y,[da,ka]),{isFirstComponent:true},{isLastComponent:true}),pa=oa.slice(0,2);ga=pa[0];ca=pa[1];var qa=oa.slice(-2);da=qa[0];ka=qa[1];y=oa.slice(2,-2);var ra=p.status===k.LIVE_DELETED;na=c('React').createElement(c('UFIContainer.react'),{key:'replies'+p.id,isParentLiveDeleted:ra,isReplyList:true},ga,ca,y,da,ka);}return na;},renderReplyComposer:function(p,q){var r=this.props,s=r.contextArgs,t=r.feedback,u=c('UFIInstanceState').getKeyForInstance(s.instanceid,'isediting')&&!p.id;if(u)return null;return (c('React').createElement(c('UFIAddComment.react'),{viewerActorID:t.actorforpost,replyCommentID:p.id,targetID:t.ownerid,initialData:null,ref:'replycomposer-'+p.id,withoutSeparator:q,editingComment:{},isEditing:false,mentionsDataSource:t.mentionsdatasource,showSendOnEnterTip:false,allowVideoAttachments:t.allowvideoattachments&&!this._isStreamingRenderMode(),allowPhotoAttachments:t.allowphotoattachments&&!this._isStreamingRenderMode(),allowStickerAttachments:t.allowstickerattachments&&!this._isStreamingRenderMode(),allowCommentMarkdown:t.iscommentmarkdowneligible,contextArgs:s,subtitle:t.subtitle,isQAndA:t.isqanda}));},renderEditCommentBox:function(p){var q=this.props,r=q.contextArgs,s=q.feedback,t={mentionsinput:r.mentionsinput};return (c('React').createElement(c('UFIAddComment.react'),{key:'comment'+p.id,viewerActorID:s.actorforpost,targetID:s.ownerid,mentionsDataSource:s.mentionsdatasource,contextArgs:t,isEditing:true,editingComment:p,allowVideoAttachments:s.allowvideoattachments,allowPhotoAttachments:s.allowphotoattachments,allowStickerAttachments:s.allowstickerattachments,isQAndA:s.isqanda}));},renderComment:function(p,q,r,s,t,u){var v=this.props,w=v.feedback,x=w.actorforpost===p.author,y=c('UFIInstanceState').getKeyForInstance(v.contextArgs.instanceid,'locallycomposed'),z=p.islocal||y&&y[p.id],aa=w.showremovemenu||w.viewerid===p.author,ba=w.canremoveall&&w.isownerpage&&!x,ca=v.source!=j.INTERN,da=!!p.parentcommentid,ea=true;if(da&&p.parentcommentid in this.props.canReplyMap&&this.props.canReplyMap[p.parentcommentid]!==null)ea=this.props.canReplyMap[p.parentcommentid];var fa=!!p.isfeatured,ga=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.COMMENT,q),ha=new (c('URI'))(v.commentPermalinks[p.id]).addQueryData({comment_tracking:ga}).toString();return (c('React').createElement(c('UFIComment.react'),{key:'comment'+p.id,isFirst:r,isLast:s,showReplyLink:t,hasPartialBorder:u,comment:p,authorProfiles:v.authorProfiles,viewerIsAuthor:x,feedback:w,'data-ft':ga,contextArgs:v.contextArgs,hideAsSpamForPageAdmin:ba,isLocallyComposed:z,isFeatured:fa,parentCanComment:ea,permalink:ha,showPermalink:ca,showRemoveReportMenu:aa,focusOnMount:p.id===v.commentIDToFocusOnMount,shouldLogVPVs:v.shouldLogVPVs,orderingMode:v.orderingMode,featuredCommentIDs:v.featuredCommentIDs,markViewerHasInteracted:this.state.viewerHasClickedSeeMore?c('emptyFunction'):function(){return this.setState({viewerHasClickedSeeMore:true});}.bind(this)}));},renderPagers:function(p,q,r,s){if(this._isShowingAllComments(p,s)||this._isAds()||!q&&this.props.hideToplevelPager)return {topPager:null,bottomPager:null};var t=!!(!q&&c('UFIConfig').allowExplicitPagerCount&&(this._showsLikeSentenceCommentCount()||this._showsShareRowCommentCount()));return c('UFIPagerGenerator').renderPagers(this.props,p,r,s,function(u,v){return this.context.dispatch(c('UFIStoryAction').pageInComments(p,u,v));}.bind(this),{forceExplicitPagers:t});},loadMoreComments:function(){if(this.isMounted()&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var p=c('ReactDOM').findDOMNode(this.refs.topLevelBottomPager),q=c('getUnboundedScrollPosition')(window).y,r=q+document.documentElement.clientHeight+c('UFIConstants').infiniteScrollRangeForQANDAPermalinks;if(p.offsetHeight&&p.offsetTop<r)this.refs.topLevelBottomPager.props.onPagerClick();}},onComment:function(){var p=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();p=c('ReactDOM').findDOMNode(this.refs.toplevelcomposer);}else{var q=c('ReactDOM').findDOMNode(this),r=c('Parent').byTag(q,'form');p=this._findComposerNode(r);if(!p){var s=c('Parent').bySelector(q,"._3g6d");p=this._findComposerNode(s);}p&&p.focus();}c('FbFeedCommentUFIScroller').reveal(p);},_findComposerNode:function(p){return c('DOM').scry(p,'[name="add_comment_text_text"]').concat(c('DOM').scry(p,'[name="add_comment_text"]')).find(function(q){return !c('Parent').byClass(q,'UFIReplyList');});},_hasCommentOrderInverted:function(){return c('UFICommentOrdering').inverted(this.props.orderingMode);},hasReactions:function(p,q){return (p.displayreactions&&q.hasReactions&&(q.feedbackMode==='none'||q.feedbackMode==='toggle'));}});f.exports=o;},null);
__d('UFIBlingItem.react',['cx','fbt','React','NumberFormat','UFIConfig','joinClasses'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=c('joinClasses')(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),o=c('NumberFormat').formatIntegerWithDelimiter(this.props.count,c('UFIConfig').numberDelimiter),p=o;switch(this.props.itemKey){case 'like':p=i._({"Like":"{count} Like","Likes":"{count} Likes"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:p),i['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':p=i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:p),i['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reaction':p=i._({"Reaction":"{count} Reaction","Reactions":"{count} Reactions"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:p),i['enum'](this.props.count===1?'Reaction':'Reactions',{Reaction:'Reaction',Reactions:'Reactions'})]);break;case 'reshare':p=i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:p),i['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}return (c('React').createElement('span',{className:"_2u_j"},p));};function m(){'use strict';j.apply(this,arguments);}m.propTypes={contextArgs:l.object.isRequired,count:l.number.isRequired,countreduced:l.string,className:l.string,iconClassName:l.string,itemKey:l.string};f.exports=m;},null);
__d('UFIBlingBox.react',['cx','fbt','NumberFormat','React','UFIBlingItem.react','UFIConfig','UFIReactionTypes'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){'use strict';var n=[],o='',p=this.props,q=p.likes,r=p.likesreduced,s=p.reactionCount,t=p.reactionCountMap,u=p.reactionCountReduced;if(q||s){var v=t&&t[c('UFIReactionTypes').LIKE]['default']!==s;n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:v?s:q,countreduced:v?u:r,iconClassName:'UFIBlingBoxLikeIcon',itemKey:v?'reaction':'like',key:'like'}));o+=this.props.likes==1?i._("1 like"):i._({"*":"{count} likes"},[i.param('count',this.props.likes,[0])]);o+=' ';}if(this.props.comments){var w=this.props.commentsreduced;if(this.props.contextArgs.islivestreaming)w=c('NumberFormat').formatIntegerWithDelimiter(this.props.comments,c('UFIConfig').numberDelimiter);n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:w,iconClassName:'UFIBlingBoxCommentIcon',itemKey:'comment',key:'comment'}));o+=this.props.comments==1?i._("1 comment"):i._({"*":"{count} comments"},[i.param('count',this.props.comments,[0])]);o+=' ';}if(this.props.reshares){n.push(c('React').createElement(c('UFIBlingItem.react'),{className:n.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:'reshare',key:'reshare'}));o+=this.props.reshares==1?i._("1 share"):i._({"*":"{count} shares"},[i.param('count',this.props.reshares,[0])]);}var x;if(this.props.readOnly){x=c('React').createElement('span',{'aria-label':o},n);}else{var y=this.props.contextArgs.commentajaxify;x=c('React').createElement('a',{ajaxify:y,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':o,onClick:this.props.onClick,rel:y?'dialog':'ignore'},n);}return x;};function m(){'use strict';j.apply(this,arguments);}m.propTypes={contextArgs:l.object.isRequired,'data-ft':l.string,'data-comment-prelude-ref':l.string,comments:l.number,commentsreduced:l.string,likes:l.number,likesreduced:l.string,nfb:l.number,onClick:l.func,permalink:l.string,reactionCount:l.number,reactionCountMap:l.object,reactionCountReduced:l.string,reshares:l.number,resharesreduced:l.string,readOnly:l.bool};f.exports=m;},null);
__d('UFIReactionsBlingSocialSentence.react',['cx','fbt','ActorURI','BanzaiLogger','Bootloader','NumberFormat','PagesPrivateReplyConstants','ProfileBrowserLink','ProfileBrowserTypes','React','Tooltip.react','UFIPrivateReplyIndicator.react','UFIReactionsSocialSentence.react','UFIConfig','URI','XUFICommentTooltipController','XUFIGroupSeenByProfileDialogController','XUFIGroupSeenByProfileBrowserController','XUFIShareTooltipController','XUIText.react'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(){var m,n;'use strict';for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return m=(n=k.constructor).call.apply(n,[this].concat(p)),this.onCommentsClick=function(event){var r=this.props.contextArgs.commentajaxify;if(r){if(this.props.contextArgs.showtheaterforcomment){this.launchSnowlift(r,event.currentTarget);}else this.launchDialog(r,event.currentTarget);}else if(this.props.onCommentClick)this.props.onCommentClick(event);this.logCountAction('comments','click');event.preventDefault();}.bind(this),this.onSeensClick=function(event){var r=this.props.feedback,s=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',r.entidentifier).getURI();s=c('ActorURI').create(s,r.actorforpost);this.launchDialog(s.toString(),event.currentTarget);this.logCountAction('seens','click');event.preventDefault();}.bind(this),this.onSharesClick=function(event){var r=this.props.feedback,s=r.sharefbid||r.targetfbid,t=c('ActorURI').create(new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:s}),r.actorforpost);this.launchDialog(t.toString(),event.currentTarget);this.logCountAction('shares','click');event.preventDefault();}.bind(this),this.onViewsClick=function(event){this.logCountAction('views','click');}.bind(this),this.onViewsHover=function(event){if(this.canSeeConsolidatedTooltip())this.logCountAction('views','hover');}.bind(this),this.launchSnowlift=function(r,s){c('Bootloader').loadModules(["PhotoSnowlift"],function(t){t.bootstrap(r,s);},'UFIReactionsBlingSocialSentence.react');},this.launchDialog=function(r,s){c('Bootloader').loadModules(["AsyncDialog"],function(t){t.bootstrap(r,s,'dialog');},'UFIReactionsBlingSocialSentence.react');},this.logCountAction=function(r,s){c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:s,target_type:'count',target_subtype:r});}.bind(this),this.renderComments=function(){var r=this.props.contextArgs.islivestreaming;if(!this.props.commentCount||this.props.contextArgs.feedbackMode==='expanded'&&!r)return null;var s=isNaN(this.props.feedback.commentcountreduced)&&!r?this.props.feedback.commentcountreduced:c('NumberFormat').formatIntegerWithDelimiter(this.props.commentCount,c('UFIConfig').numberDelimiter),t=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-uri':t,href:this.props.href,onClick:this.onCommentsClick,role:'button'},this.props.children,i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',s),i['enum'](this.props.commentCount===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})])));}.bind(this),this.renderSeens=function(){if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var r=this.props.feedback,s=r.seencount,t=void 0;if(r.seenbyall){t=i._("Seen by everyone");}else if(s===1){t=i._("Seen by 1");}else t=i._("Seen by {count}",[i.param('count',s)]);var u=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:r.entidentifier}),v=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',r.entidentifier).getURI();v=c('ActorURI').create(v,r.actorforpost);return (c('React').createElement('span',{ref:'seen_by_text'},c('React').createElement('a',{href:v,'data-hovercard':u.toString(),className:"_ipm",onClick:this.onSeensClick},t)));}.bind(this),this.renderShares=function(){if(!this.props.feedback.sharecount)return null;var r=this.props.feedback.sharefbid||this.props.feedback.targetfbid,s=c('ActorURI').create(new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:r}),this.props.feedback.actorforpost),t=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-hover':'tooltip','data-tooltip-uri':t,href:s,onClick:this.onSharesClick,role:'button'},i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.feedback.sharecountreduced),i['enum'](this.props.feedback.sharecount===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})])));}.bind(this),this.renderViews=function(){var r=this.props.contextArgs.viewCount,s=null;if(this.canSeeConsolidatedTooltip())s=this.renderViewsTooltip();if(!r)return null;return (c('React').createElement(c('Tooltip.react'),{tooltip:s,'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-position':'above','aria-live':'polite',className:"_ipm",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},i._({"View":"{count} View","Views":"{count} Views"},[i.param('count',this.props.contextArgs.viewCountReduced),i['enum'](r==='1'?'View':'Views',{View:'View',Views:'Views'})])));}.bind(this),this.canSeeConsolidatedTooltip=function(){var r=this.props.contextArgs.postViewCount,s=this.props.contextArgs.totalPosts,t=this.props.contextArgs.otherPostsViewCount;return !!s&&s>1&&!!r&&!!t;}.bind(this),this.renderViewsTooltip=function(){var r=this.props.contextArgs.totalPosts,s=this.props.contextArgs.postViewCount,t=this.props.contextArgs.otherPostsViewCount,u=r-1;return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},i._("Video Posted {number of posts} Times",[i.param('number of posts',r)])),c('React').createElement('br',null),i._({"view":"{post views} view from this post","views":"{post views} views from this post"},[i.param('post views',s),i['enum'](s==='1'?'view':'views',{view:'view',views:'views'})]),c('React').createElement('br',null),i._({"view":{"post":"{total views} view from {posts count} other post","posts":"{total views} view from {posts count} other posts"},"views":{"post":"{total views} views from {posts count} other post","posts":"{total views} views from {posts count} other posts"}},[i.param('total views',t),i['enum'](t==='1'?'view':'views',{view:'view',views:'views'}),i.param('posts count',u),i['enum'](u===1?'post':'posts',{post:'post',posts:'posts'})])));}.bind(this),this.renderPrivateReply=function(){var r=this.props.feedback.messagereplycontext;if(!r||r.status!==c('PagesPrivateReplyConstants').Status.ALREADY_REPLIED)return null;return (c('React').createElement('span',{className:"_ipm"},c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:r.status})));}.bind(this),m;}l.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_ipn"},c('React').createElement('div',{className:"_ipo"},this.renderComments(),this.renderShares(),this.renderSeens(),this.renderViews(),this.renderPrivateReply()),c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:this.props.feedback,contextArgs:this.props.contextArgs})));};f.exports=l;},null);
__d('UFIBling.react',['CommentPrelude','React','TrackingNodes','UFIBlingBox.react','UFIInstanceState','UFIReactionsBlingSocialSentence.react','UFIToplevelPagedCommentList','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);}j.prototype.render=function(){var k=this.props.contextArgs,l=this.props.feedbackTarget,m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),n=l.permalink;if(k.showtheaterforcomment&&k.commentredirecturi){n=k.commentredirecturi;k.commentajaxify=k.commentredirecturi;}var o=new (c('URI'))(n).addQueryData({comment_tracking:m}).toString(),p=c('UFIToplevelPagedCommentList').getCommentList(k.ftentidentifier,l.defaultcommentorderingmode).getDisplayedCommentCount(),q=(k.feedbackMode==='none'||k.feedbackMode==='toggle')&&k.hasReactions&&l.displayreactions,r=function(event){event.preventDefault();if(q&&k.feedbackMode==='expanded'){this.$UFIBling1();}else{c('CommentPrelude').onBlingboxClick(event.currentTarget);if(!k.disableinlinetoggle)this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged();}}.bind(this);if(q){return (c('React').createElement(c('UFIReactionsBlingSocialSentence.react'),{commentCount:p,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,feedback:l,href:o,onCommentClick:r}));}else{var s=void 0,t=void 0,u=void 0;if(k.hasReactions){s=l.reactioncount;t=l.reactioncountmap;u=l.reactioncountreduced;}return (c('React').createElement(c('UFIBlingBox.react'),{comments:p,commentsreduced:l.commentcountreduced,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,likes:l.likecount,likesreduced:l.likecountreduced,nfb:l.nfbcount,onClick:r,permalink:o,reactionCount:s,reactionCountMap:t,reactionCountReduced:u,reshares:l.sharecount,resharesreduced:l.sharecountreduced,readOnly:k.readonly}));}};j.prototype.$UFIBling1=function(){c('UFIInstanceState').updateState(this.props.contextArgs.instanceid,'commentsToggling',true);};f.exports=j;},null);
__d('UFICommentActionLink.react',['React','UFICommentLink.react','UFIInstanceState'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props.contextArgs,m=l.commentajaxify,n=l.commentredirecturi,o=l.instanceid,p=l.showtheaterforcomment,q=l.loggedOutLinkConfig;if(!m&&q&&q.showCommentLink)m=q.commentAjaxifyURI;if(m){return (c('React').createElement(c('UFICommentLink.react'),{ajaxify:m,rel:p?'theater':'dialog'}));}else if(n)return (c('React').createElement(c('UFICommentLink.react'),{href:n,rel:p?'theater':''}));return (c('React').createElement(c('UFICommentLink.react'),{onClick:function(event){event.preventDefault();c('UFIInstanceState').updateState(o,'commentsToggling',true);c('UFIInstanceState').updateStateFields(o,'addCommentInput',{expanded:true});}}));};function k(){h.apply(this,arguments);}k.propTypes={contextArgs:j.object.isRequired};f.exports=k;},null);
__d('UFILikeActionLink.react',['React','UFILikeLink.react','UFIReactionsLinkImpl.react','UFIReactionTypes','UFIStoryAction'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return l=(m=i.constructor).call.apply(m,[this].concat(o)),this.onClick=function(event){event.preventDefault();var q=this.props.feedback.hasviewerliked;this.context.dispatch(c('UFIStoryAction').changeReaction(this.props.contextArgs,q?c('UFIReactionTypes').NONE:c('UFIReactionTypes').LIKE,event.target));}.bind(this),l;}k.prototype.render=function(){var l=this.props,m=l.contextArgs,n=l.feedback;if(!m.showLikeNuxForGroupMallAds&&m.hasReactions&&n.canviewerreact&&c('UFIReactionsLinkImpl.react')){return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{id:m.ftentidentifier,nuxConfig:m.reactionsNuxConfig,reaction:n.viewerreaction,rootid:m.rootid,source:m.source,suggestedReaction:n.suggestedreaction,supportedReactions:n.supportedreactions,feedbackReferrer:m.feedbackReferrer,isLiveVOD:m.isLiveVOD,fluentContentToken:m.fluentContentToken,isLiveStreaming:m.islivestreaming}));}else{var o=m.loggedOutLinkConfig,p=null;if(o&&o.showLikeLink)p=o.likeAjaxifyURI;return (c('React').createElement(c('UFILikeLink.react'),{ajaxify:p,likeAction:!n.hasviewerliked,onClick:this.onClick,rel:p?'dialog':null,forcelegacyrendering:m.forcelegacyrendering,showLikeNuxForGroupMallAds:m.showLikeNuxForGroupMallAds,likeNuxContent:m.groupMallAdsCommentNuxContent}));}};k.contextTypes={dispatch:j.func};k.propTypes={feedback:j.object.isRequired,contextArgs:j.object.isRequired};f.exports=k;},null);
__d('UFIShareNowMenuBootloader.react',['BootloadedComponent.react','JSResource','React','UFIShareLink.react'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(){var k,l;'use strict';for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return k=(l=i.constructor).call.apply(l,[this].concat(n)),this.state={openOnInit:false,focusOnInit:false,interacted:false},k;}j.prototype.render=function(){'use strict';var k=this.state,l=k.openOnInit,m=k.focusOnInit,n=k.interacted,o=this.props,p=o.endpoint,q=o.endpointData,r=o.onShow,s=o.onHide,t=c('React').createElement(c('UFIShareLink.react'),{href:'#',onClick:function(){return this.setState({interacted:true,openOnInit:true});}.bind(this),onFocus:function(){return this.setState({interacted:true,focusOnInit:true});}.bind(this),onMouseOver:function(){return this.setState({openOnInit:false,focusOnInit:false,interacted:true});}.bind(this)});if(n)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIShareNowMenu.react').__setRef('UFIShareNowMenuBootloader.react'),bootloadPlaceholder:t,endpoint:p,endpointData:q,onShow:r,onHide:s,openOnInit:l,focusOnInit:m}));return t;};f.exports=j;},null);
__d('UFIShareActionLink.react',['ActorURI','React','UFIShareNowMenuBootloader.react','UFIShareLink.react','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.render=function(){var l=this.props,m=l.shareURI,n=l.shareRel,o=l.shareNowMenuURI,p=l.feedbackReferrer,q=l.feedbackSource,r=l.feedbackTarget,s={feedback_referrer:p,feedback_source:q},t=r&&r.actorforpost;if(t){m=m&&c('ActorURI').create(m,t);o=o&&new (c('URI'))(o).addQueryData('actor_id',t).toString();}return o?c('React').createElement(c('UFIShareNowMenuBootloader.react'),{endpoint:o,endpointData:s}):c('React').createElement(c('UFIShareLink.react'),{href:new (c('URI'))(m).addQueryData(s),rel:n});};function k(){h.apply(this,arguments);}k.propTypes={feedbackTarget:j.object,shareURI:j.string,shareRel:j.string,shareNowMenuURI:j.string,shareLinkHref:j.string,feedbackReferrer:j.string,feedbackSource:j.number};f.exports=k;},null);
__d('UFIActionLinks.react',['cx','fbt','BanzaiODS','BootloadedComponent.react','FBFeedLocations','JSResource','OnVisible','Parent','React','UFIBling.react','UFICommentActionLink.react','UFIInstanceAction','UFILikeActionLink.react','UFIPrivateReplyLink.react','UFIShareActionLink.react','UFISharedDispatcher','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l='ufi-share-link.render';j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentDidMount=function(){var n=this.$UFIActionLinks2();c('BanzaiODS').bumpEntityKey('feedback',n);if(n===l)this.$UFIActionLinks1=new (c('OnVisible'))(this.refs.root,function(){c('BanzaiODS').bumpEntityKey('feedback','ufi-share-link.rendered-vpv');if(this.$UFIActionLinks1){this.$UFIActionLinks1.remove();this.$UFIActionLinks1=null;}}.bind(this),true);};m.prototype.componentWillUnmount=function(){if(this.$UFIActionLinks1){this.$UFIActionLinks1.remove();this.$UFIActionLinks1=null;}};m.prototype.renderActorSelector=function(){if(this.props.hideActorSelector)return null;var n=this.props.contextArgs,o=n.actorSelectorConfig,p=n.hasReactions;if(!o)return null;var q=o.module;return (c('React').createElement('div',{className:"_40yk"+(p?' '+"_pbn":'')},c('React').createElement(q,babelHelpers['extends']({},o.props,{nuxHoverContext:c('Parent').byTag(this.refs.root,'form')}))));};m.prototype.renderActionList=function(){var n=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderPrivateReplyLink(),this.renderTranslateLink(),this.renderEmbedLink()].filter(function(r){return r;}).map(function(r,s){return (c('React').createElement('span',{key:s},r));}),o=null;if(this.props.contextArgs.quickFeedback){var p=this.props.contextArgs.quickFeedback,q=p.UFIQuickFeedbackLink;o=c('React').createElement(q,p);}if(n.length||o){return (c('React').createElement('div',{className:"_42nr"},n,o));}else return null;};m.prototype.renderBling=function(){if(this.props.contextArgs.showBling)return (c('React').createElement(c('UFIBling.react'),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:function(){return (c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').toggleComments(this.props.contextArgs.instanceid)));}.bind(this)}));return null;};m.prototype.renderLikeLink=function(){var n=this.props,o=n.contextArgs,p=n.feedbacktarget,q=o.loggedOutLinkConfig;if(!p.hasviewerliked&&!p.viewercanlike&&!(q&&q.showLikeLink))return null;return (c('React').createElement(c('UFILikeActionLink.react'),{feedback:p,contextArgs:o}));};m.prototype.renderCommentLink=function(){var n=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(n&&n.showCommentLink)){var o=this.props.contextArgs.disabledCommentTooltip;if(o)return (c('React').createElement('span',null,c('React').createElement('span',{className:"_1ysv",'data-hover':'tooltip','data-tooltip-content':o},i._("Comment"))));return null;}return (c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this.props.contextArgs}));};m.prototype.$UFIActionLinks2=function(){var n=this.props.contextArgs.shareLinkConfig;if(!n)return 'ufi-share-link.unavailable';var o=this.props.contextArgs.loggedOutLinkConfig;if(o&&o.showShareLink)return 'ufi-share-link.loggedout';return l;};m.prototype.renderShareLink=function(){var n=this.props.contextArgs.shareLinkConfig;if(!n)return null;var o=this.props.contextArgs.loggedOutLinkConfig;if(o&&o.showShareLink)n.shareURI=o.shareAjaxifyURI;return (c('React').createElement(c('UFIShareActionLink.react'),babelHelpers['extends']({feedbackTarget:this.props.feedbacktarget,feedbackReferrer:this.props.contextArgs.feedbackReferrer,feedbackSource:this.props.contextArgs.source},n)));};m.prototype.renderPrivateReplyLink=function(){var n=this.props,o=n.contextArgs,p=n.feedbacktarget,q=p.actorforpost,r=p.messagereplycontext;if(!c('UFIPrivateReplyLink.react').willRender(r,q))return null;return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:q,activityID:o.ftentidentifier,context:r,seeResponseLabel:false}));};m.prototype.renderTranslateLink=function(){var n=this.props.contextArgs.translationDialogURI;if(!n)return null;return (c('React').createElement('a',{href:n,rel:'dialog'},i._("Translate")));};m.prototype.renderEmbedLink=function(){var n=this.props.contextArgs.shareLinkConfig;if(!n||!n.embedURI)return null;return (c('React').createElement('a',{href:n.embedURI,rel:'dialog',className:"_2g1w"},i._("Embed")));};m.prototype.renderSearchFeedback=function(){var n=this.props.contextArgs.inlineSearchFeedbackConfig;if(!n)return null;return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react').__setRef('UFIActionLinks.react')},n)));};m.prototype.renderCommentOrderingModeSelector=function(){if(!this.props.showCommentOrderingModeSelector)return null;return (c('React').createElement('div',{className:"_3csb"},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIActionLinks.react'),feedback:this.props.feedbacktarget,ufiInstanceID:this.props.contextArgs.instanceid})));};m.prototype.renderLayout=function(n,o,p){o=o.map(function(q,r){return q&&c('React').createElement('div',{className:"_3m9g",key:r},q);}).filter(function(q){return q;});if(!n&&o.length===0)return null;return (c('React').createElement('div',{className:c('joinClasses')("_3399",p)},o,c('React').createElement('div',{className:"_524d"},n)));};m.prototype.shouldRenderActionButtons=function(){var n=null;if(this.props.contextArgs.feedcontext)try{n=JSON.parse(this.props.contextArgs.feedcontext).location_type;}catch(o){}if(n===c('FBFeedLocations').GOODWILL_THROWBACK_PERMALINK||n===c('FBFeedLocations').GOODWILL_THROWBACK_PROMOTION||n===c('FBFeedLocations').GOODWILL_THROWBACK_SHARE||n===c('FBFeedLocations').GROUP_SUGGESTIONS_WITH_STORY)return false;return true;};m.prototype.hasCounts=function(){return this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount;};m.prototype.render=function(){var n=this.renderActorSelector(),o=this.renderSearchFeedback(),p=[],q=[],r=null,s=this.renderBling();if(s){q.push(n);if(this.hasCounts()){r=this.renderLayout(null,[o],"_1f6t");}else q.push(o);}else{p.push(n);p.push(o);}p.push(this.renderCommentOrderingModeSelector());var t="_1f6t"+(this.props.contextArgs.hasReactions?' '+"_4_dr":''),u=this.shouldRenderActionButtons()?this.renderLayout(this.renderActionList(),p,"_a7s clearfix"):null;return (c('React').createElement('div',{ref:'root'},r,this.renderLayout(s,q,t),u));};function m(){j.apply(this,arguments);}f.exports=m;},null);
__d('UFICallbackStore',['FluxStore'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){var l=k.type,m=babelHelpers.objectWithoutProperties(k,['type']);this.__emitter.emit(l,m);};j.prototype.on=function(k,l){return this.__emitter.addListener(k,l);};j.prototype.remove=function(){this.__emitter.removeAllListeners();};function j(){h.apply(this,arguments);}f.exports=j;},null);
__d('BaseGraphQLSubscription',['Banzai','BanzaiLogger','CurrentUser','CurrentLocale','RTISubscriptionManager'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=10000,i={subscribe:function(j,k){var l={transformContext:JSON.stringify(this._getTransformContext(j))},m=this._getQueryParameters(j);this._logEvent('client_subscribe',m);return c('RTISubscriptionManager').subscribe(this._getTopic(j),function(n){this._logEvent('receivepayload',m);k(JSON.parse(n.payload));}.bind(this),l);},_getTransformContext:function(j){var k=155160167952447;return {viewerID:c('CurrentUser').getID(),appID:k,locale:c('CurrentLocale').get(),queryID:this._getQueryID(),serializedQueryParameters:JSON.stringify(this._getQueryParameters(j))};},_logEvent:function(j,k){if(c('Banzai').isEnabled('gqls_web_logging')){var l=c('CurrentUser').isEmployee()?1:h;if(Math.random()*l<1)c('BanzaiLogger').log('GraphQLSubscriptionsLoggerConfig',{clienttime:Date.now()/1000,client_sample_weight:l,event:j,mechanism:'skywalker',query_params:k,subscription_call:this._getSubscriptionCallName()});}}};f.exports=i;},null);
__d("XWebGraphQLQueryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/webgraphql\/query\/",{query_id:{type:"String"},variables:{type:"String"},doc_id:{type:"String"}});},null);
__d("CommentLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "817396691728788";}};f.exports=h;},null);
__d('UFICommentLikeSubscription',['CommentLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/comment_like_subscribe/top_level_feedback_id_'+i;},_getQueryID:function(){return c('CommentLikeSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:i})};},_getSubscriptionCallName:function(){return 'comment_like_subscribe';}});f.exports=h;},null);
__d("CommentCreateSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "816836291784828";}};f.exports=h;},null);
__d('UFICommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/comment_create_subscribe/top_level_feedback_id_'+i;},_getQueryID:function(){return c('CommentCreateSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'comment_create_subscribe';}});f.exports=h;},null);
__d('UFICommercialBreakController',['Map','SubscriptionsHandler','UFIInstanceState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){this.ufiID=j;this.subscriptions=new (c('SubscriptionsHandler'))();this.subscriptions.addSubscriptions(k.addListener('commercialBreak/hideUFI',function(){return this.hideUFI();}.bind(this)),k.addListener('commercialBreak/showUFI',function(){return this.showUFI();}.bind(this)));}h.prototype.hideUFI=function(){c('UFIInstanceState').updateState(this.ufiID,'inCommercialBreak',true);};h.prototype.showUFI=function(){c('UFIInstanceState').updateState(this.ufiID,'inCommercialBreak',false);};h.prototype.stop=function(){this.subscriptions.release();};var i=new (c('Map'))();f.exports={start:function(j,k){if(i.get(j))return;i.set(j,new h(j,k));},stop:function(j){var k=i.get(j);if(!k)return;k.stop();i['delete'](j);}};},null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.getChildContext=function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};};k.prototype.render=function(){return this.props.children;};function k(){h.apply(this,arguments);}k.propTypes={dispatcher:j.instanceOf(c('UFIDispatcher')).isRequired,stores:j.object.isRequired};k.childContextTypes={dispatch:j.func,stores:j.object};f.exports=k;},null);
__d('UFIFeaturedReplyCommentList',['UFIReplyCommentList','UFIConstants'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('UFIReplyCommentList'));i=h&&h.prototype;j.getCommentList=function(k,l){};function j(k,l,m,n){i.constructor.call(this,k,l,c('UFIConstants').UFICommentOrderingMode.FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;},null);
__d('UFIFeaturedToplevelCommentList',['UFIConstants','UFIToplevelPagedCommentList'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('UFIToplevelPagedCommentList'));i=h&&h.prototype;j.getCommentList=function(k,l){};j.getCommentListsForFeedbackTargetID=function(k){};j.getCommentListForFeedbackTargetID_UNSAFE=function(k){};j.resetCommentListsForFeedbackTargetID=function(k){};function j(k,l,m){i.constructor.call(this,k,c('UFIConstants').UFICommentOrderingMode.FEATURED);var n=0,o=l.length;this.updateCommentCount(o);this.addCommentIDs(n,o,l);var p={};m.forEach(function(q){p[q.id]=q;});l.forEach(function(q){this.addOrUpdateComment(p[q]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;},null);
__d('UFIFeedbackFilters',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getRequestedIDs:function(i){var j=[];if(i.reactorids)j=j.concat(i.reactorids);if(i.actorforpost)j=j.concat(i.actorforpost);return j;}};f.exports=h;},null);
__d('UFIFetcher',['Promise','ShortProfiles','UFIPagedCommentList','UFIRange'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={fetchShortProfiles:function(i){return new (c('Promise'))(function(j,k){return (c('ShortProfiles').getMulti(i,j));});},fetchComments:function(i,j,k){return new (c('Promise'))(function(l,m){return (i.getComments(j.getOffset(),j.getLength(),k,l));}).then(function(l){return Object.values(l);});},fetchCommentsOrThrow:function(i,j,k){return Object.values(i.getCommentsOrThrow(j,k));}};f.exports=h;},null);
__d("FeedbackLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "806664072802050";}};f.exports=h;},null);
__d('UFILikeSubscription',['FeedbackLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/feedback_like_subscribe/feedback_id_'+i;},_getQueryID:function(){return c('FeedbackLikeSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'feedback_like_subscribe';}});f.exports=h;},null);
__d('StreamingReactionsTrayEvents',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='streamingReactionsTray/AddReactionAnimate',i='streamingReactionsTray/HideChannelViewDetails',j='streamingReactionsTray/ShowChannelViewDetails',k='streamingReactionsTray/UpdateSurface',l='streamingReactionsTray/ResizeChannelViewWindow',m='streamingReactionsTray/ReactionStateChange',n='streamingReactionsTray/FireworksAnimating',o={AddReactionAnimate:h,HideChannelViewDetails:i,ReactionStateChange:m,ResizeChannelViewWindow:l,ShowChannelViewDetails:j,UpdateSurface:k,FireworksAnimating:n};f.exports=o;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true}});},null);
__d('UFILiveStreamingComments',['Arbiter','AsyncRequest','BanzaiODS','Map','Set','StreamingReactionsTrayEvents','UFICentralUpdates','UFIConfig','UFIConstants','UFIToplevelStreamedCommentList','XLiveStreamingCommentsAsyncController','clearInterval','setInterval'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new (c('Map'))(),i=10000;function j(l,m,n){this.eftID=l;this.totalCommentCount=m;this.tailCommentFBID=n;this.queue=[];this.ufiPayloadBuffer=[];this.fireworksAnimating=false;this.localCommentBodies=new (c('Set'))();this.errorCount=0;this.interval=c('setInterval')(function(){if(this.queue.length>c('UFIConfig').facecastWWWCommentQueueThreshold){this.renderNextComment();return;}new (c('AsyncRequest'))().setURI(this.getNextURI()).setHandler(function(o){switch(o.payload.status){case 'streaming':this.enqueueMoreComments(o.payload);this.renderNextComment();this.errorCount=0;return;case 'not-streaming':c('clearInterval')(this.interval);return;case 'transient-error':return;case 'error':this.renderNextComment();this.errorCount+=1;if(this.errorCount===1)c('BanzaiODS').bumpEntityKey('streaming_comments','first_streaming_comments_error');if(this.errorCount===5){c('BanzaiODS').bumpEntityKey('streaming_comments','too_many_streaming_comments_errors');c('clearInterval')(this.interval);return;}break;}}.bind(this)).send();}.bind(this),2000);c('UFICentralUpdates').subscribe('update-comments',function(o,p){if(p.comments&&p.comments.length)p.comments.forEach(function(q){if(q.parentcommentid)return;if(q.islocal)this.trackLocalComment(q);}.bind(this));}.bind(this));c('Arbiter').subscribe(c('StreamingReactionsTrayEvents').FireworksAnimating,function(o,p){this.fireworksAnimating=p;if(this.fireworksAnimating){clearTimeout(this.timeoutID);this.timeoutID=setTimeout(function(){if(this.fireworksAnimating){this.fireworksAnimating=false;c('BanzaiODS').bumpEntityKey('streaming_comments','comment_fetching_unpause_failure');}}.bind(this),i);}else this.backFillComments();}.bind(this));}j.prototype.enqueueMoreComments=function(l){if(!l.ufipayloads||isNaN(l.commentcount))return;var m=l.ufipayloads.filter(function(p){return !this.resemblesLocalComment(p.comments[0]);}.bind(this)),n=-1;if(this.tailCommentFBID!==null)n=m.findIndex(function(p){return p.comments[0].fbid===this.tailCommentFBID;}.bind(this),this);if(n===-1){this.queue=m;}else this.queue=this.queue.concat(m.slice(n+1));if(this.queue.length>0)this.tailCommentFBID=this.queue[this.queue.length-1].comments[0].fbid;var o=l.commentcount-this.queue.length;if(o>this.totalCommentCount)this.totalCommentCount=o;if(c('UFIConfig').showAccurateStreamingCommentCount)c('UFIToplevelStreamedCommentList').getCommentList(this.eftID).updateCommentCount(this.totalCommentCount);};j.prototype.$UFILiveCommentStream1=function(){var l=c('UFIToplevelStreamedCommentList').getCommentList(this.eftID);while(this.queue.length){var m=this.queue.shift();if(!l.hasComment(m.comments[0]))return m;}return null;};j.prototype.renderNextComment=function(){var l=this.$UFILiveCommentStream1();if(!l)return;if(this.fireworksAnimating){this.ufiPayloadBuffer.push(l);}else c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,l);};j.prototype.backFillComments=function(){for(var l=this.ufiPayloadBuffer,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var o;if(m){if(n>=l.length)break;o=l[n++];}else{n=l.next();if(n.done)break;o=n.value;}var p=o;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,p);}this.ufiPayloadBuffer=[];};j.prototype.getNextURI=function(){return c('XLiveStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.eftID).getURI();};j.prototype.trackLocalComment=function(l){var m=j.hashCommentData(l);this.localCommentBodies.add(m);};j.prototype.resemblesLocalComment=function(l){var m=j.hashCommentData(l);return this.localCommentBodies.has(m);};j.prototype.stopInterval=function(){c('clearInterval')(this.interval);};j.hashCommentData=function(l){var m=l.author+l.body.text;if(l.attachment)m+=':'+l.attachment.fbid;return m;};var k={start:function(l,m,n){if(h.get(l))return;h.set(l,new j(l,m,n));},stop:function(l){var m=h.get(l);if(!m)return;m.stopInterval();}};f.exports=k;},null);
__d("LiveVideoCommentCreateSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "816836295118161";}};f.exports=h;},null);
__d('UFILiveVideoCommentSubscription',['LiveVideoCommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/live_video_comment_create_subscribe/feedback_id_'+i;},_getQueryID:function(){return c('LiveVideoCommentCreateSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'live_video_comment_create_subscribe';}});f.exports=h;},null);
__d('UFIReactionStore',['Arbiter','FluxStore','UFIActionTypes','UFIReactionTypes','UFIUIEvents','UFIUserActions','UFIVideoPlayerRegistry'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){switch(k.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:c('UFIUserActions').changeReaction(k.contextArgs.ftentidentifier,k.reactionType,{rootid:k.contextArgs.rootid,source:k.contextArgs.source,target:k.target,feedbackReferrer:k.contextArgs.feedbackReferrer,fluentContentToken:k.contextArgs.fluentContentToken,isLiveVOD:k.contextArgs.isLiveVOD,islivestreaming:k.contextArgs.islivestreaming});c('Arbiter').inform(c('UFIUIEvents').ReactionButtonClicked,{ft_id:k.contextArgs.ftentidentifier,like_action:k.reactionType===c('UFIReactionTypes').LIKE,reaction_type:k.reactionType,target:k.target});break;}};function j(){h.apply(this,arguments);}f.exports=j;},null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('JSLogger').create('UFIRetryActions');function i(l,m){var n={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:l.id};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[n]});var o=l.body.text,p=l.body.mentionstext;m.replyid=l.parentcommentid;m.attachedphoto=l.body.mentionsphoto;m.attachedvideo=l.body.mentionsvideo;c('UFIUserActions').addComment(l.ftentidentifier,o,p,m);}function j(l,m){var n=l.body.text,o=l.body.mentionstext;m.attachedPhoto=l.body.mentionsphoto;m.attachedSticker=l.attachment;m.attachedVideo=l.body.mentionsvideo;c('UFIUserActions').editComment(l.id,n,o,m);}var k={retrySubmit:function(l,m){switch(l.status){case c('UFIConstants').UFIStatus.FAILED_ADD:i(l,m);break;case c('UFIConstants').UFIStatus.FAILED_EDIT:j(l,m);break;default:h.error('retrysubmitstatus',{status:l.status});break;}}};f.exports=k;},null);
__d('UFISubscriptionUpdates',['fbt','BanzaiODS','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIReactionsUtils'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('BanzaiODS').setEntitySample('feedback',.0001);function i(k,l,m){new (c('LiveWWWFeedbackTypedLogger'))().setMechanism('graphql_subscriptions').setEvent('receive_payload').setUpdateType(k).setTimeSinceSub(l).updateData(m?m:{}).log();}var j={handleLiveLike:function(k,l,m){c('BanzaiODS').bumpEntityKey('feedback','gql_like_received');i('like',m);if(!l||!l.feedback_like_subscribe)return;var n=l.feedback_like_subscribe.feedback,o=l.feedback_like_subscribe.liker;if(!n||!o)return;var p=[babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:o.id,clientid:l.feedback_like_subscribe.client_mutation_id,entidentifier:k,likesentences:{current:n.does_viewer_like?n.viewer_likes_sentence:n.viewer_does_not_like_sentence,alternate:n.does_viewer_like?n.viewer_does_not_like_sentence:n.viewer_likes_sentence},hasviewerliked:n.does_viewer_like,likecount:n.likers.count},{})],q=n.reactions_summary;if(q){var r=c('UFIReactionsUtils').getReactionCountMapFromSummary(n.reactions_summary),s=n.viewer_feedback_reaction_info?n.viewer_feedback_reaction_info.key:0,t=n.reaction_count_reduced?n.reaction_count_reduced:n.reactors.count;p.push(babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:o.id,clientid:l.feedback_like_subscribe.client_mutation_id,entidentifier:k,viewerreaction:s,reactioncount:n.reactors.count,reactioncountreduced:t,reactioncountmap:r,reactionsentences:{current:s?n.viewer_likes_reaction_sentence:n.viewer_does_not_like_reaction_sentence,alternate:s?n.viewer_does_not_like_reaction_sentence:n.viewer_likes_reaction_sentence}},{}));}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:p});},handleLiveComment:function(k,l,m){c('BanzaiODS').bumpEntityKey('feedback','gql_comment_received');var n=l&&l.comment;if(!n)return;i('comment',m,{comment_id:n.legacy_token});var o=babelHelpers['extends']({author:n.author.id,body:n.body,cancomment:n.feedback.can_viewer_comment,canedit:n.can_viewer_edit,canremove:n.can_viewer_delete,clientid:l.client_mutation_id,ftentidentifier:k,id:n.legacy_token,fbid:n.legacy_fbid,legacyid:n.legacy_fbid,timestamp:{time:n.created_time,text:h._("a few seconds ago")},hasviewerliked:n.feedback.does_viewer_like,isfeatured:n.is_featured,istranslatable:n.translation_available_for_viewer,likecount:n.feedback.likers.count,viewercanlike:n.feedback.can_viewer_like,parentcommentid:n.comment_parent&&n.comment_parent.legacy_token,spamreplycount:0},{});if(n.attachments.length){var p=n.attachments[0],q=p.style_list;if(q&&q.length&&q[0]=='sticker'){var r=p.target;o.attachment={fbid:r.id,metadata:{source_uri:r.img.uri,source_uri_2x:r.img_2x.uri,width:r.img.width,height:r.img.height,frameCount:r.frame_count,frameRate:r.frame_rate,framesPerCol:r.frames_per_column,framesPerRow:r.frames_per_row,sprite_uri:r.sprite_img&&r.sprite_img.uri,sprite_uri_2x:r.sprite_img_2x&&r.sprite_img_2x.uri},type:'sticker'};}else if(q&&q.length&&q[0]=='photo'){var s=p.target;o.attachment={fbid:s.id,metadata:{preview_uri:s.photo_img&&s.photo_img.uri,width:s.photo_img.width,height:s.photo_img.height,url:s.url},type:'photo'};}else if(q&&q.length&&q[0]=='share'){p.type='live_share';o.attachment=p;}else if(q&&q.length&&q[0]=='video_inline'){p.type='video';o.attachment=p;}else if(q&&q.length&&q[0]=='comment_place_info'){p.type='live_comment_place_info';o.attachment=p;}}var t=n.feedback;if(t.reactions_summary){o.canviewerreact=t.can_viewer_react;o.reactioncount=t.reactors.count;o.reactioncountmap=c('UFIReactionsUtils').getReactionCountMapFromSummary(t.reactions_summary);o.reactioncountreduced=t.reaction_count_reduced?t.reaction_count_reduced:t.reactors.count;o.viewerreaction=t.viewer_feedback_reaction_info?t.viewer_feedback_reaction_info.key:0;}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{comments:[o],isstreaming:n.written_while_video_was_live});},handleLiveCommentLike:function(k,l,m){i('comment_like',m);var n=l&&l.comment_like_subscribe&&l.comment_like_subscribe.feedback;if(!n)return;var o=null;if(n.reactions_summary)o={reactioncount:n.reactors.count,reactioncountmap:c('UFIReactionsUtils').getReactionCountMapFromSummary(n.reactions_summary),reactioncountreduced:n.reaction_count_reduced?n.reaction_count_reduced:n.reactors.count,viewerreaction:n.viewer_feedback_reaction_info?n.viewer_feedback_reaction_info.key:0};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,clientid:l.comment_like_subscribe.client_mutation_id,commentid:n.legacy_comment_token,likecount:n.likers&&n.likers.count,reactiondata:o,viewerliked:n.does_viewer_like}]});}};f.exports=j;},null);
__d("FeedbackTypingSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "806664086135382";}};f.exports=h;},null);
__d('UFITypingSubscription',['FeedbackTypingSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/feedback_typing_subscribe/feedback_id_'+i;},_getQueryID:function(){return c('FeedbackTypingSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'feedback_typing_subscribe';}});f.exports=h;},null);
__d('UFITypingSubscriptionController',['UFITypingSubscription','getByPath','setTimeout'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=15*1000;function i(l){var m=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','friend_count']),n=c('getByPath')(l,['feedback_typing_subscribe','feedback','feedback_typers','other_count']);return {friendCount:parseInt(m,10)||0,otherCount:parseInt(n,10)||0};}function j(l){return l.friendCount===0&&l.otherCount===0;}function k(l,m){this.$UFITypingSubscriptionController1=null;this.$UFITypingSubscriptionController2=m;this.$UFITypingSubscriptionController3=c('UFITypingSubscription').subscribe(l,this.$UFITypingSubscriptionController4.bind(this));}k.prototype.unsubscribe=function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController3&&this.$UFITypingSubscriptionController3.unsubscribe();};k.prototype.$UFITypingSubscriptionController4=function(l){this.$UFITypingSubscriptionController5();var m=i(l);this.$UFITypingSubscriptionController2(m);if(!j(m))this.$UFITypingSubscriptionController1=c('setTimeout')(function(){this.$UFITypingSubscriptionController5();this.$UFITypingSubscriptionController2({friendCount:0,otherCount:0});}.bind(this),h);};k.prototype.$UFITypingSubscriptionController5=function(){if(this.$UFITypingSubscriptionController1){clearTimeout(this.$UFITypingSubscriptionController1);this.$UFITypingSubscriptionController1=null;}};f.exports=k;},null);
__d("XVODStreamingCommentsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/vodcomments\/",{eft_id:{type:"String",required:true},target_ufi_instance_id:{type:"String",required:true},start_time:{type:"Float",required:true},end_time:{type:"Float",required:true},should_backfill:{type:"Bool",defaultValue:false}});},null);
__d('UFIVODStreamingComments',['AsyncRequest','BanzaiODS','Map','SubscriptionsHandler','UFICentralUpdates','UFIConstants','UFIInstanceAction','UFISharedDispatcher','UFIToplevelStreamedCommentList','XVODStreamingCommentsAsyncController','setInterval'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){this.ufiController=j;this.videoPlayerController=k;this.queue=[];this.queueEndTime=0;this.currentRequest=null;this.subscriptions=new (c('SubscriptionsHandler'))();this.shouldAutoplayedVODStreamingComments=this.ufiController.shouldAutoplayLiveVODComments();this.resetToTime(k.getCurrentTimePosition());this.subscriptions.addSubscriptions(k.addListener('seek',function(l){return this.resetToTime(l.time);}.bind(this)));c('setInterval')(this.renderNextComment.bind(this),2000);c('BanzaiODS').bumpEntityKey('vod_comments','www_load');}h.prototype.renderNextComment=function(){if(!this.videoPlayerController.isState('playing'))return;var j=this.videoPlayerController.getCurrentTimePosition();this.onTimeUpdated(j);while(this.queue.length&&this.queue[0].timeoffset<j){var k=this.queue.shift();if(k.timeoffset<j-5)continue;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,k.ufipayload);break;}this.$UFIVODCommentStream1();};h.prototype.fetchNewCommments=function(j,k,l){var m=j+60,n=c('XVODStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.ufiController.getFtEntIdentifier()).setString('target_ufi_instance_id',this.ufiController.getInstanceID()).setFloat('start_time',j).setFloat('end_time',m).setBool('should_backfill',k).getURI();if(this.currentRequest)this.currentRequest.abandon();this.currentRequest=new (c('AsyncRequest'))().setURI(n).setHandler(function(o){var p=o.getPayload();if(p.status==='error')return;if(p.backfillpayload)c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,p.backfillpayload);l(p.ufipayloads);this.queueEndTime=m;}.bind(this)).setFinallyHandler(function(){this.currentRequest=null;}.bind(this));this.currentRequest.send();};h.prototype.onTimeUpdated=function(j){if(j<this.queueEndTime-15||this.currentRequest!==null)return;this.fetchNewCommments(this.queueEndTime,false,function(k){this.queue=this.queue.concat(k);}.bind(this));};h.prototype.resetToTime=function(j){var k=this.ufiController.getFtEntIdentifier();c('UFIToplevelStreamedCommentList').resetCommentList(k,this.ufiController.getInstanceID());c('UFICentralUpdates').didUpdateFeedback(k);this.fetchNewCommments(j,true,function(l){this.queue=l;}.bind(this));};h.prototype.stop=function(){this.subscriptions.release();};h.prototype.$UFIVODCommentStream1=function(){var j=c('UFIToplevelStreamedCommentList').getExistingCommentList(this.ufiController.getFtEntIdentifier(),this.ufiController.getInstanceID());if(!j||j.getActualCommentCount()<5||!this.shouldAutoplayedVODStreamingComments||!this.videoPlayerController.isState('playing'))return;this.shouldAutoplayedVODStreamingComments=false;c('BanzaiODS').bumpEntityKey('vod_comments','www_autoplay');c('UFISharedDispatcher').dispatch(c('UFIInstanceAction').changeOrderingMode(this.ufiController.getInstanceID(),c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING));};var i=new (c('Map'))();f.exports={start:function(j,k){var l=j.getInstanceID();if(i.get(l))return;i.set(l,new h(j,k));},stop:function(j,k){var l=i.get(k);if(!l)return;l.stop();i['delete'](k);}};},null);
__d('UFIController',['csx','invariant','Promise','Arbiter','AsyncRequest','Bootloader','BootloadedComponent.react','CommentPrelude','CommercialBreakUFIOverlay.react','DOM','DOMQuery','XCommentEmbedPluginEmbedAsyncDialogController','ErrorUtils','JSResource','LiveTimer','LtgTranslateAllDispatcher','LtgTranslateAllStore','Parent','React','ReactDOM','Run','ShortProfiles','SubscriptionsHandler','StaticUFI.react','UFIActionLinks.react','UFIActionTypes','UFICallbackStore','UFICentralUpdates','UFICommentFilters','UFICommentLikeSubscription','UFICommentLogger','UFICommentSubscription','UFICommercialBreakController','UFIConfig','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIFeaturedReplyCommentList','UFIFeaturedToplevelCommentList','UFIFeedbackFilters','UFIFeedbackTargets','UFIFetcher','UFIInstanceState','UFILikeSubscription','UFILiveStreamingComments','UFILiveVideoCommentSubscription','UFINewCommentNotifier','UFIRange','UFIReactionStore','UFIReplyCommentList','UFIRetryActions','UFIRootRegistry','UFISharedDispatcher','UFIStoryAction','UFISubscriptionUpdates','UFIToplevelPagedCommentList','UFIToplevelStreamedCommentList','UFITypingSubscriptionController','UFIUIEvents','UFIUserActions','UFIVideoPlayerRegistry','UFIVODStreamingComments','URI','ex','flattenArray','forEachObject','isEmpty','onEnclosingPageletDestroy'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('UFIConstants').UFIPayloadSourceType,k=c('UFIConstants').UFIPaging,l=c('UFIConstants').UFIFeedbackMode,m=function(p,q,r,s){var t=p.getRequestedOffset(),u=p.getRequestedLength(),v=t+u===q,w=v&&n(s)?r-t:u;return new (c('UFIRange'))(t,w);},n=function(p){return p==j.USER_ACTION||p==j.LIVE_SEND;};o.prototype.$UFIController1=function(p,q){if(!this.$UFIController2||q!==j.INITIAL_SERVER)return;this.$UFIController2.startRecording(p);};o.prototype.$UFIController3=function(p,q){if(!this.$UFIController2||q!==j.INITIAL_SERVER)return;var r=this.$UFIController4,s=r.lazyFetch,t=r.disableCSSHiding,u=r.ftentidentifier,v=this.$UFIController5,w=v.feedback,x=v.featuredCommentLists;this.$UFIController2.log(p,q,{num_comments:this.comments&&this.comments.length||0,num_likes:w&&w.likecount||0,features:{is_featured:!!x[u],is_streaming:this.$UFIController6(),is_lazy_fetch:s,is_disable_css_hiding:t}});};o.factory=function(p,q,r){new o(p,q,r);};o.prototype.getRootNode=function(){return this.root;};o.prototype.getFtEntIdentifier=function(){return this.$UFIController4.ftentidentifier;};o.prototype.getInstanceID=function(){return this.$UFIController4.instanceid;};o.prototype.getFluentContentToken=function(){return this.$UFIController4.fluentContentToken;};o.prototype.shouldAutoplayLiveVODComments=function(){return this.$UFIController4.autoplayLiveVODComments;};function o(p,q,r){this.$UFIController2=c('UFIConfig').perfLogger?new (c('UFIConfig').perfLogger)(q.ftentidentifier):null;this.$UFIController1('construct',j.INITIAL_SERVER);this.$UFIController7();this.$UFIController8();this.root=p;this.$UFIController4=q;this.$UFIController4.rootid=this.root.id;this.$UFIController9=null;c('UFIRootRegistry').registerController(p.id,function(){this.$UFIController10();this.$UFIController11();}.bind(this));c('LtgTranslateAllDispatcher').explicitlyRegisterStores([c('LtgTranslateAllStore')]);this.$UFIController12=function(){if(this.$UFIController9===null)this.$UFIController9=c('UFIRootRegistry').isSnowliftNode(this.root.id);return this.$UFIController9;}.bind(this);this.$UFIController13=function(){if(!this.$UFIController14){var ca=this.$UFIController12()?"^.fbPhotosSnowliftFeedback ._37uu":"^form ._37uu",da=c('DOMQuery').scry(this.root,ca);this.$UFIController14=da&&da[0]||null;}return this.$UFIController14;}.bind(this);this.$UFIController15=function(){if(!this.$UFIController16){var ca=c('DOMQuery').scry(this.root,"^.snowliftPayloadRoot ._29qf ._37uu");this.$UFIController16=ca&&ca[0]||null;}return this.$UFIController16;}.bind(this);var s=q.feedbackMode===l.NEVER||q.feedbackMode===l.NONE;this.$UFIController5={payloadSource:null,feedback:null,oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},requestedInitialComments:false,isHidden:s,viewerHasInteractedWithComments:false,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,featuredCommentLists:{},featuredCommentIDs:[],toplevelPagerClickCounts:{},replyPagerClickCounts:{},translateAll:false};this.authorProfiles={};this.commentcounts={};this.comments=[];this.repliesMap={};var t=r.feedbacktargets[0];this.orderingMode=t.defaultcommentorderingmode;q.livevideographqlcomments=t.lvc;if(!this.canRenderHeader())c('Bootloader').loadModules(["UFIActionLinkController"],function(ca){return new ca(p,q,t);},'UFIController');var u=Date.now();if(t.ll)this.liveLikeSubscription=c('UFILikeSubscription').subscribe(t.targetfbid,function(ca){c('UFISubscriptionUpdates').handleLiveLike(q.ftentidentifier,ca,Date.now()-u);});if(t.lc)this.liveCommentSubscription=c('UFICommentSubscription').subscribe(t.targetfbid,function(ca){c('UFISubscriptionUpdates').handleLiveComment(q.ftentidentifier,ca.comment_create_subscribe,Date.now()-u);});if(t.lvc)this.liveVideoCommentSubscription=c('UFILiveVideoCommentSubscription').subscribe(t.targetfbid,function(ca){c('UFISubscriptionUpdates').handleLiveComment(q.ftentidentifier,ca.live_video_comment_create_subscribe,Date.now()-u);});if(t.lcl)this.liveCommentLikeSubscription=c('UFICommentLikeSubscription').subscribe(t.targetfbid,function(ca){c('UFISubscriptionUpdates').handleLiveCommentLike(q.ftentidentifier,ca,Date.now()-u);});if(t.lti&&c('UFIConfig').typingIndicator.subscribe)this.liveTypingSubscription=this.$UFIController17(t,q);var v=null;if(r.featuredcommentlists&&r.featuredcommentlists.comments&&r.featuredcommentlists.comments[q.ftentidentifier]){v=r.featuredcommentlists.comments[q.ftentidentifier];this.$UFIController5.featuredCommentLists[q.ftentidentifier]=new (c('UFIFeaturedToplevelCommentList'))(q.ftentidentifier,v.values,r.comments);}else{var w=r.commentlists.comments,x=w[q.ftentidentifier];v=x[this.orderingMode];}if(r.featuredcommentids)this.$UFIController5.featuredCommentIDs=r.featuredcommentids;this.ranges={};this.replyRanges={};this.commentcounts={};this.ranges[this.orderingMode]=new (c('UFIRange'))(v.range.offset,v.range.length);this.$UFIController5.oldRange={offset:v.range.offset,length:this.comments&&this.comments.length||0};var y=void 0,z=void 0,aa=void 0;if(r.commentlists.replies)for(y=0;y<v.values.length;y++){z=v.values[y];aa=r.commentlists.replies[z];if(aa){this.commentcounts[z]=this.getReplyCommentList(z).getCommentCount();this.replaceReplyRange(z,new (c('UFIRange'))(aa.range.offset,aa.range.length));}}if(r.featuredcommentlists)if(r.featuredcommentlists.replies)for(y=0;y<v.values.length;y++){z=v.values[y];aa=r.featuredcommentlists.replies[z];if(aa){this.$UFIController5.featuredCommentLists[z]=new (c('UFIFeaturedReplyCommentList'))(q.ftentidentifier,z,aa.values,r.comments);this.commentcounts[z]=this.getReplyCommentList(z).getCommentCount();this.replaceReplyRange(z,c('UFIRange').combine(new (c('UFIRange'))(aa.range.offset,aa.range.length),this.replyRanges[z]));}}this.$UFIController18=null;this.$UFIController19=null;this.ufiCentralUpdatesSubscriptions=[c('UFICentralUpdates').subscribe('feedback-updated',function(ca,da){var ea=da.updates;if(q.ftentidentifier in ea){this.$UFIController5.payloadSource=da.payloadSource;this.fetchAndUpdate(this.$UFIController5.payloadSource);}}.bind(this)),c('UFICentralUpdates').subscribe('instance-updated',function(ca,da){var ea=da.updates;if(q.instanceid in ea){var fa=ea[q.instanceid];if(fa.editcommentid||fa.commentsToggling||fa.inCommercialBreak){this.$UFIController5.payloadSource=da.payloadSource;if(this.canRenderHeader())this.renderHeader(this.$UFIController5.feedback);this.render();}}}.bind(this)),c('UFICentralUpdates').subscribe('actor-changed',function(ca,da){this.$UFIController20();}.bind(this))];this.pageletDestroySubscription=c('onEnclosingPageletDestroy')(this.root,function(){this.$UFIController11();this.$UFIController10();}.bind(this));this.ufiUIPageClearedSubscription=c('Arbiter').subscribe(c('UFIUIEvents').PageCleared,function(){this.$UFIController11();this.$UFIController10();}.bind(this));this.onUnloadSubscription=c('Run').onUnload(function(){return this.$UFIController21();}.bind(this));this.getToplevelCommentList();c('UFICentralUpdates').handleUpdate(j.INITIAL_SERVER,r);if(q.viewas)this.viewasUFICleanSubscription=c('Arbiter').subscribe('pre_page_transition',function(ca,da){if(q.viewas!==new (c('URI'))(da.to).getQueryData('viewas')){c('UFIToplevelPagedCommentList').resetCommentListsForFeedbackTargetID(q.ftentidentifier);c('UFIToplevelStreamedCommentList').resetAllCommentLists(q.ftentidentifier);}});if(this.$UFIController6()){var ba=null;if(r.comments&&r.comments.length>0)ba=r.comments[r.comments.length-1].fbid;c('UFILiveStreamingComments').start(q.ftentidentifier,t.commentcount,ba);c('Run').onLeave(function(){return c('UFILiveStreamingComments').stop(this.$UFIController4.ftentidentifier);}.bind(this));}if(!q.lazyFetch&&!this.canRenderHeader())this.$UFIController22(t);if(this.$UFIController4.fluentContentToken)c('UFIVideoPlayerRegistry').registerUFIController(this,function(ca){if(q.enableVODStreamingComments)c('UFIVODStreamingComments').start(this,ca);if(q.islivestreaming||q.isLiveVOD)c('UFICommercialBreakController').start(q.instanceid,ca);}.bind(this),function(){if(q.enableVODStreamingComments)c('UFIVODStreamingComments').stop(this.$UFIController4.ftentidentifier,q.instanceid);if(q.islivestreaming||q.isLiveVOD)c('UFICommercialBreakController').stop(q.instanceid);}.bind(this));this.$UFIController3('construct',j.INITIAL_SERVER);}o.prototype.$UFIController17=function(p,q){return new (c('UFITypingSubscriptionController'))(p.targetfbid,function(r){var s=c('UFIStoryAction').typingStopped(q.ftentidentifier);if(r.friendCount){s=c('UFIStoryAction').friendTyping(q.ftentidentifier);}else if(r.otherCount&&c('UFIConfig').typingIndicator.fromEveryone)s=c('UFIStoryAction').someoneTyping(q.ftentidentifier);c('UFISharedDispatcher').dispatch(s);});};o.prototype.$UFIController11=function(){var p=this.$UFIController13();if(p)c('ReactDOM').unmountComponentAtNode(p);if(this.$UFIController12()){var q=this.$UFIController15();if(q)c('ReactDOM').unmountComponentAtNode(q);}c('ReactDOM').unmountComponentAtNode(this.root);};o.prototype.unitTestOnlySetFeedbackIntoState=function(p){this.$UFIController5.feedback=p;};o.prototype.$UFIController7=function(){if(!this.$UFIController23){this.$UFIController24=new (c('UFIDispatcher'))();this.$UFIController25={UFICallbackStore:new (c('UFICallbackStore'))(this.$UFIController24),UFIReactionStore:new (c('UFIReactionStore'))(this.$UFIController24)};this.$UFIController23=new (c('SubscriptionsHandler'))();this.$UFIController23.addSubscriptions(this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.CANCEL,function(){return this.$UFIController20();}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_LIKE,function(p){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').changeCommentLike(p.comment.id,p.like,{source:this.$UFIController4.source,target:p.target});}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.CHANGE_REACTION,function(p){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').changeCommentReaction(p.comment.id,p.reactionType,{source:this.$UFIController4.source,target:p.target});}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.REMOVE,function(p){this.$UFIController5.viewerHasInteractedWithComments=true;c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(q){return (q.show(function(){c('UFIUserActions').removeComment(p.comment.id,{source:this.$UFIController4.source,oneclick:false,target:p.target});p.onConfirm();}.bind(this)));}.bind(this),'UFIController');}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.EDIT,function(p){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'isediting',true);c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'editcommentid',p.comment.id);}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TRANSLATE,function(p){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').translateComment(p.comment,{source:this.$UFIController4.source,target:p.target},p.callback);}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TRANSLATE_ARRAY,function(p){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').translateCommentArray(p.commentArray,p.callback);}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_MARK_AS_SPAM,function(p){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').setHideAsSpam(p.comment.id,p.is_spam,{source:this.$UFIController4.source,target:p.target});}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_INLINE_BAN,function(p){return c('UFIUserActions').banUser(p.comment,p.ownerid,p.is_banned,{source:this.$UFIController4.source,target:p.target});}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.EMBED,function(p){var q=c('XCommentEmbedPluginEmbedAsyncDialogController').getURIBuilder().setString('comment_id',p.comment.id).getURI();new (c('AsyncRequest'))(q).send();}),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.SHOW_CONSTITUENT_TITLE,function(p){c('UFIUserActions').showConstituentTitle(p.comment);}),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.HIDE_CONSTITUENT_TITLE,function(p){c('UFIUserActions').hideConstituentTitle(p.comment);}),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.TYPING_CHANGE,function(p){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').typingChange(this.$UFIController4.ftentidentifier,p.state);}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.SUBMIT_NEW,function(p){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFINewCommentNotifier').onNewComment(this.$UFIController26(),this.$UFIController4,p.comment,p.target,p.replyCommentID,p.timestamp);}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.SUBMIT_EDIT,function(p){var q=p.comment,r=p.commentData,s=p.target;this.$UFIController5.viewerHasInteractedWithComments=true;if(!r.visibleValue&&!r.attachedPhoto&&!r.attachedVideo&&!r.attachedSticker){c('Bootloader').loadModules(["UFICommentRemoveDialog"],function(t){return (t.show(function(){return (c('UFIUserActions').removeComment(q.id,{source:this.$UFIController4.source,oneclick:false,target:s}));}.bind(this)));}.bind(this),'UFIController');}else c('UFIUserActions').editComment(q.id,r.visibleValue,r.encodedValue,{source:this.$UFIController4.source,target:s,attachedPhoto:r.attachedPhoto,attachedVideo:r.attachedVideo,attachedSticker:r.attachedSticker});c('UFIInstanceState').updateStateField(this.$UFIController4.instanceid,'locallycomposed',q.id,true);this.$UFIController20();}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').COMMENT.REMOVE_PREVIEW,function(p){return c('UFIUserActions').removePreview(p.comment,{source:this.$UFIController4.source,target:p.target});}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.RETRY_SUBMIT,function(p){return c('UFIRetryActions').retrySubmit(p.comment,{source:this.$UFIController4.source});}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').STORY.PAGE_IN_COMMENTS,function(p){this.$UFIController5.payloadSource=j.USER_ACTION;this.$UFIController27(p.commentID,p.direction,new (c('UFIRange'))(p.nextRange.offset,p.nextRange.length));this.fetchAndUpdateWithLogs(this.$UFIController5.payloadSource);}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').STORY.TOGGLE_REPLIES,function(p){this.$UFIController5.payloadSource=j.USER_ACTION;this.$UFIController5.viewerHasInteractedWithComments=true;var q=p.commentID,r=this.$UFIController5.repliesExpandedMap[q];if(r){delete this.$UFIController5.isActiveLoading[q];this.$UFIController5.repliesExpandedMap[q]=false;this.render();}else{this.$UFIController5.focusedReplyComposer={replyID:'replycomposer-'+q,initiatorComment:null};this.$UFIController27(q,k.BOTTOM,this.$UFIController28(q));this.fetchAndUpdateWithLogs(this.$UFIController5.payloadSource);}}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').STORY.SHOW_REPLIES,function(p){this.$UFIController5.payloadSource=j.USER_ACTION;this.$UFIController5.viewerHasInteractedWithComments=true;this.$UFIController5.focusedReplyComposer={replyID:'replycomposer-'+p.commentID,initiatorComment:p.initiatorComment};this.$UFIController27(p.commentID,k.BOTTOM,this.$UFIController28(p.commentID));this.fetchAndUpdateWithLogs(this.$UFIController5.payloadSource);}.bind(this)),this.$UFIController25.UFICallbackStore.on(c('UFIActionTypes').STORY.COMMENTS_ARRIVED,function(p){this.$UFIController5.payloadSource=p.source;this.$UFIController5.showLoadingUFI=false;this.$UFIController5.isActiveLoading={};this.$UFIController5.commentIDToFocusOnMount=p.source===j.USER_ACTION?this.$UFIController29(p.newOffset,p.newLength):null;this.$UFIController5.oldRange={offset:p.newOffset,length:p.newLength};this.render();if(p.source==j.ENDPOINT_COMMENT_FETCH){c('Arbiter').inform(c('UFIUIEvents').CommentPager);if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetchReceived(this.$UFIController4.ftentidentifier,Date.now());}}.bind(this)));}};o.prototype.$UFIController8=function(){this.$UFIController30=[c('UFISharedDispatcher').register(function(p){switch(p.type){case c('UFIActionTypes').INSTANCE.TOGGLE_COMMENTS:if(p.instanceID!==this.$UFIController4.instanceid)return;this.$UFIController5.payloadSource=j.COLLAPSE_ACTION;this.$UFIController5.isHidden=!this.$UFIController5.isHidden;this.$UFIController5.viewerHasInteractedWithComments=true;this.render();break;case c('UFIActionTypes').INSTANCE.CHANGE_ORDER_MODE:if(p.instanceID!==this.$UFIController4.instanceid)return;this.$UFIController5.payloadSource=j.USER_ACTION;this.orderingMode=p.mode;this.$UFIController5.showLoadingUFI=true;this.$UFIController5.viewerHasInteractedWithComments=true;this.render();this.fetchAndUpdate(this.$UFIController5.payloadSource);break;}}.bind(this))];};o.prototype.getStores=function(){return this.$UFIController25;};o.prototype.$UFIController28=function(p){var q=this.commentcounts[p],r=Math.min(q,this.$UFIController4.pagesize);return new (c('UFIRange'))(q-r,r);};o.prototype.$UFIController27=function(p,q,r){var s=this.$UFIController5,t=s.isActiveLoading,u=s.repliesExpandedMap,v=s.toplevelPagerClickCounts,w=s.replyPagerClickCounts,x=this.$UFIController4.ftentidentifier;this.$UFIController5.viewerHasInteractedWithComments=true;var y=p!==x;this.$UFIController5.translateAll=c('LtgTranslateAllStore').getTranslateAllEnabledForID(x);t[p]=q;if(y){u[p]=true;}else this.$UFIController5.hasPagedToplevel=true;if(p==x){var z=v[this.orderingMode]||0;v[this.orderingMode]=z+1;this.getRange().updateRequestedRange(r.offset,r.length);}else{var aa=w[p]||0;w[p]=aa+1;this.replyRanges[p].updateRequestedRange(r.offset,r.length);}};o.prototype.$UFIController6=function(){if(this.$UFIController4.livevideographqlcomments)return false;if(!this.$UFIController4.islivestreaming)return false;return true;};o.prototype.$UFIController31=function(){return this.orderingMode===c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING;};o.prototype.$UFIController26=function(){if(!this.$UFIController32)this.$UFIController32=c('Parent').byTag(this.root,'form');return this.$UFIController32;};o.prototype.$UFIController20=function(){c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'isediting',false);c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'editcommentid',null);};o.prototype.$UFIController33=function(){this.$UFIController5.payloadSource=j.USER_ACTION;this.$UFIController5.showLoadingUFI=true;this.$UFIController5.requestedInitialComments=true;var p=this.getToplevelCommentList().getCommentCount(),q=Math.min(p,this.$UFIController4.numLazyComments);c('forEachObject')(this.ranges,function(r){return r.updateRequestedRange(p-q,q);});this.fetchAndUpdate(this.$UFIController5.payloadSource);c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIController4.ftentidentifier,function(r){if(this.canRenderHeader()){this.renderHeader(r);}else this.$UFIController22(r);}.bind(this));};o.prototype.$UFIController22=function(p){if(this.shouldShowCommentOrderingModeSelector(p))c('DOM').scry(this.root,"^form ._3csb").slice(0,1).forEach(function(q){c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelectorContainer.react').__setRef('UFIController'),feedback:p,ufiInstanceID:this.$UFIController4.instanceid}),q);}.bind(this));};o.prototype.canRenderHeader=function(){var p=this.$UFIController13();return !!p;};o.prototype.renderHeader=function(p){if(!this.canRenderHeader())return;var q=c('UFIInstanceState').getKeyForInstance(this.$UFIController4.instanceid,'inCommercialBreak');if(q){c('ReactDOM').render(c('React').createElement(c('CommercialBreakUFIOverlay.react'),null),this.$UFIController13());return;}var r=this.$UFIController4.hasReactions&&(this.$UFIController4.feedbackMode==='none'||this.$UFIController4.feedbackMode==='toggle')&&p.displayreactions&&this.shouldShowCommentOrderingModeSelector(p)&&(!this.$UFIController4.lazyFetch||this.$UFIController5.requestedInitialComments);c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController24,stores:this.$UFIController25},c('React').createElement(c('UFIActionLinks.react'),{root:this.root,contextArgs:this.$UFIController4,feedbacktarget:p,showCommentOrderingModeSelector:r})),this.$UFIController13());if(this.$UFIController12()&&this.$UFIController15())c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController24,stores:this.$UFIController25},c('React').createElement(c('UFIActionLinks.react'),{root:this.root,contextArgs:this.$UFIController4,feedbacktarget:p,showCommentOrderingModeSelector:r,hideActorSelector:true})),this.$UFIController15());};o.prototype.render=function(){var p=this.$UFIController5.payloadSource;this.$UFIController1('render',p);if(this.$UFIController5.showLoadingUFI){c('ReactDOM').render(this.$UFIController34(),this.root);this.$UFIController3('render',p);return;}var q=c('UFIInstanceState').getKeyForInstance(this.$UFIController4.instanceid,'commentsToggling'),r=this.$UFIController5.feedback,s=r.reactionsentences,t=r.likesentences,u=r.replysocialsentencemaxreplies,v=this.comments.length||!c('isEmpty')((s||t).current);if((v&&n(p)||q)&&this.$UFIController4.feedbackMode!==l.NEVER){this.$UFIController5.isHidden=false;c('CommentPrelude').expand(this.root,false,'ufi_controller');}if(this.$UFIController4.disableCSSHiding&&this.$UFIController5.isHidden){this.$UFIController3('render',p);c('ReactDOM').unmountComponentAtNode(this.root);return;}if(this.$UFIController4.lazyFetch&&!this.$UFIController5.requestedInitialComments){c('ReactDOM').render(this.$UFIController34(),this.root);this.$UFIController3('render',p);this.$UFIController33();return;}var w=this.getRange();if(this.$UFIController18===null)this.$UFIController18=w.getOffset()+w.getLength()-1;var x=u||-1,y={};y[this.$UFIController4.ftentidentifier]=new (c('UFIRange'))(w.offset,w.length).updateRequestedRange(w.requestedOffset,w.requestedLength);for(var z in this.replyRanges)y[z]=new (c('UFIRange'))(this.replyRanges[z].offset,this.replyRanges[z].length).updateRequestedRange(this.replyRanges[z].requestedOffset,this.replyRanges[z].requestedLength);var aa=babelHelpers['extends']({},this.$UFIController5.defaultRepliesExpandedMap,this.$UFIController5.repliesExpandedMap),ba=!!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier],ca=this.$UFIController31()?true:this.getToplevelCommentList().getClientHasAll()&&w.offset===0&&w.length===this.getToplevelCommentList().getCommentCount(),da=this.$UFIController4.mayLogVPVs&&this.orderingMode===c('UFIConstants').UFICommentOrderingMode.FILTERED,ea=this.$UFIController35(p),fa=this.$UFIController5.viewerHasInteractedWithComments,ga=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController24,stores:this.$UFIController25},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController5.feedback,contextArgs:this.$UFIController4,repliesMap:this.repliesMap,commentCounts:this.commentcounts,deletedCounts:this.$UFIController5.deletedCounts,availableComments:this.comments,source:this.$UFIController4.source,ranges:y,authorProfiles:this.authorProfiles,loggingOffset:this.$UFIController18,replySocialSentenceMaxReplies:x,orderingMode:this.orderingMode,hideOrderingModeSelector:ba,commentPermalinks:this.$UFIController5.commentPermalinks,canAddCommentMap:this.$UFIController5.canAddCommentMap,canReplyMap:this.$UFIController5.canReplyMap,focusReply:ea,commentsToggling:q,isActiveLoading:this.$UFIController5.isActiveLoading,repliesExpandedMap:aa,hasPagedToplevel:this.$UFIController5.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController5.commentIDToFocusOnMount,hideToplevelPager:ca,shouldLogVPVs:da,viewerHasInteractedWithComments:fa,featuredCommentIDs:this.$UFIController5.featuredCommentIDs}));c('ReactDOM').render(ga,this.root);c('LiveTimer').updateTimeStamps();if(this.$UFIController26())c('Arbiter').inform(c('UFIUIEvents').Changed,{form:this.$UFIController26()});if(p!=j.INITIAL_SERVER)c('Arbiter').inform('reflow');this.$UFIController5.focusedReplyComposer=null;this.$UFIController3('render',p);};o.prototype.$UFIController35=function(p){if(p===j.INITIAL_SERVER&&this.$UFIController5.feedback.permalinkcommentid){return {replyID:'replycomposer-'+this.$UFIController5.feedback.permalinkcommentid};}else if(this.$UFIController5.focusedReplyComposer)return this.$UFIController5.focusedReplyComposer;return null;};o.prototype.$UFIController29=function(p,q){var r=this.$UFIController5.oldRange;if(r.offset!=p||r.length!=q){var s=p<r.offset?r.length:0;if(s<q)return this.comments[s].id;}return this.$UFIController5.commentIDToFocusOnMount;};o.prototype.$UFIController36=function(p,q,r){if(q.id===p.permalinkcommentid)return true;if(r>1)return true;if(r>0&&q.interestingReplyOffset===undefined)return true;var s=q.author===p.viewerid;if(s&&r==1)return true;return false;};o.prototype.getNewRange=function(p,q,r){if(this.$UFIController31()){return new (c('UFIRange'))(0,q.feedcarded?4:50);}else return m(this.getRange(),this.commentcounts[q.ftentidentifier],r,p);};o.prototype.getNewReplyRange=function(p,q,r){var s=q.id;if(this.replyRanges[s]){return m(this.getReplyRange(s),this.commentcounts[s],r,p);}else if(q.interestingReplyOffset!==undefined){return new (c('UFIRange'))(q.interestingReplyOffset,1);}else{var t=this.$UFIController5.feedback.isranked?0:Math.min(r,2);return new (c('UFIRange'))(0,t);}};o.prototype.fetchAndUpdateWithLogs=function(p){!(p===this.$UFIController5.payloadSource)?i(0):void 0;this.$UFIController37(p,true);};o.prototype.fetchAndUpdate=function(p){!(p===this.$UFIController5.payloadSource)?i(0):void 0;this.$UFIController37(p,false);};o.prototype.$UFIController38=function(p){return {numPagerClicks:p?this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]||0:null,viewAs:this.$UFIController4.viewas,feedContext:this.$UFIController4.feedcontext,feedbackSource:this.$UFIController4.source,streamingOrderReversed:this.$UFIController4.streamingCommentOrderReversed,translateAll:this.$UFIController5.translateAll};};o.prototype.$UFIController39=function(p,q){return {numPagerClicks:q?this.$UFIController5.replyPagerClickCounts[p]||0:null,viewAs:this.$UFIController4.viewas,feedContext:this.$UFIController4.feedcontext,translateAll:this.$UFIController5.translateAll};};o.prototype.$UFIController40=function(p){var q=this.$UFIController5.feedback,r=this.getToplevelCommentList(),s=this.getNewRange(p,this.$UFIController4,r.getCommentCount()),t=c('UFIFetcher').fetchCommentsOrThrow(r,s,this.$UFIController38(false));this.$UFIController41(s,t);var u=c('UFICommentFilters').getAuthors(t);t.forEach(function(v){var w=v.id,x=this.getReplyCommentList(w),y=this.getNewReplyRange(p,v,x.getCommentCount()),z=c('UFIFetcher').fetchCommentsOrThrow(x,y,this.$UFIController39(w,false));u.push.apply(u,c('UFICommentFilters').getAuthors(z));this.$UFIController42(y,v,z);}.bind(this));u.push.apply(u,c('UFIFeedbackFilters').getRequestedIDs(q));this.authorProfiles=c('ShortProfiles').getMultiNow(u);};o.prototype.$UFIController37=function(p,q){var r=c('UFIFeedbackTargets').getFeedbackTargetIfExists(this.$UFIController4.ftentidentifier);if(!r){var s=new Error(c('ex')('Feedback target %s not present while rendering UFI with source %s',this.$UFIController4.ftentidentifier,p));s.type='warn';c('ErrorUtils').reportError(s,true);return;}this.$UFIController5.feedback=r;if(n(p))this.render();if(this.canRenderHeader())this.renderHeader(r);if(!this.$UFIController5.isHidden)if(p===j.INITIAL_SERVER&&c('UFIConfig').syncInitialRender){this.$UFIController40(p);this.$UFIController24.dispatch(c('UFIStoryAction').commentsArrived(this.getRange().getOffset(),this.comments.length,p));}else this.fetchAllComments(p,q).done(function(){return (this.$UFIController24.dispatch(c('UFIStoryAction').commentsArrived(this.getRange().getOffset(),this.comments.length,p)));}.bind(this));};o.prototype.fetchAllComments=function(p,q){return c('Promise').resolve().then(function(){return this.fetchCommentsForFeedbackTarget(p,q).then(function(r){var s=c('UFICommentFilters').getAuthors(r);if(!this.$UFIController5.feedback.isthreaded||!r.length)return s;return this.fetchAllReplyIDsForComments(r,p,q).then(function(t){return s.concat(t);});}.bind(this)).then(function(r){return (c('UFIFeedbackFilters').getRequestedIDs(this.$UFIController5.feedback).concat(r));}.bind(this));}.bind(this)).then(function(r){return c('UFIFetcher').fetchShortProfiles(r);}).then(function(r){this.authorProfiles=r;}.bind(this));};o.prototype.fetchCommentsForFeedbackTarget=function(p,q){var r=this.getToplevelCommentList().getCommentCount(),s=this.getNewRange(p,this.$UFIController4,r);return c('UFIFetcher').fetchComments(this.getToplevelCommentList(),s,this.$UFIController38(q)).then(function(t){this.$UFIController41(s,t);return t;}.bind(this));};o.prototype.$UFIController41=function(p,q){var r=this.getToplevelCommentList(),s=this.$UFIController4.ftentidentifier,t=this.$UFIController5,u=t.deletedCounts,v=t.canAddCommentMap,w=t.canReplyMap,x=t.commentPermalinks;this.replaceRange(p);this.comments=q;this.commentcounts[s]=r.getCommentCount();u[s]=r.getDeletedCount();v[s]=!this.$UFIController5.featuredCommentLists[s];q.forEach(function(y){var z=y.id,aa=y.cancomment;w[z]=aa;x[z]=r.getPermalinkForComment(z);});this.$UFIController43(q);};o.prototype.fetchRepliesForComment=function(p,q,r){var s=p.id,t=this.getReplyCommentList(s).getCommentCount(),u=this.getNewReplyRange(q,p,t);return c('UFIFetcher').fetchComments(this.getReplyCommentList(s),u,this.$UFIController39(s,r)).then(function(v){this.$UFIController42(u,p,v);return v;}.bind(this));};o.prototype.$UFIController42=function(p,q,r){var s=q.id,t=this.getReplyCommentList(s),u=this.$UFIController5,v=u.deletedCounts,w=u.canAddCommentMap,x=u.featuredCommentLists,y=u.defaultRepliesExpandedMap,z=u.feedback,aa=u.canReplyMap,ba=u.commentPermalinks;this.replaceReplyRange(s,p);this.repliesMap[s]=r;this.commentcounts[s]=t.getCommentCount();v[s]=t.getDeletedCount();w[s]=!x[s];y[s]=this.$UFIController36(z,q,r.length);r.forEach(function(ca){var da=ca.id,ea=ca.cancomment;aa[da]=ea;ba[da]=t.getPermalinkForComment(da);});this.$UFIController43(r);};o.prototype.$UFIController43=function(p){var q=this.$UFIController4.ftentidentifier,r=[],s=[],t=this.repliesMap;p.forEach(function(u){if(u.istranslatable)c('LtgTranslateAllDispatcher').dispatch({type:c('UFIActionTypes').TRANSLATION.HAS_TRANSLATABLE_CONTENT,id:q});s=s.concat([u]);if(t[u.id])s=s.concat(t[u.id]);});s.forEach(function(u){if(u.istranslatable&&!u.translationdata)r[r.length]=u.id;});if(r.length>0)c('LtgTranslateAllDispatcher').dispatch({type:c('UFIActionTypes').TRANSLATION.UPDATE_TRANSLATABLE_COMMENTS,id:q,comment_ids:r});};o.prototype.fetchAllReplyIDsForComments=function(p,q,r){return new (c('Promise').all)(p.map(function(s){return this.fetchRepliesForComment(s,q,r).then(function(t){return c('UFICommentFilters').getAuthors(t);});}.bind(this))).then(function(s){return c('flattenArray')(s);});};o.prototype.getToplevelCommentList=function(){var p=this.$UFIController4;if(this.$UFIController5.featuredCommentLists[p.ftentidentifier])return this.$UFIController5.featuredCommentLists[p.ftentidentifier];if(this.$UFIController31())return c('UFIToplevelStreamedCommentList').getCommentList(p.ftentidentifier,p.islivestreaming?c('UFIToplevelStreamedCommentList').GLOBAL_ID:p.instanceid);return c('UFIToplevelPagedCommentList').getCommentList(p.ftentidentifier,this.orderingMode);};o.prototype.getReplyCommentList=function(p){if(p in this.$UFIController5.featuredCommentLists)return this.$UFIController5.featuredCommentLists[p];return c('UFIReplyCommentList').getCommentList(this.$UFIController4.ftentidentifier,p,this.orderingMode);};o.prototype.getRange=function(){if(!(this.orderingMode in this.ranges)){var p=this.getToplevelCommentList().getCommentCount(),q=Math.min(p,this.$UFIController4.defaultNumCommentsToExpand);this.ranges[this.orderingMode]=new (c('UFIRange'))(p-q,q);}return this.ranges[this.orderingMode];};o.prototype.replaceRange=function(p){this.ranges[this.orderingMode]=p;};o.prototype.getReplyRange=function(p){if(!(p in this.replyRanges))this.replyRanges[p]=new (c('UFIRange'))();return this.replyRanges[p];};o.prototype.replaceReplyRange=function(p,q){this.replyRanges[p]=q;};o.prototype.$UFIController10=function(){this.$UFIController44();this.$UFIController45();this.$UFIController46();this.$UFIController47();this.$UFIController48();this.$UFIController49();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();};o.prototype.$UFIController21=function(){this.$UFIController46();};o.prototype.$UFIController49=function(){var p=this.$UFIController4;c('UFICommercialBreakController').stop(p.instanceid);};o.prototype.$UFIController48=function(){var p=this.$UFIController4;c('UFIVODStreamingComments').stop(p.ftentidentifier,p.instanceid);};o.prototype.$UFIController44=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(p){return p&&c('UFICentralUpdates').unsubscribe(p);});};o.prototype.$UFIController45=function(){var p=[this.pageletDestroySubscription,this.viewasUFICleanSubscription,this.ufiUIPageClearedSubscription];p.forEach(function(q){try{q&&c('Arbiter').unsubscribe(q);}catch(r){}});this.pageletDestroySubscription=null;this.viewasUFICleanSubscription=null;this.ufiUIPageClearedSubscription=null;};o.prototype.$UFIController46=function(){var p=[this.liveLikeSubscription,this.liveCommentSubscription,this.liveVideoCommentSubscription,this.liveCommentLikeSubscription,this.liveTypingSubscription];p.forEach(function(q){return q&&q.unsubscribe();});};o.prototype.$UFIController47=function(){if(this.$UFIController23){this.$UFIController23.release();this.$UFIController23=null;}this.$UFIController30.forEach(function(p){return c('UFISharedDispatcher').unregister(p);});};o.prototype.$UFIController34=function(){var p=this.$UFIController4;return (c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController24,stores:this.$UFIController25},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController5.feedback,id:this.$UFIController4.ftentidentifier,contextArgs:p,commentCounts:this.commentcounts,loadingComments:true})));};o.prototype.shouldShowCommentOrderingModeSelector=function(p){var q=this.getToplevelCommentList().getCommentCount()||p.commentcount||0;return p.orderingmodes&&q>=c('UFIConstants').minCommentsForOrderingModeSelector&&!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier];};f.exports=o;},null);
__d('UFIMentionsInputProxy.react',['cx','Promise','JSResource','JSResourceReference','React','emptyFunction','setImmediate'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'UFIMentionsInputProxy',getInitialState:function(){return {component:null,viewComponent:null};},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},focus:function(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(j){this._fillCmdBuffer({fn:'insertMention',args:[j]});},insertEmoticon:function(j){this._fillCmdBuffer({fn:'insertEmoticon',args:[j]});},_bootload:function(){c('Promise').all([c('JSResource')('UFIMentionsInput.react').__setRef('UFIMentionsInputProxy.react').load(),new (c('Promise'))(function(j){if(this.props.viewComponent instanceof c('JSResourceReference')){this.props.viewComponent.load().done(j);}else j(this.props.viewComponent);}.bind(this))]).done(function(j){var k=j[0],l=j[1];if(this.isMounted())this.setState({component:k,viewComponent:l});}.bind(this));},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function(j){if(this.refs.mentionsinputchild){return this._execCmd(j);}else this._cmdBuffer=this._cmdBuffer.concat([j]);},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var j=this._cmdBuffer[0];this._execCmd(j);this._cmdBuffer=this._cmdBuffer.slice(1);c('setImmediate')(this._drainFnBuffer);}},_execCmd:function(j){var k=this.refs.mentionsinputchild;return k[j.fn].apply(k,j.args);},_renderProxyInput:function(){var j="_1osa mentionsHidden";return (c('React').createElement('input',{className:j,name:'add_comment_text',ref:'proxyInput',onFocus:this.focus}));},_renderDummy:function(){var j="UFIAddCommentInput _1osb _1osc";return (c('React').createElement('div',{onFocus:this.focus,onClick:this.focus,onTouchStart:c('emptyFunction'),onMouseOver:this._bootload},c('React').createElement('div',{className:j},this._renderProxyInput(),this.props.placeholder)));},render:function(){var j=this.state.component;if(!j)return this._renderDummy();return (c('React').createElement(j,babelHelpers['extends']({key:'mentionsinputchild',ref:'mentionsinputchild'},this.props,{viewComponent:this.state.viewComponent}),this.props.children));}});f.exports=i;},null);
__d('MultiBootstrapDataSource',['DataSource'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('DataSource'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this._bootstrapEndpoints=k.bootstrapEndpoints;}j.prototype.bootstrapWithoutToken=function(){'use strict';for(var k=0;k<this._bootstrapEndpoints.length;k++)this.fetch(this._bootstrapEndpoints[k].endpoint,this._bootstrapEndpoints[k].data||{},{bootstrap:true});};f.exports=j;},null);
__d('FeedComposerIDStore',['ReactComposerEvents','Arbiter','SubscriptionsHandler'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={_composerID:null,_subscriptions:c('SubscriptionsHandler'),set:function(i){this._subscriptions=new (c('SubscriptionsHandler'))();this._composerID=i;this._subscribeComposerResetEvent();},get:function(){if(!this._composerID)throw new Error('ID Store has not yet been initialized via set()');return this._composerID;},_subscribeComposerResetEvent:function(){if(!this._composerID)throw new Error('Composer ID cannot be null');var i=c('Arbiter').subscribeOnce(c('ReactComposerEvents').COMPOSER_RESET+this._composerID,function(j,k){if(k&&k.newComposerID){this._composerID=k.newComposerID;this._subscribeComposerResetEvent();}}.bind(this));this._subscriptions.addSubscriptions(i);}};f.exports=h;},null);
__d('ReactComposerFocusInit',['invariant','DOM','DOMContainer.react','React','ReactDOM'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={handler:function(j,k,l){var m=c('DOM').create('div'),n=j.parentNode;c('ReactDOM').render(c('React').createElement(l,{composerID:k},c('React').createElement(c('DOMContainer.react'),{display:'block'},j)),m);!n?h(0):void 0;n.appendChild(m);},preload:function(){}};f.exports=i;},null);
__d("XReactFeedComposerXBootloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/feedx\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},friend_list_id:{type:"String"},section_id:{type:"String"},target_id:{type:"String",required:true}});},null);
__d('ReactFeedComposerX',['csx','cx','invariant','ReactComposerAttachmentType','ReactComposerEvents','ReactComposerFocusInit','Arbiter','AsyncRequest','ComposerEntryPointRef','CSS','DOM','Event','FeedComposerIDStore','Run','SubscriptionsHandler','XReactComposerLoggingODSController','XReactFeedComposerXBootloadController','$'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(l){this.$ReactFeedComposerX6=l.root;this.$ReactFeedComposerX2=l.composerID;this.$ReactFeedComposerX10=l.targetID;this.$ReactFeedComposerX3=l.composerType;this.$ReactFeedComposerX5=l.friendListID;this.$ReactFeedComposerX7=l.sectionID;this.$ReactFeedComposerX1=false;this.$ReactFeedComposerX4=c('DOM').find(this.$ReactFeedComposerX6,'form');this.$ReactFeedComposerX11=c('DOM').find(this.$ReactFeedComposerX6,"._3en1");this.$ReactFeedComposerX9=new (c('SubscriptionsHandler'))();this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(this.$ReactFeedComposerX6,'click',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(this.$ReactFeedComposerX11,'keydown',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(this.$ReactFeedComposerX4,'success',this.$ReactFeedComposerX13.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedComposerX2,this.$ReactFeedComposerX14.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/focuscomposer/'+this.$ReactFeedComposerX2,this.$ReactFeedComposerX12.bind(this)),c('Arbiter').subscribe('ReactComposerFocus/reset/'+this.$ReactFeedComposerX2,function(){this.$ReactFeedComposerX11.value='';}.bind(this)));c('FeedComposerIDStore').set(this.$ReactFeedComposerX2);var m=c('DOM').find(this.$ReactFeedComposerX6,"._4d6h"),n=c('DOM').scry(m,'input[name="composer_photo[]"]')[0];if(n){this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(n,'click',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(n,'change',this.$ReactFeedComposerX12.bind(this)));if(n.files&&n.files.length>0)this.$ReactFeedComposerX12();}this.$ReactFeedComposerX8=c('DOM').scry(this.$ReactFeedComposerX6,"._4-h7");this.$ReactFeedComposerX8.forEach(function(o){return this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(o,'click',this.$ReactFeedComposerX15.bind(this)));}.bind(this));if(l.jsModules&&l.jsModules.composerFocus&&l.gks&&l.gks.focusExperiment)c('ReactComposerFocusInit').handler(c('$')('feedx_container'),this.$ReactFeedComposerX2,l.jsModules.composerFocus);c('Run').onLeave(this.$ReactFeedComposerX14.bind(this));}k.prototype.$ReactFeedComposerX15=function(l){var m=l.getTarget(),n=null;while(m){if(m.nodeType===1&&m.nodeName==='A'){n=m;break;}m=m.parentNode;}!(n!==null)?j(0):void 0;var o=c('CSS').hasClass(n,"._5qtn");if(o)return;this.$ReactFeedComposerX8.forEach(function(r){return c('CSS').removeClass(r,"_5qtn");});c('CSS').addClass(n,"_5qtn");var p=c('DOM').find(this.$ReactFeedComposerX6,"._559p"),q=c('DOM').find(this.$ReactFeedComposerX6,"._559q");switch(n.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:c('CSS').hide(q);c('CSS').show(p);break;case c('ReactComposerAttachmentType').MEDIA:case c('ReactComposerAttachmentType').QANDA:c('CSS').show(q);c('CSS').hide(p);break;}};k.prototype.$ReactFeedComposerX12=function(l){if(this.$ReactFeedComposerX1)return;this.$ReactFeedComposerX1=true;var m=c('XReactFeedComposerXBootloadController').getURIBuilder().setString('composer_id',this.$ReactFeedComposerX2).setString('target_id',this.$ReactFeedComposerX10).setEnum('composer_type',this.$ReactFeedComposerX3).setString('friend_list_id',this.$ReactFeedComposerX5).setString('section_id',this.$ReactFeedComposerX7).getURI();new (c('AsyncRequest'))(m).send();var n=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_start').setEnum('composer_type',c('ComposerEntryPointRef').FEEDX).getURI();new (c('AsyncRequest'))(n).send();};k.prototype.$ReactFeedComposerX14=function(){this.$ReactFeedComposerX9.release();};k.prototype.$ReactFeedComposerX13=function(){this.$ReactFeedComposerX11.value='';c('Arbiter').inform(c('ReactComposerEvents').POST_SUCCEEDED+this.$ReactFeedComposerX2);this.$ReactFeedComposerX14();};f.exports=k;},null);
__d('ReactComposerFocusHandleScrollAway',['Event','getActiveElement','throttle'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=-400,i=300,j={handler:function(k,l){var m=c('Event').listen(window,'scroll',c('throttle')(function(){var n=k.getBoundingClientRect().bottom;if(n<h){l();c('getActiveElement')().blur();m.remove();}},i));}};f.exports=j;},null);
__d('ReactComposerFocusWrapperCore.react',['cssVar','cx','fbt','ix','ReactComposerEvents','Arbiter','Event','Image.react','Keys','ReactComponentWithPureRenderMixin','React','ReactDOM','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=parseInt("10px",10),n=c('React').createClass({displayName:'ReactComposerFocusWrapperCore',_composerID:'',_fixedHeight:0,_subscriptions:c('SubscriptionsHandler'),mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{composerID:l.string.isRequired,onDismiss:l.func.isRequired,onFocus:l.func.isRequired,focused:l.bool.isRequired,onFirstFocus:l.func,fixHeight:l.bool},getDefaultProps:function(){return {focused:false,fixHeight:false};},componentWillMount:function(){this._composerID=this.props.composerID;},componentWillReceiveProps:function(o){if(this.props.fixHeight&&!this.props.focused&&o.focused){var p=c('ReactDOM').findDOMNode(this.refs.container);this._fixedHeight=p.offsetHeight+m;}},componentDidMount:function(){this._initialize();},componentDidUpdate:function(o){if(!o.focused&&this.props.focused){var p=document.createEvent('HTMLEvents');if(p.initEvent){p.initEvent('resize',true,false);window.dispatchEvent(new (c('Event'))('resize'));}}},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){var o=this.props.fixHeight&&this.props.focused?{height:this._fixedHeight}:null,p=this.props.focused?this._renderDismissButton():null;return (c('React').createElement('div',{className:"_3u13"+(this.props.focused?' '+"_3u14":''),style:o},c('React').createElement('div',{className:"_3u15",onClick:this._onDismiss}),c('React').createElement('div',{className:"_3u16",ref:'container',onClick:this._onFocus},this.props.children,p)));},getComposerID:function(){return this._composerID;},getComposer:function(){return this.refs.container;},_renderDismissButton:function(){return (c('React').createElement('div',{className:"_3u17",onClick:this._onDismiss},c('React').createElement(c('Image.react'),{alt:j._("Close"),src:k('/images/composer/exit.png')})));},_initialize:function(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Event').listen(document.body,'keydown',function(o){if(o.keyCode===c('Keys').ESC)this._onDismiss();}.bind(this)));this._subscribeComposerEvents();this.props.onFirstFocus&&this.props.onFirstFocus();},_subscribeComposerEvents:function(){var o=c('Arbiter').subscribe(c('ReactComposerEvents').POST_SUCCEEDED+this._composerID,function(){return this.props.onDismiss(true);}.bind(this)),p=c('Arbiter').subscribe('ReactFeedComposerXBootloader/focuscomposer/'+this._composerID,function(){return this._onFocus();}.bind(this)),q=c('Arbiter').subscribe(c('ReactComposerEvents').COMPOSER_RESET+this._composerID,function(r,s){if(s&&s.newComposerID){this._composerID=s.newComposerID;this._subscribeComposerEvents();o.remove&&o.remove();p.remove&&p.remove();q.remove&&q.remove();}}.bind(this));this._subscriptions.addSubscriptions(o,p,q);},_onFocus:function(){if(this.props.focused)return;this.props.onFocus();},_onDismiss:function(){this.props.onDismiss();}});f.exports=n;},null);
__d('ReactComposerFocusInline.react',['ReactComposerFocusHandleScrollAway','ReactComposerFocusWrapperCore.react','React','ReactDOM'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').PureComponent);i=h&&h.prototype;function k(){var l,m;'use strict';for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return l=(m=i.constructor).call.apply(m,[this].concat(o)),this.state={focused:false},this.$ReactComposerFocusInline2=function(){var q=c('ReactDOM').findDOMNode(this.refs.focus.getComposer());c('ReactComposerFocusHandleScrollAway').handler(q,this.$ReactComposerFocusInline1);this.setState({focused:true});}.bind(this),this.$ReactComposerFocusInline1=function(){this.setState({focused:false});}.bind(this),l;}k.prototype.componentWillUnmount=function(){'use strict';this.$ReactComposerFocusInline1();};k.prototype.render=function(){'use strict';return c('React').createElement(c('ReactComposerFocusWrapperCore.react'),{composerID:this.props.composerID,focused:this.state.focused,onFocus:this.$ReactComposerFocusInline2,onDismiss:this.$ReactComposerFocusInline1,ref:'focus'},this.props.children);};k.propTypes={composerID:j.string.isRequired};f.exports=k;},null);