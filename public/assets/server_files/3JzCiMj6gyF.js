if (self.CavalryLogger) { CavalryLogger.start_js(["njSwC"]); }

__d('SeeFirstProfilePopoverMenu',['PopoverMenu'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('PopoverMenu'));i=h&&h.prototype;j.prototype._onMenuDone=function(k){'use strict';};function j(){'use strict';h.apply(this,arguments);}f.exports=j;},null);
__d('legacy:EditSubscriptions',['SubscriptionLevels','EditSubscriptions'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();b.SubscriptionLevels=c('SubscriptionLevels');b.EditSubscriptions=c('EditSubscriptions');},3);
__d('FBRTCAvailability',['ChannelConstants','PresenceStatus'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={isCallable:function(i){var j=c('PresenceStatus').getCapabilities(i),k=c('ChannelConstants').CAPABILITY_VOIP_INTEROP;return !!(j&k);}};f.exports=h;},null);
__d('FBRTCCallActions',['FBRTCDispatcher','keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({START_CALL:null}),i={Types:h,startCall:function(j,k,l,m){c('FBRTCDispatcher').dispatch({type:h.START_CALL,peerID:j,callID:k,isCaller:l,audioOnly:m});}};f.exports=i;},null);
__d('FBRTCScreenSharingLogger',['Log','MarauderLogger','formatDate','keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='webrtc_screen_sharing',i=c('keyMirror')({P2P_VIDEO_CALL:null,DIRECT_SCREEN_SHARING:null}),j=c('keyMirror')({screen_sharing_action:null,screen_sharing_error:null}),k=c('keyMirror')({PEER_ID:null,SESSION_ID:null,CONTEXT_TYPE:null,CONTENT:null}),l=c('keyMirror')({SCREEN_SHARING_TOGGLED:null,SCREEN_SHARING_CANCELLED:null,SCREEN_SHARING_ENABLED:null,SCREEN_SHARING_DISABLED:null,SCREEN_SHARING_EXT_DIALOG:null,SCREEN_SHARING_EXT_LINK:null,SCREEN_SHARING_DIALOG_SUCCESS:null,SCREEN_SHARING_DIALOG_CANCEL:null}),m=null;n.getInstance=function(){if(!m)m=new n();return m;};n.prototype.logAction=function(o,p,q,r,s){var t={};t[j.screen_sharing_action]=q;t[k.PEER_ID]=o;t[k.SESSION_ID]=p;t[k.CONTEXT_TYPE]=this.$FBRTCScreenSharingLogger1(r);t[k.CONTENT]=s;this.$FBRTCScreenSharingLogger2(j.screen_sharing_action,t);this.logToConsole(o,p,q);};n.prototype.logError=function(o,p,q,r){var s={};s[k.PEER_ID]=o;s[k.SESSION_ID]=p;s[k.CONTEXT_TYPE]=this.$FBRTCScreenSharingLogger1(q);s[k.CONTENT]=r;this.$FBRTCScreenSharingLogger2(j.screen_sharing_error,s);this.logToConsole(o,p,r);};n.prototype.logToConsole=function(o,p,q){};n.prototype.$FBRTCScreenSharingLogger1=function(o){return o?i.DIRECT_SCREEN_SHARING:i.P2P_VIDEO_CALL;};n.prototype.$FBRTCScreenSharingLogger2=function(o,p){c('MarauderLogger').log(o,h,p);};function n(){}n.Action=l;f.exports=n;},null);
__d('FBRTCStruct',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=function(j,k,l){var m,n;if(typeof j=='string'||j instanceof String){n=j;m=j;}else for(var o in j)if(j.hasOwnProperty(o))if(o==='index'){l=j[o];}else{n=o;m=j[o];}k[n]=l;k.strNames[l]=m;};function i(j){'use strict';this.strNames=[];for(var k=0;k<j.length;k++)h(j[k],this,k);}f.exports=i;},null);
__d("FBRTCVersionDetection",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={isChrome:function(){return !!navigator.webkitGetUserMedia;},isFirefox:function(){return !!navigator.mozGetUserMedia;},webrtcVersion:function(){if(this.isFirefox())return parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10);if(this.isChrome()){var i=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(i!==null){return parseInt(i[2],10);}else return 999;}return 0;}};f.exports=h;},null);
__d('FBRTCScreenSharingUtils',['Promise','FBRTCScreenSharingLogger','FBRTCStruct','FBRTCVersionDetection','RTCConfig','FBRTCSupport'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new (c('FBRTCStruct'))(['UNKNOWN','INSTALLED']),i=h.UNKNOWN,j={RECIPIENT:'SC_CONTENT_SCRIPT',isScreenSharingSupported:function(){return c('RTCConfig').ScreenSharingGK;},isSupportedBrowser:function(){return c('FBRTCVersionDetection').isChrome()&&c('FBRTCVersionDetection').webrtcVersion()>=34;},canUserReceiveScreenSharing:function(){return c('RTCConfig').ReceiveScreenGK&&c('FBRTCSupport').isOSSupported()&&j.isSupportedBrowser();},isExtensionInstalled:function(){return i===h.INSTALLED;},getExtensionStatus:function(){return i;},checkExtensionInstalled:function(){if(this.isExtensionInstalled())return c('Promise').resolve();var k=void 0,l=new (c('Promise'))(function(m){k=function(n){var o=n.origin,p=n.data;if(o!=window.location.origin||!p.type)return;if(p.type==='SC_EXT_INSTALLED'){window.removeEventListener('message',k);i=h.INSTALLED;m();}};window.addEventListener('message',k);});return c('Promise').race([l,this._pokeExtension()])['catch'](function(){return window.removeEventListener('message',k);});},_pokeExtension:function(){var k=arguments.length<=0||arguments[0]===undefined?5:arguments[0];return new (c('Promise'))(function(l,m){var n=setInterval(function(){setTimeout(function(){if(i===h.UNKNOWN)window.postMessage({recipient:j.RECIPIENT,type:'SC_IS_EXT_INSTALLED',text:'is extension installed'},'*');});if(k>0){k--;}else{clearInterval(n);m('extension unavailable');}},1000);});},logFailedAttempt:function(k,l){c('FBRTCScreenSharingLogger').getInstance().logAction(k,l,c('FBRTCScreenSharingLogger').Action.SCREEN_SHARING_TOGGLED,this._isDirect,'feature not available');}};f.exports=j;},null);
__d('FBRTCUtils',['emptyFunction','randomInt','AsyncRequest','FBID','FBRTCVersionDetection','RTCConfig','UserAgent'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=6000,i=typeof document.createElement('video').setSinkId==='function',j={attachMediaStream:function(k,l){if(window.webkitRTCPeerConnection){k.src=window.webkitURL.createObjectURL(l);}else{k.mozSrcObject=l;k.play();}},reattachMediaStream:function(k,l){if(window.webkitRTCPeerConnection){k.src=l.src;}else{k.mozSrcObject=l.mozSrcObject;k.play();}},generateRandomInt:function(){return c('randomInt')(0,4294967294)+1;},aboutEqual:function(k,l){return k-l<.01&&l-k<.01;},sendServerRequest:function(k,l,m,n,o,p){l=l||c('emptyFunction');m=m||c('emptyFunction');n=n||false;o=o||h;p=p||{};var q=new (c('AsyncRequest'))().setURI(k).setData(p).setAllowCrossPageTransition(true).setHandler(l).setErrorHandler(m).setTimeoutHandler(o,function(){m();});if(n)q.setOption('asynchronous_DEPRECATED',false);q.send();},isCollabCallable:function(k){return !c('FBID').isUser(k)&&(c('RTCConfig').CollaborationVideoGroupCallGK||c('RTCConfig').CollabVCEndpointsVideoCallGK);},isGroupCallable:function(k){return !c('FBID').isUser(k)&&c('RTCConfig').CollaborationVideoGroupCallGK;},isVCEndpointCallable:function(k){return !c('FBID').isUser(k)&&c('RTCConfig').CollabVCEndpointsVideoCallGK;},supportsMultipleStreamsPlanB:function(){return (c('UserAgent').isBrowser('Chrome')||c('UserAgent').isBrowser('Opera'))&&c('FBRTCVersionDetection').webrtcVersion()>=34;},supportsSetSink:function(){return i;}};f.exports=j;},null);
__d('FBRTCConfig',['FBRTCScreenSharingUtils','FBRTCUtils','UserAgent'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i,j=0,k={setConfig:function(l,m,n){h=l;j=m;i=c('FBRTCUtils').isVCEndpointCallable(m);},isVCEndpointCall:function(){return i;},getPeerID:function(){return j;},statsInterpreterConfig:function(){return {rtt_weight:2,frr_weight:800,plr_weight:500,score_threshold:1000,bad_score_count:3};},settingsEnabled:function(){return h.enable_settings;},shouldAutoDisableVideo:function(){return false;},unsupportedBrowserUrl:function(){if(h.troubleshooting_urls&&h.troubleshooting_urls.unsupported_browser)return h.troubleshooting_urls.unsupported_browser;return 'https://www.facebook.com/help/211644178877843';},userMediaErrorUrl:function(){if(h.troubleshooting_urls&&h.troubleshooting_urls.user_media_error)return h.troubleshooting_urls.user_media_error;return 'https://www.facebook.com/help/232232800134371';},userMediaPermissionErrorUrl:function(){if(h.troubleshooting_urls&&h.troubleshooting_urls.user_media_permission_error)return h.troubleshooting_urls.user_media_permission_error;return 'https://www.facebook.com/help/232232800134371';},supportedSignalingExperiments:function(){var l=[];if(c('UserAgent').isBrowser('Chrome')||c('UserAgent').isBrowser('Opera'))l.push('sdp_update');if(c('FBRTCUtils').supportsMultipleStreamsPlanB())l.push('multiple_streams_plan_b');if(c('FBRTCScreenSharingUtils').canUserReceiveScreenSharing())l.push('screen_sharing');return l;},isMessengerDotCom:function(){return h.is_messenger_dot_com;},useMessengerCallUI:function(){return h.messenger_call_ui;},shouldCreateDataChannel:function(){return h.data_channel;},disableURLManager:function(){return h.disable_url_manager;},useCurrentWindow:function(){return h.use_current_window;}};f.exports=k;},null);
__d('FBRTCCallUIWrapper',['regeneratorRuntime','Bootloader','FBRTCCallActions','FBRTCConfig','FBRTCMessageListener','UserAgent'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i={openGroupCallUI:function j(k,l,m,n){return c('regeneratorRuntime').async(function o(p){while(1)switch(p.prev=p.next){case 0:h=this._openWindow('Group Call');c('Bootloader').loadModules(["FBRTCCallUI"],function(q){q.openGroupCallUI(k,l,m,n,h);},'FBRTCCallUIWrapper');case 2:case 'end':return p.stop();}},null,this);},openGroupCallURI:function j(k,l){return c('regeneratorRuntime').async(function m(n){while(1)switch(n.prev=n.next){case 0:h=this._openWindow('Group Call');c('Bootloader').loadModules(["FBRTCCallUI"],function(o){o.openGroupCallURI(k,l,h);},'FBRTCCallUIWrapper');case 2:case 'end':return n.stop();}},null,this);},openAsCaller:function(j,k,l,m){if(!h&&window.rtcCallChildWindow){h=window.rtcCallChildWindow;window.rtcCallChildWindow=null;}if(this._shouldFocusCallWindow(j)){h.focus();return;}if(this._shouldCloseCallWindow())h.close();if(c('FBRTCConfig').useCurrentWindow()){c('FBRTCMessageListener').removeMessageHandler();c('FBRTCCallActions').startCall(j,k,true,m);c('Bootloader').loadModules(["FBRTCCallUI"],function(n){n.openAsCaller(j,k,l,m);},'FBRTCCallUIWrapper');return;}h=this._openWindow('Video Call');c('Bootloader').loadModules(["FBRTCCallUI"],function(n){n.openAsCaller(j,k,l,m,h);},'FBRTCCallUIWrapper');},openAsCallee:function(j,k,l,m,n){if(c('FBRTCConfig').useCurrentWindow()){c('FBRTCMessageListener').removeMessageHandler();c('FBRTCCallActions').startCall(j,k,false,n);c('Bootloader').loadModules(["FBRTCCallUI"],function(o){o.openAsCallee(j,k,l,m,n,null);},'FBRTCCallUIWrapper');return;}h=this._openWindow('Video Call');c('Bootloader').loadModules(["FBRTCCallUI"],function(o){o.openAsCallee(j,k,l,m,n,h);},'FBRTCCallUIWrapper');},_shouldFocusCallWindow:function(j){return h&&!h.closed&&h.rtcCallInProgessWith===j;},_shouldCloseCallWindow:function(){return h&&!h.closed&&!h.rtcCallInProgessWith;},_openWindow:function(j){var k=this._windowPosition(),l=['menubar=no','location=no','scrollbars=no','status=no','personalbar=no',k.height,k.width,k.top,k.left].join(',');if(this._isSparkBrowser())l='';return window.open('',j,l);},_windowPosition:function(){var j=960,k=540,l,m,n,o;if(screen&&screen.width>1280){j=1280;k=720;}if(window.innerWidth!==undefined){m=window.innerWidth;l=window.innerHeight;}else{m=screen.width;l=screen.height;}if(window.screenLeft!==undefined){n=window.screenLeft;o=window.screenTop;}else{n=window.screenX;o=window.screenY;}var p=Math.floor(m/2-j/2+n),q=Math.floor(l/2-k/2+o);return {height:'height='+k.toString(),width:'width='+j.toString(),top:'top='+q.toString(),left:'left='+p.toString()};},_isSparkBrowser:function(){return c('UserAgent').isBrowser('Chrome < 34')&&c('UserAgent').isBrowser('Chrome > 33');}};f.exports=i;},null);
__d('FBRTCCore',['invariant','Bootloader','FBRTCAvailability','FBRTCCallUIWrapper','FBRTCSupport','randomInt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=false,j={startOutgoingCall:function(k,l,m){var n=arguments.length<=3||arguments[3]===undefined?false:arguments[3];!!isNaN(parseInt(k,10))?h(0):void 0;if(i)return;i=true;setTimeout(function(){i=false;},1000);if(c('FBRTCSupport').isWebrtcSupported()){if(n&&!c('FBRTCSupport').isCollabSupported()){c('Bootloader').loadModules(["FBRTCUnsupportedBrowserMessage"],function(p){p.showForUnsupportedCollabCall();},'FBRTCCore');}else{var o=this._generateCallID();c('FBRTCCallUIWrapper').openAsCaller(k,o,l,m);}}else c('Bootloader').loadModules(["FBRTCUnsupportedBrowserMessage"],function(p){p.showForOutgoingCall();},'FBRTCCore');},startGroupCall:function(k){var l=k.conferenceName,m=k.usersToRing||[],n=k.hasVideo||false,o=k.clickSource||'unknown';!l?h(0):void 0;if(i)return;i=true;setTimeout(function(){i=false;},1000);if(!c('FBRTCSupport').isWebrtcSupported())c('Bootloader').loadModules(["FBRTCUnsupportedBrowserMessage"],function(p){p.showForOutgoingCall();},'FBRTCCore');c('FBRTCCallUIWrapper').openGroupCallUI(l,m,n,o);},isAvailableForWebrtcCalling:function(k){return c('FBRTCAvailability').isCallable(k);},shouldEnableVideoCalling:function(){return c('FBRTCSupport').isOSSupported();},_generateCallID:function(){return c('randomInt')(0,4294967295);}};f.exports=j;},null);
__d('FBRTCCallabilityActions',['keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function i(j){this.$FBRTCCallabilityActions1=j;}i.prototype.callabilityFetched=function(j,k){this.$FBRTCCallabilityActions1.dispatch({type:h.CALLABILITY_FETCHED,userID:j,callability:k});};i.prototype.callabilityFetchError=function(j){this.$FBRTCCallabilityActions1.dispatch({type:h.CALLABILITY_FETCH_ERROR,userID:j});};i.Types=h;f.exports=i;},null);
__d("XRTCCallabilityController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/rtc\/callability\/",{user_id:{type:"Int",required:true}});},null);
__d('FBRTCCallabilityDataManager',['AsyncRequest','FBRTCCallabilityActions','XRTCCallabilityController'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){this.$FBRTCCallabilityDataManager1=new (c('FBRTCCallabilityActions'))(i);}h.prototype.fetchCallability=function(i){var j=c('XRTCCallabilityController').getURIBuilder().setInt('user_id',parseInt(i,10)).getURI(),k=this.$FBRTCCallabilityDataManager2.bind(this,i),l=this.$FBRTCCallabilityDataManager3.bind(this,i);new (c('AsyncRequest'))().setURI(j).setHandler(k).setErrorHandler(l).setAllowCrossPageTransition(true).send();};h.prototype.$FBRTCCallabilityDataManager2=function(i,j){this.$FBRTCCallabilityDataManager1.callabilityFetched(i,j.payload);};h.prototype.$FBRTCCallabilityDataManager3=function(i,j){this.$FBRTCCallabilityDataManager1.callabilityFetchError(i);};f.exports=h;},null);
__d('RTCCallabilityStore',['fbt','Cache','FBRTCAvailability','FluxStore','FBRTCCallabilityActions','FBRTCCallabilityDataManager'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=.5,l=5;i=babelHelpers.inherits(m,c('FluxStore'));j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$RTCCallabilityStore2=new (c('FBRTCCallabilityDataManager'))(n);this.$RTCCallabilityStore1=new (c('Cache'))();}m.prototype.__onDispatch=function(n){var o=n.type;switch(o){case c('FBRTCCallabilityActions').Types.CALLABILITY_FETCHED:var p=n.userID,q=n.callability;this.$RTCCallabilityStore1.set(p,q.is_callable,null,q.is_callable?l:k);this.__emitChange();break;case c('FBRTCCallabilityActions').Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(n.userID,false,null,k);this.__emitChange();break;}};m.prototype.isCallable=function(n){if(c('FBRTCAvailability').isCallable(n))return true;if(!this.$RTCCallabilityStore1.has(n)){this.$RTCCallabilityStore2.fetchCallability(n);this.$RTCCallabilityStore1.set(n,false,null,k);}return !!this.$RTCCallabilityStore1.get(n);};m.prototype.callButtonTooltip=function(n,o){if(this.isCallable(n))return h._("Start a video call with {shortname}",[h.param('shortname',o)]);return h._("{shortname} is currently unavailable for video calling",[h.param('shortname',o)]);};m.prototype.voiceCallButtonTooltip=function(n,o){if(this.isCallable(n))return h._("Start a voice call with {shortname}",[h.param('shortname',o)]);return h._("{shortname} is currently unavailable for voice calling",[h.param('shortname',o)]);};f.exports=m;},null);
__d('FBRTCCallabilityStore',['FBRTCDispatcher','RTCCallabilityStore'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new (c('RTCCallabilityStore'))(c('FBRTCDispatcher'));},null);
__d('ProfileEscapeHatch',['CSS','ProfileTabUtils','Run','TimelineComponentKeys','TimelineController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=[],i=false;function j(k){'use strict';this.$ProfileEscapeHatch1=k;h.push(this);if(!i){c('TimelineController').register(c('TimelineComponentKeys').ESCAPE_HATCH,j);c('Run').onLeave(function(){h=[];});i=true;}}j.handleTabChange=function(k){'use strict';h.forEach(function(l){c('CSS').conditionShow(l.$ProfileEscapeHatch1,c('ProfileTabUtils').isTimelineTab(k));});};f.exports=j;},null);
__d('VideoCallHelpler',['FBRTCCallabilityStore','FBRTCCore','TooltipData'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){var l=k.calleeID,m=k.calleeName;j.forEachItem(function(n){if(n.getValue&&n.getValue()==='video_call'){if(c('FBRTCCallabilityStore').isCallable(k.calleeID)){n.enable();}else n.disable();c('TooltipData').set(n.getRoot(),c('FBRTCCallabilityStore').callButtonTooltip(l,m),'right');}});}var i={bindProfileVideoCallAction:function(j,k){h(j,k);c('FBRTCCallabilityStore').addListener(function(){h(j,k);});j.subscribe('itemclick',function(l,m){if(m.item.getValue()==='video_call'&&!m.item.isDisabled())c('FBRTCCore').startOutgoingCall(k.calleeID,'timeline_profile',false);});}};f.exports=i;},null);